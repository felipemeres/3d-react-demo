```{=html}
<!doctype html><html lang="en"><head><title data-rh="true">3D Data Visualization with React and Three.js | by Peter Beshai | Cortico | Medium</title><meta data-rh="true" charset="utf-8"/><meta data-rh="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,maximum-scale=1"/><meta data-rh="true" name="theme-color" content="#000000"/><meta data-rh="true" name="twitter:app:name:iphone" content="Medium"/><meta data-rh="true" name="twitter:app:id:iphone" content="828256236"/><meta data-rh="true" property="al:ios:app_name" content="Medium"/><meta data-rh="true" property="al:ios:app_store_id" content="828256236"/><meta data-rh="true" property="al:android:package" content="com.medium.reader"/><meta data-rh="true" property="fb:app_id" content="542599432471018"/><meta data-rh="true" property="og:site_name" content="Medium"/><meta data-rh="true" property="og:type" content="article"/><meta data-rh="true" property="article:published_time" content="2020-01-31T15:09:35.125Z"/><meta data-rh="true" name="title" content="3D Data Visualization with React and Three.js | by Peter Beshai | Cortico | Medium"/><meta data-rh="true" property="og:title" content="3D Data Visualization with React and Three.js"/><meta data-rh="true" property="al:android:url" content="medium://p/7272fb6de432"/><meta data-rh="true" property="al:ios:url" content="medium://p/7272fb6de432"/><meta data-rh="true" property="al:android:app_name" content="Medium"/><meta data-rh="true" name="description" content="At the end of 2019, we had a hack week at Cortico where all of the technical staff got together to explore new ideas without any requirements or limitations. I ended up in a small team with NLP…"/><meta data-rh="true" property="og:description" content="Go step-by-step through the making of a 3D data visualization including animation and interaction. Made with React and Three.js."/><meta data-rh="true" property="og:url" content="https://medium.com/cortico/3d-data-visualization-with-react-and-three-js-7272fb6de432"/><meta data-rh="true" property="al:web:url" content="https://medium.com/cortico/3d-data-visualization-with-react-and-three-js-7272fb6de432"/><meta data-rh="true" property="og:image" content="https://miro.medium.com/v2/resize:fit:1200/1*vWLlwO3cFbWse25p1y6E9Q.png"/><meta data-rh="true" property="article:author" content="https://medium.com/@pbesh"/><meta data-rh="true" name="author" content="Peter Beshai"/><meta data-rh="true" name="robots" content="index,follow,max-image-preview:large"/><meta data-rh="true" name="referrer" content="unsafe-url"/><meta data-rh="true" property="twitter:title" content="3D Data Visualization with React and Three.js"/><meta data-rh="true" name="twitter:site" content="@cortico"/><meta data-rh="true" name="twitter:app:url:iphone" content="medium://p/7272fb6de432"/><meta data-rh="true" property="twitter:description" content="Go step-by-step through the making of a 3D data visualization including animation and interaction. Made with React and Three.js."/><meta data-rh="true" name="twitter:image:src" content="https://miro.medium.com/v2/resize:fit:1200/1*vWLlwO3cFbWse25p1y6E9Q.png"/><meta data-rh="true" name="twitter:card" content="summary_large_image"/><meta data-rh="true" name="twitter:creator" content="@pbesh"/><meta data-rh="true" name="twitter:label1" content="Reading time"/><meta data-rh="true" name="twitter:data1" content="24 min read"/><link data-rh="true" rel="icon" href="https://miro.medium.com/v2/1*m-R_BkNf1Qjr1YbyOIJY2w.png"/><link data-rh="true" rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml"/><link data-rh="true" rel="apple-touch-icon" sizes="152x152" href="https://miro.medium.com/v2/resize:fill:152:152/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"/><link data-rh="true" rel="apple-touch-icon" sizes="120x120" href="https://miro.medium.com/v2/resize:fill:120:120/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"/><link data-rh="true" rel="apple-touch-icon" sizes="76x76" href="https://miro.medium.com/v2/resize:fill:76:76/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"/><link data-rh="true" rel="apple-touch-icon" sizes="60x60" href="https://miro.medium.com/v2/resize:fill:60:60/1*sHhtYhaCe2Uc3IU0IgKwIQ.png"/><link data-rh="true" rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/Medium-Avatar-500x500.svg" color="#171717"/><link data-rh="true" rel="preconnect" href="https://glyph.medium.com" crossOrigin=""/><link data-rh="true" id="glyph_preload_link" rel="preload" as="style" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" id="glyph_link" rel="stylesheet" type="text/css" href="https://glyph.medium.com/css/unbound.css"/><link data-rh="true" rel="author" href="https://medium.com/@pbesh"/><link data-rh="true" rel="canonical" href="https://medium.com/cortico/3d-data-visualization-with-react-and-three-js-7272fb6de432"/><link data-rh="true" rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/7272fb6de432"/><script data-rh="true" type="application/ld+json">{"@context":"http:\u002F\u002Fschema.org","@type":"NewsArticle","image":["https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:1200\u002F1*vWLlwO3cFbWse25p1y6E9Q.png"],"url":"https:\u002F\u002Fmedium.com\u002Fcortico\u002F3d-data-visualization-with-react-and-three-js-7272fb6de432","dateCreated":"2020-01-31T15:09:35.125Z","datePublished":"2020-01-31T15:09:35.125Z","dateModified":"2021-12-13T08:56:26.399Z","headline":"3D Data Visualization with React and Three.js - Cortico - Medium","name":"3D Data Visualization with React and Three.js - Cortico - Medium","description":"At the end of 2019, we had a hack week at Cortico where all of the technical staff got together to explore new ideas without any requirements or limitations. I ended up in a small team with NLP…","identifier":"7272fb6de432","author":{"@type":"Person","name":"Peter Beshai","url":"https:\u002F\u002Fmedium.com\u002F@pbesh"},"creator":["Peter Beshai"],"publisher":{"@type":"Organization","name":"Cortico","url":"https:\u002F\u002Fmedium.com\u002Fcortico","logo":{"@type":"ImageObject","width":291,"height":60,"url":"https:\u002F\u002Fmiro.medium.com\u002Fv2\u002Fresize:fit:582\u002F1*9V5dXkk0pSMmeoNad9aC1A.png"}},"mainEntityOfPage":"https:\u002F\u002Fmedium.com\u002Fcortico\u002F3d-data-visualization-with-react-and-three-js-7272fb6de432"}</script><style type="text/css" data-fela-rehydration="588" data-fela-type="STATIC">html{box-sizing:border-box;-webkit-text-size-adjust:100%}*, *:before, *:after{box-sizing:inherit}body{margin:0;padding:0;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;color:rgba(0,0,0,0.8);position:relative;min-height:100vh}h1, h2, h3, h4, h5, h6, dl, dd, ol, ul, menu, figure, blockquote, p, pre, form{margin:0}menu, ol, ul{padding:0;list-style:none;list-style-image:none}main{display:block}a{color:inherit;text-decoration:none}a, button, input{-webkit-tap-highlight-color:transparent}img, svg{vertical-align:middle}button{background:transparent;overflow:visible}button, input, optgroup, select, textarea{margin:0}:root{--reach-tabs:1;--reach-menu-button:1}#speechify-root{font-family:Sohne, sans-serif}div[data-popper-reference-hidden="true"]{visibility:hidden;pointer-events:none}.grecaptcha-badge{visibility:hidden}
```
/*XCode style (c) Angel Garcia <angelgarcia.mail@gmail.com>*/.hljs
{background: #fff;color: black; }/\* Gray DOCTYPE selectors like WebKit
*/ .xml .hljs-meta {color: #c0c0c0; }.hljs-comment, .hljs-quote {color:
#007400; }.hljs-tag, .hljs-attribute, .hljs-keyword, .hljs-selector-tag,
.hljs-literal, .hljs-name {color: #aa0d91; }.hljs-variable,
.hljs-template-variable {color: #3F6E74; }.hljs-code, .hljs-string,
.hljs-meta .hljs-string {color: #c41a16; }.hljs-regexp, .hljs-link
{color: #0E0EFF; }.hljs-title, .hljs-symbol, .hljs-bullet, .hljs-number
{color: #1c00cf; }.hljs-section, .hljs-meta {color: #643820;
}.hljs-title.class\_, .hljs-class .hljs-title, .hljs-type,
.hljs-built_in, .hljs-params {color: #5c2699; }.hljs-attr {color:
#836C28; }.hljs-subst {color: #000; }.hljs-formula {background-color:
#eee;font-style: italic; }.hljs-addition {background-color: #baeeba;
}.hljs-deletion {background-color: #ffc8bd; }.hljs-selector-id,
.hljs-selector-class {color: #9b703f; }.hljs-doctag, .hljs-strong
{font-weight: bold; }.hljs-emphasis {font-style: italic; }
`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="KEYFRAME">`{=html}@-webkit-keyframes
k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@-moz-keyframes
k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}@keyframes
k1{0%{opacity:0.8}50%{opacity:0.5}100%{opacity:0.8}}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE">`{=html}.a{font-family:medium-content-sans-serif-font,
-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen, Ubuntu,
Cantarell, \"Open Sans\", \"Helvetica Neue\",
sans-serif}.b{font-weight:400}.c{background-color:rgba(255, 255, 255,
1)}.l{display:block}.m{position:sticky}.n{top:0}.o{z-index:500}.p{padding:0
24px}.q{align-items:center}.r{border-bottom:solid 1px
#F2F2F2}.y{height:41px}.z{line-height:20px}.ab{display:flex}.ac{height:57px}.ae{flex:1
0
auto}.af{color:inherit}.ag{fill:inherit}.ah{font-size:inherit}.ai{border:inherit}.aj{font-family:inherit}.ak{letter-spacing:inherit}.al{font-weight:inherit}.am{padding:0}.an{margin:0}.ao{cursor:pointer}.ap:disabled{cursor:not-allowed}.aq:disabled{color:#6B6B6B}.ar:disabled{fill:#6B6B6B}.au{fill:rgba(0,
0, 0,
1)}.av{height:22px}.aw{margin-left:16px}.ax{border:none}.ay{border-radius:20px}.az{width:240px}.ba{background:#F9F9F9}.bb
path{fill:#6B6B6B}.bd{outline:none}.be{font-family:sohne, \"Helvetica
Neue\", Helvetica, Arial,
sans-serif}.bf{font-size:14px}.bg{width:100%}.bh{padding:10px 20px 10px
0}.bi{background-color:transparent}.bj{color:#242424}.bk::placeholder{color:#6B6B6B}.bl{display:inline-block}.bm{margin-left:12px}.bn{margin-right:12px}.bo{border-radius:4px}.bp{margin-left:24px}.bq{height:24px}.bw{background-color:#F9F9F9}.bx{border-radius:50%}.by{height:32px}.bz{width:32px}.ca{justify-content:center}.cg{max-width:680px}.ch{min-width:0}.ci{animation:k1
1.2s ease-in-out
infinite}.cj{height:100vh}.ck{margin-bottom:16px}.cl{margin-top:48px}.cm{align-items:flex-start}.cn{flex-direction:column}.co{justify-content:space-between}.cp{margin-bottom:24px}.cv{width:80%}.cw{background-color:#F2F2F2}.dc{height:44px}.dd{width:44px}.de{margin:auto
0}.df{margin-bottom:4px}.dg{height:16px}.dh{width:120px}.di{width:80px}.do{margin-bottom:8px}.dp{width:96%}.dq{width:98%}.dr{width:81%}.ds{margin-left:8px}.dt{color:#6B6B6B}.du{font-size:13px}.dv{height:100%}.eo{color:#FFFFFF}.ep{fill:#FFFFFF}.eq{background:rgba(26,
137, 23, 1)}.er{border-color:rgba(26, 137, 23,
1)}.ev:disabled{cursor:inherit
!important}.ew:disabled{opacity:0.3}.ex:disabled:hover{background:rgba(26,
137, 23, 1)}.ey:disabled:hover{border-color:rgba(26, 137, 23,
1)}.ez{border-radius:99em}.fa{border-width:1px}.fb{border-style:solid}.fc{box-sizing:border-box}.fd{text-decoration:none}.fe{text-align:center}.fh{margin-right:32px}.fi{position:relative}.fj{fill:#6B6B6B}.fm{background:transparent}.fn
svg{margin-left:4px}.fo svg{fill:#6B6B6B}.fq{box-shadow:inset 0 0 0 1px
rgba(0, 0, 0, 0.05)}.fr{position:absolute}.fy{margin:0
24px}.gc{background:rgba(255, 255, 255, 1)}.gd{border:1px solid
#F2F2F2}.ge{box-shadow:0 1px 4px
#F2F2F2}.gf{max-height:100vh}.gg{overflow-y:auto}.gh{left:0}.gi{top:calc(100vh +
100px)}.gj{bottom:calc(100vh +
100px)}.gk{width:10px}.gl{pointer-events:none}.gm{word-break:break-word}.gn{word-wrap:break-word}.go:after{display:block}.gp:after{content:\"\"}.gq:after{clear:both}.gr{line-height:1.23}.gs{letter-spacing:0}.gt{font-style:normal}.gu{font-weight:700}.hu{@media
all and (max-width: 551.98px):8px}.hv{@media all and (min-width: 552px)
and (max-width: 727.98px):8px}.hw{@media all and (min-width: 728px) and
(max-width: 903.98px):16px}.hx{@media all and (min-width: 904px) and
(max-width: 1079.98px):16px}.hy{@media all and (min-width:
1080px):16px}.ie{align-items:baseline}.if{width:48px}.ig{height:48px}.ih{border:2px
solid rgba(255, 255, 255,
1)}.ii{z-index:0}.ij{box-shadow:none}.ik{border:1px solid rgba(0, 0, 0,
0.05)}.il{margin-left:-12px}.im{width:28px}.in{height:28px}.io{z-index:1}.ip{width:24px}.iq{margin-bottom:2px}.ir{flex-wrap:nowrap}.is{font-size:16px}.it{line-height:24px}.iv{margin:0
8px}.iw{display:inline}.ix{color:rgba(26, 137, 23, 1)}.iy{fill:rgba(26,
137, 23, 1)}.jb{flex:0 0
auto}.je{flex-wrap:wrap}.jh{white-space:pre-wrap}.ji{margin-right:4px}.jj{overflow:hidden}.jk{max-height:20px}.jl{text-overflow:ellipsis}.jm{display:-webkit-box}.jn{-webkit-line-clamp:1}.jo{-webkit-box-orient:vertical}.jp{word-break:break-all}.jr{padding-left:8px}.js{padding-right:8px}.kt\>
*{flex-shrink:0}.ku{overflow-x:scroll}.kv::-webkit-scrollbar{display:none}.kw{scrollbar-width:none}.kx{-ms-overflow-style:none}.ky{width:74px}.kz{flex-direction:row}.la{z-index:2}.ld{-webkit-user-select:none}.le{border:0}.lf{fill:rgba(117,
117, 117, 1)}.li{outline:0}.lj{user-select:none}.lk\>
svg{pointer-events:none}.lt{cursor:progress}.lu{margin-left:4px}.lv{margin-top:0px}.lw{opacity:1}.lx{padding:4px
0}.ma{width:16px}.mc{display:inline-flex}.mi{max-width:100%}.mj{padding:8px
2px}.mk
svg{color:#6B6B6B}.nb{clear:both}.nh{height:auto}.ni{margin-top:10px}.nj{max-width:728px}.nk{margin-left:auto}.nl{margin-right:auto}.no{line-height:1.58}.np{letter-spacing:-0.004em}.nq{font-family:source-serif-pro,
Georgia, Cambria, \"Times New Roman\", Times,
serif}.ol{margin-bottom:-0.46em}.om{text-decoration:underline}.os{margin:auto}.ot{padding-bottom:56.199999999999996%}.ou{height:0}.ov{line-height:1.18}.ow{letter-spacing:-0.022em}.ox{font-weight:600}.pn{margin-bottom:-0.31em}.pt{list-style-type:disc}.pu{margin-left:30px}.pv{padding-left:0px}.qb{line-height:1.12}.qu{margin-bottom:-0.28em}.qv{font-style:italic}.qw{overflow-x:auto}.qx{font-family:source-code-pro,
Menlo, Monaco, \"Courier New\", Courier,
monospace}.qy{padding:20px}.qz{border-radius:0}.ra{background:#F2F2F2}.rb{margin-top:-0.09em}.rc{margin-bottom:-0.09em}.rd{min-width:fit-content}.re{max-width:1276px}.rg{cursor:zoom-in}.rh{z-index:auto}.rj{max-width:2212px}.rk{max-width:2956px}.rl{padding:2px
4px}.rm{font-size:75%}.rn\>
strong{font-family:inherit}.ro{max-width:3020px}.rp{padding-bottom:50%}.rq{max-width:1298px}.rr{max-width:2348px}.rs{max-width:2516px}.rt{max-width:1164px}.ru{max-width:2280px}.rv{max-width:2884px}.rw{max-width:945px}.rx{max-width:1024px}.ry{max-width:2076px}.rz{max-width:1090px}.sa{max-width:1074px}.sb{max-width:891px}.sc{max-width:1054px}.sd{max-width:2180px}.se{max-width:1908px}.sf{max-width:851px}.sg{max-width:1940px}.sh{max-width:1292px}.si{max-width:2448px}.sj{max-width:1254px}.sk{max-width:2752px}.sl{max-width:3192px}.sm{max-width:2820px}.sn{max-width:1262px}.so{max-width:2580px}.sp{max-width:1274px}.sq{max-width:3088px}.sr{max-width:1270px}.ss{max-width:1272px}.st{max-width:1252px}.su{max-width:1212px}.sv{max-width:2852px}.sw{max-width:1278px}.sx{max-width:2244px}.sy{margin-bottom:26px}.sz{margin-top:6px}.ta{margin-top:8px}.tb{margin-right:8px}.tc{padding:8px
16px}.td{border-radius:100px}.te{transition:background 300ms
ease}.tg{white-space:nowrap}.th{border-top:none}.tn{height:52px}.to{max-height:52px}.tp{box-sizing:content-box}.tq{position:static}.ts{max-width:155px}.ty{margin-right:20px}.ue{align-items:flex-end}.uf{width:76px}.ug{height:76px}.uh{border:2px
solid
#F9F9F9}.ui{height:72px}.uj{width:72px}.uk{margin-left:-16px}.ul{width:36px}.um{height:36px}.un{color:rgba(255,
255, 255, 1)}.uo{fill:rgba(255, 255, 255, 1)}.up{background:rgba(25, 25,
25, 1)}.uq{border-color:rgba(25, 25, 25,
1)}.ut:disabled{opacity:0.1}.uu:disabled:hover{background:rgba(25, 25,
25, 1)}.uv:disabled:hover{border-color:rgba(25, 25, 25,
1)}.uw{width:auto}.ux{stroke:#F2F2F2}.uy{color:#F2F2F2}.uz{fill:#F2F2F2}.va{border-color:#F2F2F2}.vg{font-weight:500}.vh{font-size:24px}.vi{line-height:30px}.vj{letter-spacing:-0.016em}.vk{margin-top:16px}.vl{height:0px}.vm{border-bottom:solid
1px #E5E5E5}.vn{margin-top:72px}.vo{padding:24px
0}.vp{margin-bottom:0px}.vq{margin-right:16px}.as:hover:not(:disabled){color:rgba(25,
25, 25, 1)}.at:hover:not(:disabled){fill:rgba(25, 25, 25,
1)}.es:hover{background:rgba(15, 115, 12,
1)}.et:hover{border-color:rgba(15, 115, 12,
1)}.eu:hover{cursor:pointer}.fk:hover{color:#242424}.fl:hover{fill:#242424}.fp:hover
svg{fill:#242424}.fs:hover{background-color:rgba(0, 0, 0,
0.1)}.iu:hover{text-decoration:underline}.iz:hover:not(:disabled){color:rgba(15,
115, 12, 1)}.ja:hover:not(:disabled){fill:rgba(15, 115, 12,
1)}.lh:hover{fill:rgba(8, 8, 8, 1)}.ly:hover{fill:#000000}.lz:hover
p{color:#000000}.mb:hover{color:#000000}.ml:hover
svg{color:#000000}.tf:hover{background-color:#F2F2F2}.ur:hover{background:#000000}.us:hover{border-color:#242424}.vb:hover{background:#F2F2F2}.vc:hover{border-color:#F2F2F2}.vd:hover{cursor:wait}.ve:hover{color:#F2F2F2}.vf:hover{fill:#F2F2F2}.bc:focus-within
path{fill:#242424}.lg:focus{fill:rgba(8, 8, 8, 1)}.mm:focus
svg{color:#000000}.ri:focus{transform:scale(1.01)}.ll:active{border-style:none}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (min-width: 1080px)">`{=html}.d{display:none}.bv{width:64px}.cf{margin:0
64px}.cu{height:48px}.db{margin-bottom:52px}.dn{margin-bottom:48px}.ee{font-size:14px}.ef{line-height:20px}.el{font-size:13px}.em{padding:5px
12px}.fg{display:flex}.fx{margin-bottom:68px}.gb{max-width:680px}.hp{font-size:42px}.hq{margin-top:1.19em}.hr{margin-bottom:32px}.hs{line-height:52px}.ht{letter-spacing:-0.011em}.id{align-items:center}.kf{border-top:solid
1px #F2F2F2}.kg{border-bottom:solid 1px #F2F2F2}.kh{margin:32px 0
0}.ki{padding:3px 8px}.kr\> *{margin-right:24px}.ks\>
:last-child{margin-right:0}.ls{margin-top:0px}.mh{margin:0}.ng{margin-top:40px}.oh{font-size:20px}.oi{margin-top:2.14em}.oj{line-height:32px}.ok{letter-spacing:-0.003em}.or{margin-top:56px}.pk{margin-top:1.72em}.pl{line-height:24px}.pm{letter-spacing:0}.ps{margin-top:0.94em}.qa{margin-top:1.14em}.qq{font-size:24px}.qr{margin-top:1.95em}.qs{line-height:30px}.qt{letter-spacing:-0.016em}.tm{margin-bottom:88px}.tx{display:inline-block}.ud{padding-top:72px}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (max-width: 1079.98px)">`{=html}.e{display:none}.lr{margin-top:0px}.nm{margin-left:auto}.nn{text-align:center}.tw{display:inline-block}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (max-width: 903.98px)">`{=html}.f{display:none}.lq{margin-top:0px}.tv{display:inline-block}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (max-width: 727.98px)">`{=html}.g{display:none}.lo{margin-top:0px}.lp{margin-right:0px}.tu{display:inline-block}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (max-width: 551.98px)">`{=html}.h{display:none}.s{display:flex}.t{justify-content:space-between}.br{width:24px}.cb{margin:0
24px}.cq{height:40px}.cx{margin-bottom:44px}.dj{margin-bottom:32px}.dw{font-size:13px}.dx{line-height:20px}.eg{padding:0px
8px
1px}.ft{margin-bottom:4px}.gv{font-size:32px}.gw{margin-top:1.01em}.gx{margin-bottom:24px}.gy{line-height:38px}.gz{letter-spacing:-0.014em}.hz{align-items:flex-start}.jc{flex-direction:column}.jf{margin-bottom:2px}.jt{margin:24px
-24px 0}.ju{padding:0}.kj\> *{margin-right:8px}.kk\>
:last-child{margin-right:24px}.lb{margin-left:0px}.lm{margin-top:0px}.ln{margin-right:0px}.md{margin:0}.mn{border:1px
solid #F2F2F2}.mo{border-radius:99em}.mp{padding:0px 16px 0px
12px}.mq{height:38px}.mr{align-items:center}.mt
svg{margin-right:8px}.nc{margin-top:32px}.nr{font-size:18px}.ns{margin-top:1.56em}.nt{line-height:28px}.nu{letter-spacing:-0.003em}.on{margin-top:40px}.oy{font-size:16px}.oz{margin-top:1.23em}.pa{letter-spacing:0}.po{margin-top:0.67em}.pw{margin-top:1.34em}.qc{font-size:20px}.qd{margin-top:1.2em}.qe{line-height:24px}.ti{margin-bottom:80px}.tt{display:inline-block}.tz{padding-top:48px}.ms:hover{border-color:#E5E5E5}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (min-width: 904px) and (max-width: 1079.98px)">`{=html}.i{display:none}.bu{width:64px}.ce{margin:0
64px}.ct{height:48px}.da{margin-bottom:52px}.dm{margin-bottom:48px}.ec{font-size:14px}.ed{line-height:20px}.ej{font-size:13px}.ek{padding:5px
12px}.ff{display:flex}.fw{margin-bottom:68px}.ga{max-width:680px}.hk{font-size:42px}.hl{margin-top:1.19em}.hm{margin-bottom:32px}.hn{line-height:52px}.ho{letter-spacing:-0.011em}.ic{align-items:center}.kb{border-top:solid
1px #F2F2F2}.kc{border-bottom:solid 1px #F2F2F2}.kd{margin:32px 0
0}.ke{padding:3px 8px}.kp\> *{margin-right:24px}.kq\>
:last-child{margin-right:0}.mg{margin:0}.nf{margin-top:40px}.od{font-size:20px}.oe{margin-top:2.14em}.of{line-height:32px}.og{letter-spacing:-0.003em}.oq{margin-top:56px}.ph{margin-top:1.72em}.pi{line-height:24px}.pj{letter-spacing:0}.pr{margin-top:0.94em}.pz{margin-top:1.14em}.qm{font-size:24px}.qn{margin-top:1.95em}.qo{line-height:30px}.qp{letter-spacing:-0.016em}.tl{margin-bottom:88px}.uc{padding-top:72px}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (min-width: 728px) and (max-width: 903.98px)">`{=html}.j{display:none}.w{display:flex}.x{justify-content:space-between}.bt{width:64px}.cd{margin:0
48px}.cs{height:48px}.cz{margin-bottom:52px}.dl{margin-bottom:48px}.ea{font-size:13px}.eb{line-height:20px}.ei{padding:0px
8px
1px}.fv{margin-bottom:68px}.fz{max-width:680px}.hf{font-size:42px}.hg{margin-top:1.19em}.hh{margin-bottom:32px}.hi{line-height:52px}.hj{letter-spacing:-0.011em}.ib{align-items:center}.jx{border-top:solid
1px #F2F2F2}.jy{border-bottom:solid 1px #F2F2F2}.jz{margin:32px 0
0}.ka{padding:3px 8px}.kn\> *{margin-right:24px}.ko\>
:last-child{margin-right:0}.mf{margin:0}.ne{margin-top:40px}.nz{font-size:20px}.oa{margin-top:2.14em}.ob{line-height:32px}.oc{letter-spacing:-0.003em}.op{margin-top:56px}.pe{margin-top:1.72em}.pf{line-height:24px}.pg{letter-spacing:0}.pq{margin-top:0.94em}.py{margin-top:1.14em}.qi{font-size:24px}.qj{margin-top:1.95em}.qk{line-height:30px}.ql{letter-spacing:-0.016em}.tk{margin-bottom:88px}.ub{padding-top:72px}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="all and (min-width: 552px) and (max-width: 727.98px)">`{=html}.k{display:none}.u{display:flex}.v{justify-content:space-between}.bs{width:24px}.cc{margin:0
24px}.cr{height:40px}.cy{margin-bottom:44px}.dk{margin-bottom:32px}.dy{font-size:13px}.dz{line-height:20px}.eh{padding:0px
8px
1px}.fu{margin-bottom:4px}.ha{font-size:32px}.hb{margin-top:1.01em}.hc{margin-bottom:24px}.hd{line-height:38px}.he{letter-spacing:-0.014em}.ia{align-items:flex-start}.jd{flex-direction:column}.jg{margin-bottom:2px}.jv{margin:24px
0 0}.jw{padding:0}.kl\> *{margin-right:8px}.km\>
:last-child{margin-right:8px}.lc{margin-left:0px}.me{margin:0}.mu{border:1px
solid #F2F2F2}.mv{border-radius:99em}.mw{padding:0px 16px 0px
12px}.mx{height:38px}.my{align-items:center}.na
svg{margin-right:8px}.nd{margin-top:32px}.nv{font-size:18px}.nw{margin-top:1.56em}.nx{line-height:28px}.ny{letter-spacing:-0.003em}.oo{margin-top:40px}.pb{font-size:16px}.pc{margin-top:1.23em}.pd{letter-spacing:0}.pp{margin-top:0.67em}.px{margin-top:1.34em}.qf{font-size:20px}.qg{margin-top:1.2em}.qh{line-height:24px}.tj{margin-bottom:80px}.ua{padding-top:48px}.mz:hover{border-color:#E5E5E5}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="print">`{=html}.tr{display:none}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="(orientation: landscape) and (max-width: 903.98px)">`{=html}.jq{max-height:none}`</style>`{=html}`<style type="text/css" data-fela-rehydration="588" data-fela-type="RULE" media="(prefers-reduced-motion: no-preference)">`{=html}.rf{transition:transform
300ms cubic-bezier(0.2, 0, 0.2,
1)}`</style>`{=html}`</head>`{=html}`<body>`{=html}`<div id="root">`{=html}`<div class="a b c">`{=html}`<div class="d e f g h i j k">`{=html}`</div>`{=html}`<script>`{=html}document.domain
=
document.domain;`</script>`{=html}`<div class="l c">`{=html}`<div class="l m n o c">`{=html}`<div class="p q r s t u v w x i d y z">`{=html}`<a class="dt ag du be ak b am an ao ap aq ar as at s u w i d q dv z" href="https://rsci.app.link/?%24canonical_url=https%3A%2F%2Fmedium.com%2Fp%2F7272fb6de432&amp;%7Efeature=LoOpenInAppButton&amp;%7Echannel=ShowPostUnderCollection&amp;source=---two_column_layout_nav----------------------------------" rel="noopener follow">`{=html}Open
in
app`<svg width="10" height="10" viewBox="0 0 10 10" fill="none" class="ds">`{=html}`<path d="M.98 8.48a.37.37 0 1 0 .54.54l-.54-.54zm7.77-7.23h.38c0-.2-.17-.38-.38-.38v.38zM8.37 6.5a.37.37 0 1 0 .76 0h-.76zM3.5.87a.37.37 0 1 0 0 .76V.88zM1.52 9.03l7.5-7.5-.54-.54-7.5 7.5.54.54zm6.86-7.77V6.5h.74V1.25h-.74zm-4.88.38h5.25V.88H3.5v.74z" fill="currentColor">`{=html}`</path>`{=html}`</svg>`{=html}`</a>`{=html}`<div class="ab q">`{=html}`<p class="be b dw dx dy dz ea eb ec ed ee ef dt">`{=html}`<span>`{=html}`<button class="be b dw dx eg dy dz eh ea eb ei ej ed ek el ef em eo ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" data-testid="headerSignUpButton">`{=html}Sign
up`</button>`{=html}`</span>`{=html}`</p>`{=html}`<div class="aw l">`{=html}`<p class="be b dw dx dy dz ea eb ec ed ee ef dt">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" rel="noopener follow" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------">`{=html}Sign
in`</a>`{=html}`</span>`{=html}`</p>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="p q r ab ac">`{=html}`<div class="ab q ae">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at ab" aria-label="Homepage" data-testid="headerMediumLogo" rel="noopener follow" href="/?source=---two_column_layout_nav----------------------------------">`{=html}`<svg viewBox="0 0 3940 610" class="au av">`{=html}`<path d="M594.79 308.2c0 163.76-131.85 296.52-294.5 296.52S5.8 472 5.8 308.2 137.65 11.69 300.29 11.69s294.5 132.75 294.5 296.51M917.86 308.2c0 154.16-65.93 279.12-147.25 279.12s-147.25-125-147.25-279.12S689.29 29.08 770.61 29.08s147.25 125 147.25 279.12M1050 308.2c0 138.12-23.19 250.08-51.79 250.08s-51.79-112-51.79-250.08 23.19-250.08 51.8-250.08S1050 170.09 1050 308.2M1862.77 37.4l.82-.18v-6.35h-167.48l-155.51 365.5-155.51-365.5h-180.48v6.35l.81.18c30.57 6.9 46.09 17.19 46.09 54.3v434.45c0 37.11-15.58 47.4-46.15 54.3l-.81.18V587H1327v-6.35l-.81-.18c-30.57-6.9-46.09-17.19-46.09-54.3V116.9L1479.87 587h11.33l205.59-483.21V536.9c-2.62 29.31-18 38.36-45.68 44.61l-.82.19v6.3h213.3v-6.3l-.82-.19c-27.71-6.25-43.46-15.3-46.08-44.61l-.14-445.2h.14c0-37.11 15.52-47.4 46.08-54.3m97.43 287.8c3.49-78.06 31.52-134.4 78.56-135.37 14.51.24 26.68 5 36.14 14.16 20.1 19.51 29.55 60.28 28.09 121.21zm-2.11 22h250v-1.05c-.71-59.69-18-106.12-51.34-138-28.82-27.55-71.49-42.71-116.31-42.71h-1c-23.26 0-51.79 5.64-72.09 15.86-23.11 10.7-43.49 26.7-60.45 47.7-27.3 33.83-43.84 79.55-47.86 130.93-.13 1.54-.24 3.08-.35 4.62s-.18 2.92-.25 4.39a332.64 332.64 0 0 0-.36 21.69C1860.79 507 1923.65 600 2035.3 600c98 0 155.07-71.64 169.3-167.8l-7.19-2.53c-25 51.68-69.9 83-121 79.18-69.76-5.22-123.2-75.95-118.35-161.63m532.69 157.68c-8.2 19.45-25.31 30.15-48.24 30.15s-43.89-15.74-58.78-44.34c-16-30.7-24.42-74.1-24.42-125.51 0-107 33.28-176.21 84.79-176.21 21.57 0 38.55 10.7 46.65 29.37zm165.84 76.28c-30.57-7.23-46.09-18-46.09-57V5.28L2424.77 60v6.7l1.14-.09c25.62-2.07 43 1.47 53.09 10.79 7.9 7.3 11.75 18.5 11.75 34.26v71.14c-18.31-11.69-40.09-17.38-66.52-17.38-53.6 0-102.59 22.57-137.92 63.56-36.83 42.72-56.3 101.1-56.3 168.81C2230 518.72 2289.53 600 2378.13 600c51.83 0 93.53-28.4 112.62-76.3V588h166.65v-6.66zm159.29-505.33c0-37.76-28.47-66.24-66.24-66.24-37.59 0-67 29.1-67 66.24s29.44 66.24 67 66.24c37.77 0 66.24-28.48 66.24-66.24m43.84 505.33c-30.57-7.23-46.09-18-46.09-57h-.13V166.65l-166.66 47.85v6.5l1 .09c36.06 3.21 45.93 15.63 45.93 57.77V588h166.8v-6.66zm427.05 0c-30.57-7.23-46.09-18-46.09-57V166.65L3082 212.92v6.52l.94.1c29.48 3.1 38 16.23 38 58.56v226c-9.83 19.45-28.27 31-50.61 31.78-36.23 0-56.18-24.47-56.18-68.9V166.66l-166.66 47.85V221l1 .09c36.06 3.2 45.94 15.62 45.94 57.77v191.27a214.48 214.48 0 0 0 3.47 39.82l3 13.05c14.11 50.56 51.08 77 109 77 49.06 0 92.06-30.37 111-77.89v66h166.66v-6.66zM3934.2 588v-6.67l-.81-.19c-33.17-7.65-46.09-22.07-46.09-51.43v-243.2c0-75.83-42.59-121.09-113.93-121.09-52 0-95.85 30.05-112.73 76.86-13.41-49.6-52-76.86-109.06-76.86-50.12 0-89.4 26.45-106.25 71.13v-69.87l-166.66 45.89v6.54l1 .09c35.63 3.16 45.93 15.94 45.93 57V588h155.5v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66V255.72c7-16.35 21.11-35.72 49-35.72 34.64 0 52.2 24 52.2 71.28V588h155.54v-6.66l-.82-.2c-26.46-6.22-35-17.56-35-46.66v-248a160.45 160.45 0 0 0-2.2-27.68c7.42-17.77 22.34-38.8 51.37-38.8 35.13 0 52.2 23.31 52.2 71.28V588z">`{=html}`</path>`{=html}`</svg>`{=html}`</a>`{=html}`<div class="aw h">`{=html}`<div class="ab ax ay az ba q bb bc">`{=html}`<div class="bl" aria-hidden="false" aria-describedby="searchResults" aria-labelledby="searchResults">`{=html}`</div>`{=html}`<div class="bm bn ab">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" fill="none">`{=html}`<path fill-rule="evenodd" clip-rule="evenodd" d="M4.1 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0zm6.94-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .8-.79l-3.74-3.73A8.05 8.05 0 0 0 11.04 3v.01z" fill="currentColor">`{=html}`</path>`{=html}`</svg>`{=html}`</div>`{=html}`<input role="combobox" aria-controls="searchResults" aria-expanded="false" aria-label="search" data-testid="headerSearchInput" tabindex="0" class="ax bd be bf z bg bh bi bj bk" placeholder="Search" value=""/>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="h k w ff fg">`{=html}`<div class="fh ab">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerWriteButton" rel="noopener follow" href="/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fnew-story&amp;source=---two_column_layout_nav-----------------------new_post_topnav-----------">`{=html}`<div class="be b bf z dt fi fj ab q fk fl">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-label="Write">`{=html}`<path d="M14 4a.5.5 0 0 0 0-1v1zm7 6a.5.5 0 0 0-1 0h1zm-7-7H4v1h10V3zM3 4v16h1V4H3zm1 17h16v-1H4v1zm17-1V10h-1v10h1zm-1 1a1 1 0 0 0 1-1h-1v1zM3 20a1 1 0 0 0 1 1v-1H3zM4 3a1 1 0 0 0-1 1h1V3z" fill="currentColor">`{=html}`</path>`{=html}`<path d="M17.5 4.5l-8.46 8.46a.25.25 0 0 0-.06.1l-.82 2.47c-.07.2.12.38.31.31l2.47-.82a.25.25 0 0 0 .1-.06L19.5 6.5m-2-2l2.32-2.32c.1-.1.26-.1.36 0l1.64 1.64c.1.1.1.26 0 .36L19.5 6.5m-2-2l2 2" stroke="currentColor">`{=html}`</path>`{=html}`</svg>`{=html}`<div class="ds l">`{=html}Write`</div>`{=html}`</div>`{=html}`</a>`{=html}`</span>`{=html}`</div>`{=html}`</div>`{=html}`<div class="k j i d">`{=html}`<div class="fh ab">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSearchButton" rel="noopener follow" href="/search?source=---two_column_layout_nav----------------------------------">`{=html}`<div class="be b bf z dt fi fj ab q fk fl">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" fill="none" aria-label="Search">`{=html}`<path fill-rule="evenodd" clip-rule="evenodd" d="M4.1 11.06a6.95 6.95 0 1 1 13.9 0 6.95 6.95 0 0 1-13.9 0zm6.94-8.05a8.05 8.05 0 1 0 5.13 14.26l3.75 3.75a.56.56 0 1 0 .8-.79l-3.74-3.73A8.05 8.05 0 0 0 11.04 3v.01z" fill="currentColor">`{=html}`</path>`{=html}`</svg>`{=html}`</div>`{=html}`</a>`{=html}`</div>`{=html}`</div>`{=html}`<div class="fh h k j">`{=html}`<div class="ab q">`{=html}`<p class="be b dw dx dy dz ea eb ec ed ee ef dt">`{=html}`<span>`{=html}`<button class="be b dw dx eg dy dz eh ea eb ei ej ed ek el ef em eo ep eq er es et eu ev ew ex ey ez fa fb fc bl fd fe" data-testid="headerSignUpButton">`{=html}Sign
up`</button>`{=html}`</span>`{=html}`</p>`{=html}`<div class="aw l">`{=html}`<p class="be b dw dx dy dz ea eb ec ed ee ef dt">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerSignInButton" rel="noopener follow" href="/m/signin?operation=login&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;source=post_page---two_column_layout_nav-----------------------global_nav-----------">`{=html}Sign
in`</a>`{=html}`</span>`{=html}`</p>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="l" aria-hidden="false">`{=html}`<button class="ax fm am ab q ao fn fo fp" aria-label="user options menu" data-testid="headerUserIcon">`{=html}`<div class="l fi">`{=html}`<img alt="" class="l fc bx by bz cw" src="https://miro.medium.com/v2/resize:fill:64:64/1*dmbNkD5D-u45r44go_cf0g.png" width="32" height="32" loading="lazy" role="presentation"/>`{=html}`<div class="fq bx l by bz fr n ax fs">`{=html}`</div>`{=html}`</div>`{=html}`</button>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="l">`{=html}`<div class="ft fu fv fw fx l">`{=html}`<div class="ab ca">`{=html}`<div class="ch bg fy fz ga gb">`{=html}`</div>`{=html}`</div>`{=html}`<article>`{=html}`<div class="l">`{=html}`<div class="l">`{=html}`<span class="l">`{=html}`</span>`{=html}`<section>`{=html}`<div>`{=html}`<div class="fr gh gi gj gk gl">`{=html}`</div>`{=html}`<div class="gm gn go gp gq">`{=html}`<div class="ab ca">`{=html}`<div class="ch bg fy fz ga gb">`{=html}`<div>`{=html}`<h1 id="a7f5" class="pw-post-title gr gs gt be gu gv gw gx gy gz ha hb hc hd he hf hg hh hi hj hk hl hm hn ho hp hq hr hs ht bj" data-testid="storyTitle">`{=html}3D
Data Visualization with React and
Three.js`</h1>`{=html}`<div class="hu hv hw hx hy">`{=html}`<div class="speechify-ignore ab co">`{=html}`<div class="speechify-ignore bg l">`{=html}`<div class="hz ia ib ic id ab">`{=html}`<div>`{=html}`<div class="ab ie">`{=html}`<a rel="noopener follow" href="/@pbesh?source=post_page-----7272fb6de432--------------------------------">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<div class="l if ig bx ih ii">`{=html}`<div class="l fi">`{=html}`<img alt="Peter Beshai" class="l fc bx dc dd cw" src="https://miro.medium.com/v2/resize:fill:88:88/1*S58noheRzWOAjDomF-9jmA.jpeg" width="44" height="44" loading="lazy" data-testid="authorPhoto"/>`{=html}`<div class="ij bx l dc dd fr n ik fs">`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</a>`{=html}`<a href="https://medium.com/cortico?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<div class="il ab fi">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<div class="l im in bx ih io">`{=html}`<div class="l fi">`{=html}`<img alt="Cortico" class="l fc bx bq ip cw" src="https://miro.medium.com/v2/resize:fill:48:48/1*gslGVpbqijjDxcDqK5AYpw.jpeg" width="24" height="24" loading="lazy" data-testid="publicationPhoto"/>`{=html}`<div class="ij bx l bq ip fr n ik fs">`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</a>`{=html}`</div>`{=html}`</div>`{=html}`<div class="bm bg l">`{=html}`<div class="ab">`{=html}`<div style="flex:1">`{=html}`<span class="be b bf z bj">`{=html}`<div class="iq ab q">`{=html}`<div class="ab q ir">`{=html}`<div class="ab q">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<p class="be b is it bj">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar iu" data-testid="authorName" rel="noopener follow" href="/@pbesh?source=post_page-----7272fb6de432--------------------------------">`{=html}Peter
Beshai`</a>`{=html}`</p>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<span class="iv iw" aria-hidden="true">`{=html}`<span class="be b bf z dt">`{=html}·`</span>`{=html}`</span>`{=html}`<p class="be b is it dt">`{=html}`<span>`{=html}`<a class="ix iy ah ai aj ak al am an ao ap aq ar ew iz ja" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fsubscribe%2Fuser%2F94b947609777&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;user=Peter+Beshai&amp;userId=94b947609777&amp;source=post_page-94b947609777----7272fb6de432---------------------post_header-----------">`{=html}Follow`</a>`{=html}`</span>`{=html}`</p>`{=html}`</div>`{=html}`</div>`{=html}`</span>`{=html}`</div>`{=html}`</div>`{=html}`<div class="l jb">`{=html}`<span class="be b bf z dt">`{=html}`<div class="ab cm jc jd je">`{=html}`<div class="jf jg ab">`{=html}`<div class="be b bf z dt ab jh">`{=html}`<span class="ji l jb">`{=html}Published
in`</span>`{=html}`<div>`{=html}`<div class="l" aria-hidden="false">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar iu ab q" data-testid="publicationName" href="https://medium.com/cortico?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<p class="be b bf z jj jk jl jm jn jo jp jq bj">`{=html}Cortico`</p>`{=html}`</a>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="h k">`{=html}`<span class="iv iw" aria-hidden="true">`{=html}`<span class="be b bf z dt">`{=html}·`</span>`{=html}`</span>`{=html}`</div>`{=html}`</div>`{=html}`<span class="be b bf z dt">`{=html}`<div class="ab ae">`{=html}`<span data-testid="storyReadTime">`{=html}24
min
read`</span>`{=html}`<div class="jr js l" aria-hidden="true">`{=html}`<span class="l" aria-hidden="true">`{=html}`<span class="be b bf z dt">`{=html}·`</span>`{=html}`</span>`{=html}`</div>`{=html}`<span data-testid="storyPublishDate">`{=html}Jan
31,
2020`</span>`{=html}`</div>`{=html}`</span>`{=html}`</div>`{=html}`</span>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="ab co jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki">`{=html}`<div class="h k w ff fg q">`{=html}`<div class="ky l">`{=html}`<div class="ab q kz la">`{=html}`<div class="pw-multi-vote-icon fi ji lb lc ld">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fcortico%2F7272fb6de432&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;user=Peter+Beshai&amp;userId=94b947609777&amp;source=-----7272fb6de432---------------------clap_footer-----------">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<div class="le ao lf lg lh li am lj lk ll ld">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap">`{=html}`<path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z">`{=html}`</path>`{=html}`</svg>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</a>`{=html}`</span>`{=html}`</div>`{=html}`<div class="pw-multi-vote-count l lm ln lo lp lq lr ls">`{=html}`<p class="be b du z dt">`{=html}`<span class="lt">`{=html}\--`</span>`{=html}`</p>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<button class="ao le lw lx ab q fj ly lz" aria-label="responses">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" class="lv">`{=html}`<path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z">`{=html}`</path>`{=html}`</svg>`{=html}`<p class="be b du z dt">`{=html}`<span class="pw-responses-count lu lv">`{=html}2`</span>`{=html}`</p>`{=html}`</button>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="ab q kj kk kl km kn ko kp kq kr ks kt ku kv kw kx">`{=html}`<div class="ma k j i d">`{=html}`</div>`{=html}`<div class="h k">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="headerBookmarkButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7272fb6de432&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;source=-----7272fb6de432---------------------bookmark_footer-----------">`{=html}`<svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt mb" aria-label="Add to list bookmark button">`{=html}`<path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor">`{=html}`</path>`{=html}`</svg>`{=html}`</a>`{=html}`</span>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="fc mc cm">`{=html}`<div class="l ae">`{=html}`<div class="ab ca">`{=html}`<div class="md me mf mg mh mi ch bg">`{=html}`<div class="ab">`{=html}`<div class="bl bg" aria-hidden="false">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<button aria-label="Listen" data-testid="audioPlayButton" class="af fj ah ai aj ak al mj an ao ap ew mk ml lz mm mn mo mp mq s mr ms mt mu mv mw mx u my mz na">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" fill="none">`{=html}`<path fill-rule="evenodd" clip-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0zm9-10a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm3.38 10.42l-4.6 3.06a.5.5 0 0 1-.78-.41V8.93c0-.4.45-.63.78-.41l4.6 3.06c.3.2.3.64 0 .84z" fill="currentColor">`{=html}`</path>`{=html}`</svg>`{=html}`<div class="j i d">`{=html}`<p class="be b bf z dt">`{=html}Listen`</p>`{=html}`</div>`{=html}`</button>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="bl" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af fj ah ai aj ak al mj an ao ap ew mk ml lz mm mn mo mp mq s mr ms mt mu mv mw mx u my mz na">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" fill="none">`{=html}`<path fill-rule="evenodd" clip-rule="evenodd" d="M15.22 4.93a.42.42 0 0 1-.12.13h.01a.45.45 0 0 1-.29.08.52.52 0 0 1-.3-.13L12.5 3v7.07a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V3.02l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.8a.42.42 0 0 1 .07.5zm-.1.14zm.88 2h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11a2 2 0 0 1-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.14c.1.1.15.22.15.35a.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9V8.96c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1z" fill="currentColor">`{=html}`</path>`{=html}`</svg>`{=html}`<div class="j i d">`{=html}`<p class="be b bf z dt">`{=html}Share`</p>`{=html}`</div>`{=html}`</button>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="nb bg">`{=html}`<figure class="nc nd ne nf ng nb bg paragraph-image">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*vWLlwO3cFbWse25p1y6E9Q.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*vWLlwO3cFbWse25p1y6E9Q.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*vWLlwO3cFbWse25p1y6E9Q.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*vWLlwO3cFbWse25p1y6E9Q.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*vWLlwO3cFbWse25p1y6E9Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*vWLlwO3cFbWse25p1y6E9Q.png 1100w, https://miro.medium.com/v2/resize:fit:4800/format:webp/1*vWLlwO3cFbWse25p1y6E9Q.png 4800w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 100vw" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*vWLlwO3cFbWse25p1y6E9Q.png 640w, https://miro.medium.com/v2/resize:fit:720/1*vWLlwO3cFbWse25p1y6E9Q.png 720w, https://miro.medium.com/v2/resize:fit:750/1*vWLlwO3cFbWse25p1y6E9Q.png 750w, https://miro.medium.com/v2/resize:fit:786/1*vWLlwO3cFbWse25p1y6E9Q.png 786w, https://miro.medium.com/v2/resize:fit:828/1*vWLlwO3cFbWse25p1y6E9Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*vWLlwO3cFbWse25p1y6E9Q.png 1100w, https://miro.medium.com/v2/resize:fit:4800/1*vWLlwO3cFbWse25p1y6E9Q.png 4800w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 100vw"/>`{=html}`<img alt="" class="bg mi nh c" width="2400" height="1230" loading="eager" role="presentation"/>`{=html}`</picture>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Screenshot
of what we're gonna
make`</figcaption>`{=html}`</figure>`{=html}`</div>`{=html}`<div class="ab ca">`{=html}`<div class="ch bg fy fz ga gb">`{=html}`<p id="9b01" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}At
the end of 2019, we had a hack week at
`<a class="af om" href="https://cortico.ai" rel="noopener ugc nofollow" target="_blank">`{=html}Cortico`</a>`{=html}
where all of the technical staff got together to explore new ideas
without any requirements or limitations. I ended up in a small team with
NLP expert
`<a class="af om" href="https://www.dougb.com/" rel="noopener ugc nofollow" target="_blank">`{=html}Doug
Beeferman`</a>`{=html} and one of our technical fellows, Aneesh Naik.
They were going to experiment with new approaches of analyzing our
`<a class="af om" href="https://lvn.org" rel="noopener ugc nofollow" target="_blank">`{=html}Local
Voices Network`</a>`{=html} conversation data, including applying
`<a class="af om" href="https://ai.googleblog.com/2018/11/open-sourcing-bert-state-of-art-pre.html" rel="noopener ugc nofollow" target="_blank">`{=html}BERT`</a>`{=html}
for semantic clustering and using
`<a class="af om" href="https://deepmoji.mit.edu/" rel="noopener ugc nofollow" target="_blank">`{=html}DeepMoji`</a>`{=html}
to try and explore emotional content. My role was to build a fun UI to
explore the data, which is what we'll explore
today.`</p>`{=html}`<p id="5ccc" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Here's
what I ended up
making:`</p>`{=html}`<figure class="on oo op oq or nb">`{=html}`<div class="os jj l fi">`{=html}`<div class="ot ou l">`{=html}`</div>`{=html}`</div>`{=html}`</figure>`{=html}`<p id="7710" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}In
this post, I'll go over how to create something similar to what I did
using
`<a class="af om" href="https://reactjs.org/" rel="noopener ugc nofollow" target="_blank">`{=html}React`</a>`{=html},
`<a class="af om" href="https://threejs.org/" rel="noopener ugc nofollow" target="_blank">`{=html}Three.js`</a>`{=html},
and
`<a class="af om" href="https://github.com/react-spring/react-three-fiber" rel="noopener ugc nofollow" target="_blank">`{=html}react-three-fiber`</a>`{=html}
as the magical library connecting the
two.`</p>`{=html}`<h2 id="70a5" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Table
of
Contents`</h2>`{=html}`<ul class="">`{=html}`<li id="39e5" class="no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="#2a39" rel="noopener ugc nofollow">`{=html}Step
1 --- Getting Started`</a>`{=html}
(`<a class="af om" href="https://codesandbox.io/s/r3f-demo-1-ljh5l" rel="noopener ugc nofollow" target="_blank">`{=html}CodeSandbox`</a>`{=html})`</li>`{=html}`<li id="ab5a" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="#30e9" rel="noopener ugc nofollow">`{=html}Step
2 --- Rendering the Data Points`</a>`{=html}
(`<a class="af om" href="https://codesandbox.io/s/r3f-demo-2-prj0b" rel="noopener ugc nofollow" target="_blank">`{=html}CodeSandbox`</a>`{=html})`</li>`{=html}`<li id="c288" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="#40d9" rel="noopener ugc nofollow">`{=html}Step
3 --- Using InstancedMesh for 100,000 points`</a>`{=html}
(`<a class="af om" href="https://codesandbox.io/s/r3f-demo-3-es4ru" rel="noopener ugc nofollow" target="_blank">`{=html}CodeSandbox`</a>`{=html})`</li>`{=html}`<li id="4dd9" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="#40c2" rel="noopener ugc nofollow">`{=html}Step
4 --- Computing Different Layouts`</a>`{=html}
(`<a class="af om" href="https://codesandbox.io/s/r3f-demo-4-fhemj" rel="noopener ugc nofollow" target="_blank">`{=html}CodeSandbox`</a>`{=html})`</li>`{=html}`<li id="3092" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="#08e9" rel="noopener ugc nofollow">`{=html}Step
5 --- Animating Positions`</a>`{=html}
(`<a class="af om" href="https://codesandbox.io/s/r3f-demo-5-prgpk" rel="noopener ugc nofollow" target="_blank">`{=html}CodeSandbox`</a>`{=html})`</li>`{=html}`<li id="1f7d" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="#820b" rel="noopener ugc nofollow">`{=html}Step
6 --- Adding Interactivity: Selecting a Point`</a>`{=html}
(`<a class="af om" href="https://codesandbox.io/s/r3f-demo-6-ffrme" rel="noopener ugc nofollow" target="_blank">`{=html}CodeSandbox`</a>`{=html})`</li>`{=html}`<li id="4602" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="#70f7" rel="noopener ugc nofollow">`{=html}Step
7 --- Bloom: Adding a Glow Effect`</a>`{=html}
(`<a class="af om" href="https://codesandbox.io/s/r3f-demo-7-bxx97" rel="noopener ugc nofollow" target="_blank">`{=html}CodeSandbox`</a>`{=html})`</li>`{=html}`<li id="5d27" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="#5f1e" rel="noopener ugc nofollow">`{=html}Step
8 --- Finishing Touch: Resetting the Camera`</a>`{=html}
(`<a class="af om" href="https://codesandbox.io/s/r3f-demo-8-y5nrg" rel="noopener ugc nofollow" target="_blank">`{=html}CodeSandbox`</a>`{=html})`</li>`{=html}`<li id="11f7" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="#fb73" rel="noopener ugc nofollow">`{=html}Please
Say This is The
End`</a>`{=html}`</li>`{=html}`</ul>`{=html}`<h2 id="c069" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Quick
Links`</h2>`{=html}`<ul class="">`{=html}`<li id="0c7a" class="no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="https://github.com/CorticoAI/3d-react-demo" rel="noopener ugc nofollow" target="_blank">`{=html}`<strong class="nq gu">`{=html}Final
Source Code on
GitHub`</strong>`{=html}`</a>`{=html}`</li>`{=html}`<li id="14e7" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="https://corticoai.github.io/3d-react-demo/" rel="noopener ugc nofollow" target="_blank">`{=html}`<strong class="nq gu">`{=html}Final
Demo`</strong>`{=html}`</a>`{=html}`</li>`{=html}`<li id="360c" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-7-y5nrg?fontsize=14&amp;hidenavigation=1&amp;theme=dark" rel="noopener ugc nofollow" target="_blank">`{=html}Final
CodeSandbox`</a>`{=html}`</li>`{=html}`</ul>`{=html}`<h1 id="2a39" class="qb ow gt be ox qc qd qe pa qf qg qh pd qi qj qk ql qm qn qo qp qq qr qs qt qu bj">`{=html}Step
1 --- Getting
Started`</h1>`{=html}`<p id="7290" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}`<em class="qv">`{=html}(`</em>`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-1-ljh5l" rel="noopener ugc nofollow" target="_blank">`{=html}`<em class="qv">`{=html}CodeSandbox
for this
step`</em>`{=html}`</a>`{=html}`<em class="qv">`{=html})`</em>`{=html}`</p>`{=html}`<p id="d56f" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}There's
nothing special you have to do to get started that you wouldn't do for
any other React project. For me, that means using
`<a class="af om" href="https://reactjs.org/docs/create-a-new-react-app.html#create-react-app" rel="noopener ugc nofollow" target="_blank">`{=html}create-react-app`</a>`{=html}.`</p>`{=html}`<pre class="on oo op oq or qw qx qy qz ax ra bj">`{=html}`<span id="dc6e" class="ov ow gt qx b is rb rc l jh rd">`{=html}\$
npx create-react-app r3f-demo`<br/>`{=html}\$ cd
r3f-demo`<br/>`{=html}\$ npm install \--save react-three-fiber
three`</span>`{=html}`</pre>`{=html}`<p id="2da0" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}The
first thing to do is draw a simple cylinder with some lights and a
trackball controller to move the camera around. This will get all the
basic scaffolding we need to start playing with Three.js in
React-land.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl re">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*SaDhHnyThhl1HoJtc82Q-A.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*SaDhHnyThhl1HoJtc82Q-A.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*SaDhHnyThhl1HoJtc82Q-A.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*SaDhHnyThhl1HoJtc82Q-A.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*SaDhHnyThhl1HoJtc82Q-A.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*SaDhHnyThhl1HoJtc82Q-A.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SaDhHnyThhl1HoJtc82Q-A.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*SaDhHnyThhl1HoJtc82Q-A.png 640w, https://miro.medium.com/v2/resize:fit:720/1*SaDhHnyThhl1HoJtc82Q-A.png 720w, https://miro.medium.com/v2/resize:fit:750/1*SaDhHnyThhl1HoJtc82Q-A.png 750w, https://miro.medium.com/v2/resize:fit:786/1*SaDhHnyThhl1HoJtc82Q-A.png 786w, https://miro.medium.com/v2/resize:fit:828/1*SaDhHnyThhl1HoJtc82Q-A.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*SaDhHnyThhl1HoJtc82Q-A.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*SaDhHnyThhl1HoJtc82Q-A.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="470" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}End
result of initial
setup`</figcaption>`{=html}`</figure>`{=html}`<p id="fe5a" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Just
like any other React app, we're going to be making components to do
this. Let's start with
two:`</p>`{=html}`<ul class="">`{=html}`<li id="56ae" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}`<strong class="nq gu">`{=html}ThreePointVis
`</strong>`{=html}--- The root 3D component with the
`<strong class="nq gu">`{=html}Canvas`</strong>`{=html}`</li>`{=html}`<li id="19a5" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<strong class="nq gu">`{=html}Controls`</strong>`{=html}
--- The component that allows us to control the camera with the mouse or
trackpad`</li>`{=html}`</ul>`{=html}`<p id="4a09" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}First,
we'll update `<strong class="nq gu">`{=html}App`</strong>`{=html} to
include our new
`<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}
component.`</p>`{=html}`<p id="0c34" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}`<em class="qv">`{=html}Note:
I'll be using screenshots of code here but will include CodeSandboxes
along the way with full working code at each
step.`</em>`{=html}`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rj">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*e6L8GXP6qc2_bWnIv8xLnw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*e6L8GXP6qc2_bWnIv8xLnw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*e6L8GXP6qc2_bWnIv8xLnw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*e6L8GXP6qc2_bWnIv8xLnw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*e6L8GXP6qc2_bWnIv8xLnw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*e6L8GXP6qc2_bWnIv8xLnw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e6L8GXP6qc2_bWnIv8xLnw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*e6L8GXP6qc2_bWnIv8xLnw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*e6L8GXP6qc2_bWnIv8xLnw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*e6L8GXP6qc2_bWnIv8xLnw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*e6L8GXP6qc2_bWnIv8xLnw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*e6L8GXP6qc2_bWnIv8xLnw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*e6L8GXP6qc2_bWnIv8xLnw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*e6L8GXP6qc2_bWnIv8xLnw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="394" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for
App.js`</figcaption>`{=html}`</figure>`{=html}`<p id="fc45" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Our
initial `<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}
will render a cylinder and some lights while also including
`<strong class="nq gu">`{=html}Controls`</strong>`{=html} to enable us
to move the camera
around.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rk">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*4XYOdJXJ2ALcOEVmbCqgDA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*4XYOdJXJ2ALcOEVmbCqgDA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*4XYOdJXJ2ALcOEVmbCqgDA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*4XYOdJXJ2ALcOEVmbCqgDA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*4XYOdJXJ2ALcOEVmbCqgDA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*4XYOdJXJ2ALcOEVmbCqgDA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4XYOdJXJ2ALcOEVmbCqgDA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*4XYOdJXJ2ALcOEVmbCqgDA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*4XYOdJXJ2ALcOEVmbCqgDA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*4XYOdJXJ2ALcOEVmbCqgDA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*4XYOdJXJ2ALcOEVmbCqgDA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*4XYOdJXJ2ALcOEVmbCqgDA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*4XYOdJXJ2ALcOEVmbCqgDA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*4XYOdJXJ2ALcOEVmbCqgDA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="483" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for
ThreePointVis.js`</figcaption>`{=html}`</figure>`{=html}`<p id="aa93" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Let's
break down what we're seeing here before moving on to
`<strong class="nq gu">`{=html}Controls`</strong>`{=html}.`</p>`{=html}`<p id="4ee0" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}First,
we have a `<strong class="nq gu">`{=html}Canvas`</strong>`{=html}
component which is the base component we need to use react-three-fiber.
It takes a few props but we'll only specify the camera here to keep it
simple. You'll note that since we're in 3D, all positions will take a
three dimensional tuple: `<code class="cw rl rm rn qx b">`{=html}\[x, y,
z\]`</code>`{=html} (ooOOooOoo
`<strong class="nq gu">`{=html}`<em class="qv">`{=html}z`</em>`{=html}`</strong>`{=html},`<em class="qv">`{=html}
fancy`</em>`{=html}), so to place the camera away from our cylinder, we
can place it at (0, 0, 5) or 5 "units" away from the origin on the
`<em class="qv">`{=html}Z`</em>`{=html} axis. These units don't
correspond to pixels or other standard units of measure, they just
specify a position in the arbitrary coordinate space we'll be building
our vis in. The middle of the screen, by default, is at (0, 0,
0).`</p>`{=html}`<p id="0602" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Next,
we add a few lights with simple props specifying their colors and how
bright they are. You can read about
`<a class="af om" href="https://threejs.org/docs/index.html#api/en/lights/AmbientLight" rel="noopener ugc nofollow" target="_blank">`{=html}AmbientLight`</a>`{=html}
and
`<a class="af om" href="https://threejs.org/docs/index.html#api/en/lights/HemisphereLight" rel="noopener ugc nofollow" target="_blank">`{=html}HemisphereLight`</a>`{=html}
in the Three documentation. Be careful to note that the initial letter
in these tags is
`<strong class="nq gu">`{=html}lowercase`</strong>`{=html}:
\<`<strong class="nq gu">`{=html}h`</strong>`{=html}emisphereLight\> not
\<HemisphereLight\>--- they won't work otherwise (and same for all Three
components when using react-three-fiber). In the world of 3D, we need
lights or we won't be able to see anything, so don't forget
them!`</p>`{=html}`<p id="a98c" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Finally
we create a cylinder object in our scene through the use of a \<mesh\>
containing a geometry and a material. You'll see that we apply
positional transformations at the \<mesh\> level, not to the geometry
itself, something I always mix up. As with the lights, you can find
details about all available parameters in the Three docs:
`<a class="af om" href="https://threejs.org/docs/index.html#api/en/objects/Mesh" rel="noopener ugc nofollow" target="_blank">`{=html}Mesh`</a>`{=html},
`<a class="af om" href="https://threejs.org/docs/index.html#api/en/geometries/CylinderBufferGeometry" rel="noopener ugc nofollow" target="_blank">`{=html}CylinderBufferGeometry`</a>`{=html},
`<a class="af om" href="https://threejs.org/docs/index.html#api/en/materials/MeshStandardMaterial" rel="noopener ugc nofollow" target="_blank">`{=html}MeshStandardMaterial`</a>`{=html}.
I'll point out two important
parts:`</p>`{=html}`<ul class="">`{=html}`<li id="7d2d" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}The
`<strong class="nq gu">`{=html}args`</strong>`{=html} prop corresponds
to what is provided to the constructor of these objects. For
`<strong class="nq gu">`{=html}CylinderBufferGeometry`</strong>`{=html},
this means we are specifying
`<strong class="nq gu">`{=html}radiusTop`</strong>`{=html} (0.5),
`<strong class="nq gu">`{=html}radiusBottom`</strong>`{=html} (0.5),
`<strong class="nq gu">`{=html}height`</strong>`{=html} (0.15), and
`<strong class="nq gu">`{=html}radialSegments`</strong>`{=html}
(32).`</li>`{=html}`<li id="e62c" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}The
`<strong class="nq gu">`{=html}attach `</strong>`{=html}prop specifies
how these children components should be connected to their parent (the
mesh in this case). See the
`<a class="af om" href="https://github.com/react-spring/react-three-fiber#shortcuts-and-non-object3d-stow-away" rel="noopener ugc nofollow" target="_blank">`{=html}react-three-fiber`</a>`{=html}
docs for more
info.`</li>`{=html}`</ul>`{=html}`<p id="1de8" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Lastly,
we add `<strong class="nq gu">`{=html}Controls`</strong>`{=html} to get
some mouse control of the visualization. Most commonly this is
`<a class="af om" href="https://threejs.org/docs/index.html#examples/en/controls/OrbitControls" rel="noopener ugc nofollow" target="_blank">`{=html}OrbitControls`</a>`{=html},
but here I've opted for
`<a class="af om" href="https://threejs.org/docs/index.html#examples/en/controls/TrackballControls" rel="noopener ugc nofollow" target="_blank">`{=html}TrackballControls`</a>`{=html},
which I liked better for this UI after trying both. (For an example of a
similar data vis using
`<strong class="nq gu">`{=html}OrbitControls`</strong>`{=html} see my
`<a class="af om" href="http://nba3d.peterbeshai.com/" rel="noopener ugc nofollow" target="_blank">`{=html}NBA
3D experimental
app`</a>`{=html}).`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl ro">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*NNH_eZedbnPdnaD5sO2DTg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*NNH_eZedbnPdnaD5sO2DTg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*NNH_eZedbnPdnaD5sO2DTg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*NNH_eZedbnPdnaD5sO2DTg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*NNH_eZedbnPdnaD5sO2DTg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*NNH_eZedbnPdnaD5sO2DTg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NNH_eZedbnPdnaD5sO2DTg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*NNH_eZedbnPdnaD5sO2DTg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*NNH_eZedbnPdnaD5sO2DTg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*NNH_eZedbnPdnaD5sO2DTg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*NNH_eZedbnPdnaD5sO2DTg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*NNH_eZedbnPdnaD5sO2DTg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*NNH_eZedbnPdnaD5sO2DTg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*NNH_eZedbnPdnaD5sO2DTg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="773" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for
Controls.js`</figcaption>`{=html}`</figure>`{=html}`<p id="f64b" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}A
couple things to note about this
code:`</p>`{=html}`<ul class="">`{=html}`<li id="775a" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}We
are using
`<strong class="nq gu">`{=html}TrackballControls`</strong>`{=html} which
lives in the `<strong class="nq gu">`{=html}examples`</strong>`{=html}
directory in Three, so we have to
`<code class="cw rl rm rn qx b">`{=html}extend()`</code>`{=html} Three
to include it for it to work with
react-three-fiber.`</li>`{=html}`<li id="93af" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}We
need to use the
`<code class="cw rl rm rn qx b">`{=html}useFrame()`</code>`{=html} hook
to have the camera update every frame based on the state of the
controls.`</li>`{=html}`<li id="0eaf" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}I've
overridden default behavior to have left-click pan instead of rotate
since I want it to act like a slippy map. Two finger drag or alt/option
drag will rotate on a
trackpad.`</li>`{=html}`<li id="c0c1" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}The
`<strong class="nq gu">`{=html}dynamicDampingFactor`</strong>`{=html}
gives the controls some momentum and makes it feel a bit more
natural.`</li>`{=html}`</ul>`{=html}`<p id="85fd" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}With
all these components set up, we have a little playground with a 3D
cylinder ready to build out. Let's check it
out!`</p>`{=html}`<figure class="on oo op oq or nb">`{=html}`<div class="os jj l fi">`{=html}`<div class="rp ou l">`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}CodeSandbox
demo of initial set
up`</figcaption>`{=html}`</figure>`{=html}`<h1 id="30e9" class="qb ow gt be ox qc qd qe pa qf qg qh pd qi qj qk ql qm qn qo qp qq qr qs qt qu bj">`{=html}Step
2 --- Rendering the Data
Points`</h1>`{=html}`<p id="06fc" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}`<em class="qv">`{=html}(`</em>`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-2-prj0b" rel="noopener ugc nofollow" target="_blank">`{=html}`<em class="qv">`{=html}CodeSandbox
for this
step`</em>`{=html}`</a>`{=html}`<em class="qv">`{=html})`</em>`{=html}`</p>`{=html}`<p id="f171" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Now
that we have the basic structure of our app in place, let's generate
some data and render it on screen. Our goal will be to have a little
cylinder for each data
point.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rq">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*E-cAYgG7Y3ki_ZsFJ57xvw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="414" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}End
result of step
2`</figcaption>`{=html}`</figure>`{=html}`<p id="1027" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}First,
we generate the data (or you could load your own!) and pass it as a prop
to our vis component. We'll start with 1000 data points, of the
form`</p>`{=html}`<pre class="on oo op oq or qw qx qy qz ax ra bj">`{=html}`<span id="a2ff" class="ov ow gt qx b is rb rc l jh rd">`{=html}\[{
id: 0 }, { id: 1 }, { id: 2 }, \..., { id: 999
}\]`</span>`{=html}`</pre>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rr">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="414" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for App.js with generated
data`</figcaption>`{=html}`</figure>`{=html}`<p id="dc90" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Nothing
too fancy there, just normal React things. Now, over in the
`<strong class="nq gu">`{=html}ThreePointVis
`</strong>`{=html}component, we need to render a cylinder for each
point, so we'll map over the
`<strong class="nq gu">`{=html}data`</strong>`{=html} prop and return a
mesh for each entry. We'll also move the camera back to
`<strong class="nq gu">`{=html}40`</strong>`{=html} on the Z-axis so we
can see the
data.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rs">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*UQK83GzPbO_440PNjhiTfA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*UQK83GzPbO_440PNjhiTfA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*UQK83GzPbO_440PNjhiTfA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*UQK83GzPbO_440PNjhiTfA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*UQK83GzPbO_440PNjhiTfA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*UQK83GzPbO_440PNjhiTfA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UQK83GzPbO_440PNjhiTfA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*UQK83GzPbO_440PNjhiTfA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*UQK83GzPbO_440PNjhiTfA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*UQK83GzPbO_440PNjhiTfA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*UQK83GzPbO_440PNjhiTfA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*UQK83GzPbO_440PNjhiTfA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*UQK83GzPbO_440PNjhiTfA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*UQK83GzPbO_440PNjhiTfA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="587" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for ThreePointVis.js with a mesh for each data
point`</figcaption>`{=html}`</figure>`{=html}`<p id="3fe5" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Here
we set an arbitrary number of items (30) to wrap at which makes a grid
of cylinders. Looks just like normal React, right? This is the beauty of
react-three-fiber at
work.`</p>`{=html}`<figure class="on oo op oq or nb">`{=html}`<div class="os jj l fi">`{=html}`<div class="rp ou l">`{=html}`</div>`{=html}`</div>`{=html}`</figure>`{=html}`<p id="cf81" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}This
is working pretty well here at 1000 data points, but what about 10,000
or 100,000? How far can we go? On my machine, 100k basically kills my
browser with this approach. But we're living in the wonderful world of
GPUs, so we should definitely be able to get up there, we'll just have
to modify our
approach.`</p>`{=html}`<p id="c7e6" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}To
get 100,000 points with high performance, we need to switch to using
`<a class="af om" href="https://threejs.org/docs/index.html#api/en/objects/InstancedMesh" rel="noopener ugc nofollow" target="_blank">`{=html}InstancedMesh`</a>`{=html}
instead of `<strong class="nq gu">`{=html}Mesh`</strong>`{=html}. Now as
with all things performance related, things will get a bit more complex
as we head down this path, but really in the end it's not too bad. Let's
see how it all shakes out
next.`</p>`{=html}`<h1 id="40d9" class="qb ow gt be ox qc qd qe pa qf qg qh pd qi qj qk ql qm qn qo qp qq qr qs qt qu bj">`{=html}Step
3 --- Using InstancedMesh for 100,000
points`</h1>`{=html}`<p id="704c" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}`<em class="qv">`{=html}(`</em>`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-3-es4ru" rel="noopener ugc nofollow" target="_blank">`{=html}`<em class="qv">`{=html}CodeSandbox
for this
step`</em>`{=html}`</a>`{=html}`<em class="qv">`{=html})`</em>`{=html}`</p>`{=html}`<p id="8d2e" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We
need more power! And it turns out we've had it inside us all
along.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rt">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*BrPhQA8Ds8jwNy7gh1e7Vw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="379" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}End
result of step
3`</figcaption>`{=html}`</figure>`{=html}`<p id="969e" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}The
main difference you need to know about
`<strong class="nq gu">`{=html}Mesh`</strong>`{=html} vs
`<strong class="nq gu">`{=html}InstancedMesh`</strong>`{=html} is that
with `<strong class="nq gu">`{=html}InstancedMesh`</strong>`{=html} we
have one big root object that contains a transformation matrix for each
instance (or data point in our case) that we want to render, whereas
with `<strong class="nq gu">`{=html}Mesh`</strong>`{=html} we have
individual objects each with their own matrices. Behind the scenes
`<strong class="nq gu">`{=html}InstancedMesh`</strong>`{=html} lets the
GPU be smarter about how it renders the geometry and as a result reduces
the number of (slow) draw calls we need to make to see our
scene.`</p>`{=html}`<p id="150a" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}So
instead of setting our positions and rotations directly on
`<strong class="nq gu">`{=html}Mesh`</strong>`{=html} objects, we need
to update matrices that represent these positions and rotations.
Luckily, Three provides a number of mechanisms that make this relatively
painless once you've got an example to
follow.`</p>`{=html}`<p id="0d78" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}The
first step is to tear out our familiar
`<code class="cw rl rm rn qx b">`{=html}{data.map(\...)}`</code>`{=html}
React code and replace our \<mesh\> with an
\<instancedMesh\>`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl ru">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*oisRozjTaPGSBgJDcjlg_Q.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*oisRozjTaPGSBgJDcjlg_Q.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*oisRozjTaPGSBgJDcjlg_Q.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*oisRozjTaPGSBgJDcjlg_Q.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*oisRozjTaPGSBgJDcjlg_Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*oisRozjTaPGSBgJDcjlg_Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oisRozjTaPGSBgJDcjlg_Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*oisRozjTaPGSBgJDcjlg_Q.png 640w, https://miro.medium.com/v2/resize:fit:720/1*oisRozjTaPGSBgJDcjlg_Q.png 720w, https://miro.medium.com/v2/resize:fit:750/1*oisRozjTaPGSBgJDcjlg_Q.png 750w, https://miro.medium.com/v2/resize:fit:786/1*oisRozjTaPGSBgJDcjlg_Q.png 786w, https://miro.medium.com/v2/resize:fit:828/1*oisRozjTaPGSBgJDcjlg_Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*oisRozjTaPGSBgJDcjlg_Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*oisRozjTaPGSBgJDcjlg_Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="228" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for converting \<mesh\> to
\<instancedMesh\>`</figcaption>`{=html}`</figure>`{=html}`<p id="1c42" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}At
this point, however, I prefer to extract the rendering of the points
into their own component before our
`<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html} component
gets too complex. Let's call it
`<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html}. We can
update `<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html} to
use it, just like any normal React
component:`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rj">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 640w, https://miro.medium.com/v2/resize:fit:720/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 720w, https://miro.medium.com/v2/resize:fit:750/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 750w, https://miro.medium.com/v2/resize:fit:786/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 786w, https://miro.medium.com/v2/resize:fit:828/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*Rrpd0PNj5Sl6r7B5XMJw_g.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="440" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for ThreePointVis.js swapping the {data.map()} with our
\<InstancedPoints /\>
component`</figcaption>`{=html}`</figure>`{=html}`<p id="b9e6" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Now,
let's see the complete
`<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html}
component`<strong class="nq gu">`{=html} `</strong>`{=html}and break it
down.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rv">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*0RZT7SgKyAQpPNlSsngtvw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*0RZT7SgKyAQpPNlSsngtvw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*0RZT7SgKyAQpPNlSsngtvw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*0RZT7SgKyAQpPNlSsngtvw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*0RZT7SgKyAQpPNlSsngtvw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*0RZT7SgKyAQpPNlSsngtvw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0RZT7SgKyAQpPNlSsngtvw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*0RZT7SgKyAQpPNlSsngtvw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*0RZT7SgKyAQpPNlSsngtvw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*0RZT7SgKyAQpPNlSsngtvw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*0RZT7SgKyAQpPNlSsngtvw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*0RZT7SgKyAQpPNlSsngtvw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*0RZT7SgKyAQpPNlSsngtvw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*0RZT7SgKyAQpPNlSsngtvw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="827" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for
InstancedPoints.js`</figcaption>`{=html}`</figure>`{=html}`<p id="e2e4" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Instead
of mapping over the data points, we tell the
`<strong class="nq gu">`{=html}InstancedMesh`</strong>`{=html} how many
instances there are (via the
`<strong class="nq gu">`{=html}args`</strong>`{=html} prop) then set the
individual positions and rotations for each instance in the
`<strong class="nq gu">`{=html}useEffect`</strong>`{=html} hook. When
the number of data points changes, we re-compute the layout for them (in
this case, re-using the 30 column layout from earlier). We make use of
`<strong class="nq gu">`{=html}scratchObject3D `</strong>`{=html}to do
the hard matrix math for us instead of setting prop
values.`</p>`{=html}`<p id="76ee" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}A
couple of things to
note:`</p>`{=html}`<ul class="">`{=html}`<li id="e4ab" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}You
`<strong class="nq gu">`{=html}must`</strong>`{=html} set the
`<strong class="nq gu">`{=html}needsUpdate`</strong>`{=html} flag to
true:
`<code class="cw rl rm rn qx b">`{=html}mesh.instancedMatrix.needsUpdate
= true`</code>`{=html} in order for your changes to be rendered on
screen.`</li>`{=html}`<li id="95b7" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}I
sneakily added a
`<strong class="nq gu">`{=html}frustumCulled`</strong>`{=html} prop to
`<strong class="nq gu">`{=html}InstancedMesh`</strong>`{=html}. Without
it, it seems Three will remove all instances from the screen when
`<code class="cw rl rm rn qx b">`{=html}\[0, 0, 0\]`</code>`{=html}
(more or less) is off the screen. There may be other smarter ways around
this, but this is what worked for
me.`</li>`{=html}`</ul>`{=html}`<p id="9083" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}With
that, we're all set up to use
`<strong class="nq gu">`{=html}InstancedMesh`</strong>`{=html}! Let's
see how it does at 100,000 points by updating our data generation in
App.js.`</p>`{=html}`<pre class="on oo op oq or qw qx qy qz ax ra bj">`{=html}`<span id="e3af" class="ov ow gt qx b is rb rc l jh rd">`{=html}const
data = new Array(100000).fill(0).map((d, id) =\> ({ id
}));`</span>`{=html}`</pre>`{=html}`<p id="fc94" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}`<em class="qv">`{=html}Note
it's laggy for me when nested in CodeSandbox but works fine when popped
out on its own. I'll use 10,000 for the sandboxes here, but try it out
on your
own!`</em>`{=html}`</p>`{=html}`<figure class="on oo op oq or nb">`{=html}`<div class="os jj l fi">`{=html}`<div class="rp ou l">`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}CodeSandbox
demo of Step 3 10,000
points`</figcaption>`{=html}`</figure>`{=html}`<p id="ed0e" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}All
right we can efficiently render a ton of points as fancy 3D meshes now,
so let's try putting them in different layouts beside the 30 column
layout we've been using thus
far.`</p>`{=html}`<h1 id="40c2" class="qb ow gt be ox qc qd qe pa qf qg qh pd qi qj qk ql qm qn qo qp qq qr qs qt qu bj">`{=html}Step
4 --- Computing Different
Layouts`</h1>`{=html}`<p id="8152" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}`<em class="qv">`{=html}(`</em>`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-4-fhemj" rel="noopener ugc nofollow" target="_blank">`{=html}`<em class="qv">`{=html}CodeSandbox
for this
step`</em>`{=html}`</a>`{=html}`<em class="qv">`{=html})`</em>`{=html}`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rw">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*FmHdMkZyf5sj237f90YF-g.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*FmHdMkZyf5sj237f90YF-g.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*FmHdMkZyf5sj237f90YF-g.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*FmHdMkZyf5sj237f90YF-g.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*FmHdMkZyf5sj237f90YF-g.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*FmHdMkZyf5sj237f90YF-g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FmHdMkZyf5sj237f90YF-g.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*FmHdMkZyf5sj237f90YF-g.png 640w, https://miro.medium.com/v2/resize:fit:720/1*FmHdMkZyf5sj237f90YF-g.png 720w, https://miro.medium.com/v2/resize:fit:750/1*FmHdMkZyf5sj237f90YF-g.png 750w, https://miro.medium.com/v2/resize:fit:786/1*FmHdMkZyf5sj237f90YF-g.png 786w, https://miro.medium.com/v2/resize:fit:828/1*FmHdMkZyf5sj237f90YF-g.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*FmHdMkZyf5sj237f90YF-g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*FmHdMkZyf5sj237f90YF-g.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="401" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}End
result of step 4: toggle-able
layouts`</figcaption>`{=html}`</figure>`{=html}`<p id="6cc4" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}In
this step, we're going to add support for rendering the points in two
different layouts: a square grid and an Archimedean spiral. Since you
may end up with a lot of different layouts, I find it convenient to put
the layout code into its own file:
`<strong class="nq gu">`{=html}layouts.js`</strong>`{=html}.`</p>`{=html}`<p id="3cf7" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We'll
borrow some practices from layouts used by
`<a class="af om" href="https://d3js.org/" rel="noopener ugc nofollow" target="_blank">`{=html}d3`</a>`{=html}
where the actual positions of each data point are stored on the data
itself. There are other ways, but this has worked well for me and is
efficient. This differs from how we have done it up until this point
where we just computed the (x, y, z) tuples for the instances right
where we updated the instance
matrices.`</p>`{=html}`<h2 id="d235" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Grid
Layout`</h2>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rx">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*wUFBWliThilp9Imftwzh_g.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*wUFBWliThilp9Imftwzh_g.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*wUFBWliThilp9Imftwzh_g.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*wUFBWliThilp9Imftwzh_g.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*wUFBWliThilp9Imftwzh_g.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*wUFBWliThilp9Imftwzh_g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUFBWliThilp9Imftwzh_g.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*wUFBWliThilp9Imftwzh_g.png 640w, https://miro.medium.com/v2/resize:fit:720/1*wUFBWliThilp9Imftwzh_g.png 720w, https://miro.medium.com/v2/resize:fit:750/1*wUFBWliThilp9Imftwzh_g.png 750w, https://miro.medium.com/v2/resize:fit:786/1*wUFBWliThilp9Imftwzh_g.png 786w, https://miro.medium.com/v2/resize:fit:828/1*wUFBWliThilp9Imftwzh_g.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*wUFBWliThilp9Imftwzh_g.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*wUFBWliThilp9Imftwzh_g.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="429" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Square
Grid
Layout`</figcaption>`{=html}`</figure>`{=html}`<p id="3ca9" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We'll
start by writing the function that assigns the (x, y, z) values to each
data
point`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl ry">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*SaAZooRlPYOGO6d6tC2rog.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*SaAZooRlPYOGO6d6tC2rog.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*SaAZooRlPYOGO6d6tC2rog.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*SaAZooRlPYOGO6d6tC2rog.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*SaAZooRlPYOGO6d6tC2rog.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*SaAZooRlPYOGO6d6tC2rog.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SaAZooRlPYOGO6d6tC2rog.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*SaAZooRlPYOGO6d6tC2rog.png 640w, https://miro.medium.com/v2/resize:fit:720/1*SaAZooRlPYOGO6d6tC2rog.png 720w, https://miro.medium.com/v2/resize:fit:750/1*SaAZooRlPYOGO6d6tC2rog.png 750w, https://miro.medium.com/v2/resize:fit:786/1*SaAZooRlPYOGO6d6tC2rog.png 786w, https://miro.medium.com/v2/resize:fit:828/1*SaAZooRlPYOGO6d6tC2rog.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*SaAZooRlPYOGO6d6tC2rog.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*SaAZooRlPYOGO6d6tC2rog.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="469" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for grid layout centered around (0,
0)`</figcaption>`{=html}`</figure>`{=html}`<p id="4b23" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Note
we use `<code class="cw rl rm rn qx b">`{=html}* 1.05`</code>`{=html} as
a simple means of providing a modest amount of spacing between the
points. We offset by -numCols/2 and -numRows/2 to center the grid at the
origin (0,
0).`</p>`{=html}`<p id="a778" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Next,
we'll create a
`<strong class="nq gu">`{=html}useLayout`</strong>`{=html} hook that
will apply this layout when the data
changes.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rz">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*aXaVQRmpSiLe-4_4GnfRgw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*aXaVQRmpSiLe-4_4GnfRgw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*aXaVQRmpSiLe-4_4GnfRgw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*aXaVQRmpSiLe-4_4GnfRgw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*aXaVQRmpSiLe-4_4GnfRgw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*aXaVQRmpSiLe-4_4GnfRgw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aXaVQRmpSiLe-4_4GnfRgw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*aXaVQRmpSiLe-4_4GnfRgw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*aXaVQRmpSiLe-4_4GnfRgw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*aXaVQRmpSiLe-4_4GnfRgw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*aXaVQRmpSiLe-4_4GnfRgw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*aXaVQRmpSiLe-4_4GnfRgw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*aXaVQRmpSiLe-4_4GnfRgw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*aXaVQRmpSiLe-4_4GnfRgw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="331" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for useLayout custom
hook`</figcaption>`{=html}`</figure>`{=html}`<p id="cbf2" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}As
we add more layouts, the hook will grow, but this structure will keep it
reasonably easy to work
with.`</p>`{=html}`<p id="6dfa" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Lastly,
we need to call this hook from our
`<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html}
component and update the code that sets the instance matrix values to
read from the data instead of computing positions
directly.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sa">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*WCc9xznTXM5X5U4L-o1vnA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*WCc9xznTXM5X5U4L-o1vnA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*WCc9xznTXM5X5U4L-o1vnA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*WCc9xznTXM5X5U4L-o1vnA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*WCc9xznTXM5X5U4L-o1vnA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*WCc9xznTXM5X5U4L-o1vnA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WCc9xznTXM5X5U4L-o1vnA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*WCc9xznTXM5X5U4L-o1vnA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*WCc9xznTXM5X5U4L-o1vnA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*WCc9xznTXM5X5U4L-o1vnA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*WCc9xznTXM5X5U4L-o1vnA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*WCc9xznTXM5X5U4L-o1vnA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*WCc9xznTXM5X5U4L-o1vnA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*WCc9xznTXM5X5U4L-o1vnA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="805" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for using the layout in
InstancedPoints`</figcaption>`{=html}`</figure>`{=html}`<p id="3ef3" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}The
main change here is calling `<strong class="nq gu">`{=html}useLayout
`</strong>`{=html}and reading the results from the data:
`<code class="cw rl rm rn qx b">`{=html}const { x, y, z } =
data\[i\]`</code>`{=html}. With that, we've got a square grid
working.`</p>`{=html}`<h2 id="2d91" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Spiral
Layout`</h2>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sb">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*pZVjzeALvobCJJz0lekphA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*pZVjzeALvobCJJz0lekphA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*pZVjzeALvobCJJz0lekphA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*pZVjzeALvobCJJz0lekphA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*pZVjzeALvobCJJz0lekphA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*pZVjzeALvobCJJz0lekphA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pZVjzeALvobCJJz0lekphA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*pZVjzeALvobCJJz0lekphA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*pZVjzeALvobCJJz0lekphA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*pZVjzeALvobCJJz0lekphA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*pZVjzeALvobCJJz0lekphA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*pZVjzeALvobCJJz0lekphA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*pZVjzeALvobCJJz0lekphA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*pZVjzeALvobCJJz0lekphA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="577" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Spiral
Layout`</figcaption>`{=html}`</figure>`{=html}`<p id="8121" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Let's
try something a bit more fun-- a spiral layout. Everyone loves spirals,
even if they're not particularly useful in this context. It's okay to
have fun every now and then,
right?`</p>`{=html}`<p id="7159" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Here's
the algorithm I use for the spiral which puts points at equal distances
along the
way.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sc">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*iAtbOkff9WJgvi_8MKukEA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*iAtbOkff9WJgvi_8MKukEA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*iAtbOkff9WJgvi_8MKukEA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*iAtbOkff9WJgvi_8MKukEA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*iAtbOkff9WJgvi_8MKukEA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*iAtbOkff9WJgvi_8MKukEA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iAtbOkff9WJgvi_8MKukEA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*iAtbOkff9WJgvi_8MKukEA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*iAtbOkff9WJgvi_8MKukEA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*iAtbOkff9WJgvi_8MKukEA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*iAtbOkff9WJgvi_8MKukEA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*iAtbOkff9WJgvi_8MKukEA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*iAtbOkff9WJgvi_8MKukEA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*iAtbOkff9WJgvi_8MKukEA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="414" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for laying out points on a
spiral`</figcaption>`{=html}`</figure>`{=html}`<p id="61f3" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}I'd
be lying if I said I totally understood everything that was happening in
here, but thanks to the wonders of the internet, you too can get
equidistant points on a spiral without knowing exactly how it works. I
left in some factors on
`<strong class="nq gu">`{=html}radius`</strong>`{=html}
(`<code class="cw rl rm rn qx b">`{=html}* 1`</code>`{=html}) and
`<strong class="nq gu">`{=html}theta`</strong>`{=html}
(`<code class="cw rl rm rn qx b">`{=html}* 0.8`</code>`{=html}) that you
can play with to adjust how tight the spiral is wound and how close the
points
are.`</p>`{=html}`<p id="5abf" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}I
recommend adding something fun to the z position to get weird
tunnel-like effects (try `<code class="cw rl rm rn qx b">`{=html}datum.z
= i \*
0.05`</code>`{=html}).`</p>`{=html}`<p id="1123" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}To
use it, we update our
`<strong class="nq gu">`{=html}useLayout`</strong>`{=html} hook to take
the value
`<strong class="nq gu">`{=html}"spiral"`</strong>`{=html}:`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sd">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*9owUksmc7lXWRX7_0DEMmg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*9owUksmc7lXWRX7_0DEMmg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*9owUksmc7lXWRX7_0DEMmg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*9owUksmc7lXWRX7_0DEMmg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*9owUksmc7lXWRX7_0DEMmg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*9owUksmc7lXWRX7_0DEMmg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9owUksmc7lXWRX7_0DEMmg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*9owUksmc7lXWRX7_0DEMmg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*9owUksmc7lXWRX7_0DEMmg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*9owUksmc7lXWRX7_0DEMmg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*9owUksmc7lXWRX7_0DEMmg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*9owUksmc7lXWRX7_0DEMmg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*9owUksmc7lXWRX7_0DEMmg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*9owUksmc7lXWRX7_0DEMmg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="400" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Updated
useLayout code that has the spiral
layout`</figcaption>`{=html}`</figure>`{=html}`<p id="47c4" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Then
set the `<strong class="nq gu">`{=html}layout`</strong>`{=html} in
`<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html}
accordingly:`</p>`{=html}`<pre class="on oo op oq or qw qx qy qz ax ra bj">`{=html}`<span id="b4c3" class="ov ow gt qx b is rb rc l jh rd">`{=html}useLayout({
data, layout: \'spiral\'
});`</span>`{=html}`</pre>`{=html}`<p id="a042" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}So
we've got two layouts, how about swapping between
them?`</p>`{=html}`<h2 id="65b9" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Toggling
Between
Layouts`</h2>`{=html}`<p id="5213" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}This
is another part where react-three-fiber really shines: we can do the
normal types of interactivity and declarative programming we love while
working with 3D components. Let's add a toggle that switches between our
two layout
options.`</p>`{=html}`<p id="cfd3" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}First,
we'll add some state to
`<strong class="nq gu">`{=html}App`</strong>`{=html} and pass in
`<strong class="nq gu">`{=html}layout`</strong>`{=html} as a prop to
`<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rs">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*G2uaT7dcL6rh754UA0vfyA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*G2uaT7dcL6rh754UA0vfyA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*G2uaT7dcL6rh754UA0vfyA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*G2uaT7dcL6rh754UA0vfyA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*G2uaT7dcL6rh754UA0vfyA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*G2uaT7dcL6rh754UA0vfyA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G2uaT7dcL6rh754UA0vfyA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*G2uaT7dcL6rh754UA0vfyA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*G2uaT7dcL6rh754UA0vfyA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*G2uaT7dcL6rh754UA0vfyA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*G2uaT7dcL6rh754UA0vfyA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*G2uaT7dcL6rh754UA0vfyA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*G2uaT7dcL6rh754UA0vfyA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*G2uaT7dcL6rh754UA0vfyA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="387" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for App.js with layout state
added`</figcaption>`{=html}`</figure>`{=html}`<p id="8af5" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Now
we just need to pass the
`<strong class="nq gu">`{=html}layout`</strong>`{=html} prop through
`<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html} to
`<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html} and
update our instance-matrix-updating
`<strong class="nq gu">`{=html}useEffect`</strong>`{=html} hook to have
`<strong class="nq gu">`{=html}layout`</strong>`{=html} as a
dependency.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl se">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*hqSm7IIF3hh_oiVn_D6z6w.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*hqSm7IIF3hh_oiVn_D6z6w.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*hqSm7IIF3hh_oiVn_D6z6w.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*hqSm7IIF3hh_oiVn_D6z6w.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*hqSm7IIF3hh_oiVn_D6z6w.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*hqSm7IIF3hh_oiVn_D6z6w.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hqSm7IIF3hh_oiVn_D6z6w.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*hqSm7IIF3hh_oiVn_D6z6w.png 640w, https://miro.medium.com/v2/resize:fit:720/1*hqSm7IIF3hh_oiVn_D6z6w.png 720w, https://miro.medium.com/v2/resize:fit:750/1*hqSm7IIF3hh_oiVn_D6z6w.png 750w, https://miro.medium.com/v2/resize:fit:786/1*hqSm7IIF3hh_oiVn_D6z6w.png 786w, https://miro.medium.com/v2/resize:fit:828/1*hqSm7IIF3hh_oiVn_D6z6w.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*hqSm7IIF3hh_oiVn_D6z6w.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*hqSm7IIF3hh_oiVn_D6z6w.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="668" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Excerpt
of code for InstancedMesh with layout
prop`</figcaption>`{=html}`</figure>`{=html}`<p id="edf0" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}And
with that, we are now able to swap between layouts. Check it out
below!`</p>`{=html}`<figure class="on oo op oq or nb">`{=html}`<div class="os jj l fi">`{=html}`<div class="rp ou l">`{=html}`</div>`{=html}`</div>`{=html}`</figure>`{=html}`<p id="2176" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Swapping
is cool and all, but you know what's cooler? Animation. Let's tackle
that
next.`</p>`{=html}`<h1 id="08e9" class="qb ow gt be ox qc qd qe pa qf qg qh pd qi qj qk ql qm qn qo qp qq qr qs qt qu bj">`{=html}Step
5 --- Animating
Positions`</h1>`{=html}`<p id="abcb" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}`<em class="qv">`{=html}(`</em>`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-5-prgpk" rel="noopener ugc nofollow" target="_blank">`{=html}`<em class="qv">`{=html}CodeSandbox
for this
step`</em>`{=html}`</a>`{=html}`<em class="qv">`{=html})`</em>`{=html}`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sf">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*UlE7II6Ctw1NrhsaB9uUfw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*UlE7II6Ctw1NrhsaB9uUfw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*UlE7II6Ctw1NrhsaB9uUfw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*UlE7II6Ctw1NrhsaB9uUfw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*UlE7II6Ctw1NrhsaB9uUfw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*UlE7II6Ctw1NrhsaB9uUfw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UlE7II6Ctw1NrhsaB9uUfw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*UlE7II6Ctw1NrhsaB9uUfw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*UlE7II6Ctw1NrhsaB9uUfw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*UlE7II6Ctw1NrhsaB9uUfw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*UlE7II6Ctw1NrhsaB9uUfw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*UlE7II6Ctw1NrhsaB9uUfw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*UlE7II6Ctw1NrhsaB9uUfw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*UlE7II6Ctw1NrhsaB9uUfw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="432" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Screen
capture mid-transition between spiral and grid
layouts`</figcaption>`{=html}`</figure>`{=html}`<p id="fa6f" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Inspired
by projects like
`<a class="af om" href="https://www.microsoft.com/en-us/research/project/sanddance/" rel="noopener ugc nofollow" target="_blank">`{=html}Microsoft
SandDance`</a>`{=html} and
`<a class="af om" href="https://pair-code.github.io/facets/" rel="noopener ugc nofollow" target="_blank">`{=html}Google
Facets`</a>`{=html}, our next steps will be to get these cylinders
flying around the screen. To do so we're going to use
`<a class="af om" href="https://www.react-spring.io/" rel="noopener ugc nofollow" target="_blank">`{=html}react-spring`</a>`{=html}
which will give us some organic looking animations while also making it
easy to do most of the animating outside of React, giving us better
performance. On my machine I'm able to get smooth animations at 100,000
points with this
approach.`</p>`{=html}`<p id="10ee" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Before
we begin, I've got to give a shout-out to
`<a class="af om" href="https://twitter.com/0xca0a" rel="noopener ugc nofollow" target="_blank">`{=html}Paul
Henschel`</a>`{=html}. He created `<em class="qv">`{=html}both
`</em>`{=html}react-spring and react-three-fiber. It's definitely worth
`<a class="af om" href="https://twitter.com/0xca0a" rel="noopener ugc nofollow" target="_blank">`{=html}following
him on Twitter`</a>`{=html} as he's always doing something
cool.`</p>`{=html}`<h2 id="3113" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Remembering
Source and Target
Positions`</h2>`{=html}`<p id="c030" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}Ok
so let's get started! The first thing we need to know to animate is
where we're going (the `<em class="qv">`{=html}target`</em>`{=html}
position) and where we're coming from (the
`<em class="qv">`{=html}source`</em>`{=html} position). To accomplish
this, we're just going to jam more properties on to the data objects
themselves because I'm lazy and it works. You could also do something
involving associative lists without tarnishing your data, but sometimes
it just feels good to be
bad.`</p>`{=html}`<p id="d19d" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}There
are a lot of ways of doing this. We're going to wrap it up in a small
hook called
`<strong class="nq gu">`{=html}useSourceTargetLayout`</strong>`{=html}.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sg">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*AcdIvWkGkCVg122Zt4-QAg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*AcdIvWkGkCVg122Zt4-QAg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*AcdIvWkGkCVg122Zt4-QAg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*AcdIvWkGkCVg122Zt4-QAg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*AcdIvWkGkCVg122Zt4-QAg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*AcdIvWkGkCVg122Zt4-QAg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AcdIvWkGkCVg122Zt4-QAg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*AcdIvWkGkCVg122Zt4-QAg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*AcdIvWkGkCVg122Zt4-QAg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*AcdIvWkGkCVg122Zt4-QAg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*AcdIvWkGkCVg122Zt4-QAg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*AcdIvWkGkCVg122Zt4-QAg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*AcdIvWkGkCVg122Zt4-QAg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*AcdIvWkGkCVg122Zt4-QAg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="709" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for
useSourceTargetLayout`</figcaption>`{=html}`</figure>`{=html}`<p id="7138" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}`<em class="qv">`{=html}Note:
It might be better to have just a single useEffect here and refactor
parts of useLayout for reuse, but this seems to work
too.`</em>`{=html}`</p>`{=html}`<p id="cbc3" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}All
we're doing is storing the current position, or (0, 0, 0) if there isn't
one, as the source position. Then we run the layout which will set (x,
y, z) on each data point, which is finally copied as the target
position.`</p>`{=html}`<h2 id="0869" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Interpolation
Between Source and
Target`</h2>`{=html}`<p id="8601" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}Next
up, we need the ability to interpolate between these two positions. The
basic idea is: given a progress value between 0 and 1, we want 0 to be
the source position, 1 to be the target position and 0.5 to be halfway
between them. This is generally solved by the
formula`</p>`{=html}`<pre class="on oo op oq or qw qx qy qz ax ra bj">`{=html}`<span id="9ade" class="ov ow gt qx b is rb rc l jh rd">`{=html}(1 -
t) \* source + t \*
target`</span>`{=html}`</pre>`{=html}`<p id="4843" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}where
`<code class="cw rl rm rn qx b">`{=html}t`</code>`{=html} is the
progress value. In many libraries you'll see this called "mix" or "lerp"
(for linear
interpolation).`</p>`{=html}`<p id="3e1d" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Our
interpolation function
`<strong class="nq gu">`{=html}interpolateSourceTarget`</strong>`{=html}
looks as
follows:`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rv">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*ShytHzMYuD9XCFjuj0YukA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*ShytHzMYuD9XCFjuj0YukA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*ShytHzMYuD9XCFjuj0YukA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*ShytHzMYuD9XCFjuj0YukA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*ShytHzMYuD9XCFjuj0YukA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*ShytHzMYuD9XCFjuj0YukA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ShytHzMYuD9XCFjuj0YukA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*ShytHzMYuD9XCFjuj0YukA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*ShytHzMYuD9XCFjuj0YukA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*ShytHzMYuD9XCFjuj0YukA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*ShytHzMYuD9XCFjuj0YukA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*ShytHzMYuD9XCFjuj0YukA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*ShytHzMYuD9XCFjuj0YukA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*ShytHzMYuD9XCFjuj0YukA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="198" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for
interpolateSourceTarget`</figcaption>`{=html}`</figure>`{=html}`<p id="679d" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We
iterate through all data points linearly interpolating the (x, y, z)
values to be between source and target based on the progress value (0 ≤
progress ≤
1).`</p>`{=html}`<h2 id="1e59" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Animating
with a
Spring`</h2>`{=html}`<p id="a222" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}Now
we need to actually call our interpolator and get these cylinders flying
around. First, we'll need to add react-spring as a
dependency:`</p>`{=html}`<pre class="on oo op oq or qw qx qy qz ax ra bj">`{=html}`<span id="b643" class="ov ow gt qx b is rb rc l jh rd">`{=html}\$
npm install \--save
react-spring`</span>`{=html}`</pre>`{=html}`<p id="d2a2" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Then
we'll create a `<strong class="nq gu">`{=html}useAnimatedLayout
`</strong>`{=html}hook that will use a spring to interpolate between
source and target positions when the layout changes. Here's the
code:`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rr">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*w1xiFZlOLUIAiIBwiKV4oQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*w1xiFZlOLUIAiIBwiKV4oQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*w1xiFZlOLUIAiIBwiKV4oQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*w1xiFZlOLUIAiIBwiKV4oQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*w1xiFZlOLUIAiIBwiKV4oQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*w1xiFZlOLUIAiIBwiKV4oQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w1xiFZlOLUIAiIBwiKV4oQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*w1xiFZlOLUIAiIBwiKV4oQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*w1xiFZlOLUIAiIBwiKV4oQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*w1xiFZlOLUIAiIBwiKV4oQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*w1xiFZlOLUIAiIBwiKV4oQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*w1xiFZlOLUIAiIBwiKV4oQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*w1xiFZlOLUIAiIBwiKV4oQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*w1xiFZlOLUIAiIBwiKV4oQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="565" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`</figure>`{=html}`<p id="3ce3" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Let's
break it
down.`</p>`{=html}`<ul class="">`{=html}`<li id="a0fe" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}We
import from
`<code class="cw rl rm rn qx b">`{=html}\'react-spring/three\'`</code>`{=html}
not just
`<code class="cw rl rm rn qx b">`{=html}react-spring`</code>`{=html} . I
think in this case it doesn't matter, but if you end up using the
`<code class="cw rl rm rn qx b">`{=html}animated`</code>`{=html} or
`<code class="cw rl rm rn qx b">`{=html}a`</code>`{=html} imports (e.g.
`<code class="cw rl rm rn qx b">`{=html}\<a.mesh \.../\>`</code>`{=html}
) then you'll likely need the /three
version.`</li>`{=html}`<li id="cebf" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}We
run our
`<strong class="nq gu">`{=html}useSourceTargetLayout`</strong>`{=html}
hook which will run our layout and remember source and target positions
as described
above.`</li>`{=html}`<li id="86a7" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}The
`<strong class="nq gu">`{=html}useSpring`</strong>`{=html} hook animates
`<strong class="nq gu">`{=html}animationProgress`</strong>`{=html} from
0 to
1.`</li>`{=html}`<li id="629c" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}We
use a ref to keep track of the previously seen layout value so we can
compare it with the current value and "reset" the spring animation when
it changes, forcing it to re-run interpolating
`<strong class="nq gu">`{=html}animationProgress`</strong>`{=html} from
0 to 1. I'm no react-spring expert by any means, so there may be better
ways, but this worked for
me.`</li>`{=html}`<li id="494f" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}We
use `<strong class="nq gu">`{=html}useSpring::onFrame`</strong>`{=html}
to get a callback for each tick of the animation where we can update our
positions by calling the
`<strong class="nq gu">`{=html}interpolateSourceTarget`</strong>`{=html}
function. We then call the user-provided
`<strong class="nq gu">`{=html}onFrame`</strong>`{=html} callback to
indicate the data has been updated. Note this happens without the React
reconciler getting involved, keeping the performance
high.`</li>`{=html}`</ul>`{=html}`<p id="5a67" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}With
all of this, we now have some numbers changing but we still haven't
integrated it with our
`<strong class="nq gu">`{=html}InstancedMesh`</strong>`{=html} to
actually see the animation happening-- let's do that
next.`</p>`{=html}`<h2 id="6e59" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Update
the InstancedMesh
Matrices`</h2>`{=html}`<p id="1557" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}The
final piece of getting animation to work is hooking up our
`<strong class="nq gu">`{=html}useAnimatedLayout `</strong>`{=html}hook
to our `<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html}
component. Recall that previously we called
`<code class="cw rl rm rn qx b">`{=html}useLayout({ data, layout
})`</code>`{=html}. Instead we'll replace that with
`<code class="cw rl rm rn qx b">`{=html}useAnimatedLayout({ data, layout
})`</code>`{=html} , but we'll also have to provide an
`<strong class="nq gu">`{=html}onFrame`</strong>`{=html} argument that
will handle updating the instance matrices. Let's first extract the code
we had in the `<strong class="nq gu">`{=html}useEffect
`</strong>`{=html}hook in
`<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html} into a
helper function
`<strong class="nq gu">`{=html}updateInstancedMeshMatrices`</strong>`{=html}:`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl ry">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Nej4UpsVwv0e82PXA5v-Iw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Nej4UpsVwv0e82PXA5v-Iw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Nej4UpsVwv0e82PXA5v-Iw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Nej4UpsVwv0e82PXA5v-Iw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Nej4UpsVwv0e82PXA5v-Iw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Nej4UpsVwv0e82PXA5v-Iw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nej4UpsVwv0e82PXA5v-Iw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Nej4UpsVwv0e82PXA5v-Iw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*Nej4UpsVwv0e82PXA5v-Iw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*Nej4UpsVwv0e82PXA5v-Iw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*Nej4UpsVwv0e82PXA5v-Iw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*Nej4UpsVwv0e82PXA5v-Iw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*Nej4UpsVwv0e82PXA5v-Iw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*Nej4UpsVwv0e82PXA5v-Iw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="469" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for
updateInstancedMeshMatrices`</figcaption>`{=html}`</figure>`{=html}`<p id="0504" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}`<strong class="nq gu">`{=html}`<em class="qv">`{=html}Warning!`</em>`{=html}
`</strong>`{=html}If you're re-sorting your data array, this code will
have unexpected behavior. The mesh instances are always in the same
order and we're calling
mesh.setMatrixAt(`<strong class="nq gu">`{=html}index`</strong>`{=html},
matrix). It's possible the index in the mesh array is different than the
current index in the data array if you've re-sorted, so make sure you
keep track of it if you're re-sorting. On events, the mesh index is
called `<strong class="nq gu">`{=html}instanceId`</strong>`{=html}, so
it can be handy to store that on the data objects to use
here.`</p>`{=html}`<p id="7b6a" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Anyway,
back to animating. Now, we can call this helper function in our
`<strong class="nq gu">`{=html}onFrame`</strong>`{=html} callback to get
our mesh to update as the spring animation is
happening.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rv">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*wSo_I435frGx3SdB-tE9WA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*wSo_I435frGx3SdB-tE9WA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*wSo_I435frGx3SdB-tE9WA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*wSo_I435frGx3SdB-tE9WA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*wSo_I435frGx3SdB-tE9WA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*wSo_I435frGx3SdB-tE9WA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wSo_I435frGx3SdB-tE9WA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*wSo_I435frGx3SdB-tE9WA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*wSo_I435frGx3SdB-tE9WA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*wSo_I435frGx3SdB-tE9WA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*wSo_I435frGx3SdB-tE9WA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*wSo_I435frGx3SdB-tE9WA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*wSo_I435frGx3SdB-tE9WA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*wSo_I435frGx3SdB-tE9WA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="600" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Updated
code for InstancedPoints with
useAnimatedLayout`</figcaption>`{=html}`</figure>`{=html}`<p id="975f" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}And
with that, we've got animation! For me when I pop the CodeSandbox into
its own window I get smooth animation with 100,000 points on my machine.
Give it a shot and see how it works for
you.`</p>`{=html}`<figure class="on oo op oq or nb">`{=html}`<div class="os jj l fi">`{=html}`<div class="rp ou l">`{=html}`</div>`{=html}`</div>`{=html}`</figure>`{=html}`<h2 id="38a0" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Using
the GPU for better
performance`</h2>`{=html}`<p id="5f0e" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}After
a certain threshold (perhaps over 100,000 items depending on your
machine), animating always becomes a bit tricky since we need to turn to
using the GPU instead of the CPU in order to keep our animations smooth.
Using the GPU means using
`<strong class="nq gu">`{=html}shaders`</strong>`{=html}, and this post
is long enough as it is without talking about them, but for those that
want to learn more, check out these
resources:`</p>`{=html}`<ul class="">`{=html}`<li id="0bd6" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="https://github.com/zadvorsky/three.bas" rel="noopener ugc nofollow" target="_blank">`{=html}Three
Buffer Animation System`</a>`{=html} (BAS) --- An extension for Three
that makes it relatively easy to animate via the vertex shader. During
hack week I wrote my own custom material based on MeshStandardMaterial
to accomplish this, but only because I had never heard of Three BAS
until
`<a class="af om" href="https://twitter.com/0xca0a/status/1209045571388018688" rel="noopener ugc nofollow" target="_blank">`{=html}Paul
Henschel tweeted about
it`</a>`{=html}!`</li>`{=html}`<li id="eec6" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="https://peterbeshai.com/blog/2017-05-26-beautifully-animate-points-with-webgl-and-regl/" rel="noopener ugc nofollow" target="_blank">`{=html}An
older post of mine about doing basic point animation in a
shader`</a>`{=html} with
`<a class="af om" href="http://regl.party/" rel="noopener ugc nofollow" target="_blank">`{=html}regl`</a>`{=html}.`</li>`{=html}`</ul>`{=html}`<p id="39e3" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}So
we've got animation now, how about some
interactivity?`</p>`{=html}`<h1 id="820b" class="qb ow gt be ox qc qd qe pa qf qg qh pd qi qj qk ql qm qn qo qp qq qr qs qt qu bj">`{=html}Step
6 --- Adding Interactivity: Selecting a
Point`</h1>`{=html}`<p id="70c0" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}`<em class="qv">`{=html}(`</em>`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-6-ffrme" rel="noopener ugc nofollow" target="_blank">`{=html}`<em class="qv">`{=html}CodeSandbox
for this
step`</em>`{=html}`</a>`{=html}`<em class="qv">`{=html})`</em>`{=html}`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sh">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*AIYrfp0ZV_ObAl61YKTtjQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*AIYrfp0ZV_ObAl61YKTtjQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*AIYrfp0ZV_ObAl61YKTtjQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*AIYrfp0ZV_ObAl61YKTtjQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*AIYrfp0ZV_ObAl61YKTtjQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*AIYrfp0ZV_ObAl61YKTtjQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AIYrfp0ZV_ObAl61YKTtjQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*AIYrfp0ZV_ObAl61YKTtjQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*AIYrfp0ZV_ObAl61YKTtjQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*AIYrfp0ZV_ObAl61YKTtjQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*AIYrfp0ZV_ObAl61YKTtjQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*AIYrfp0ZV_ObAl61YKTtjQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*AIYrfp0ZV_ObAl61YKTtjQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*AIYrfp0ZV_ObAl61YKTtjQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="504" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}End
result of step 6 selecting a
point`</figcaption>`{=html}`</figure>`{=html}`<p id="909a" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}One
of the great parts about using
`<strong class="nq gu">`{=html}InstancedMesh`</strong>`{=html} is that
it allows mouse events to work as we expect with very little effort on
our
part.`</p>`{=html}`<h2 id="a802" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Setting
up selectedPoint
State`</h2>`{=html}`<p id="69a0" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}We'll
get started by putting in some scaffolding to show the selected point in
other parts in the app besides the
`<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}
component. This is handy for having panels that show details about the
data you're selecting. We'll just do a very basic message that shows the
selected ID, but the same idea applies for more sophisticated
applications.`</p>`{=html}`<p id="412d" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Back
in good ol' `<strong class="nq gu">`{=html}App.js`</strong>`{=html},
let's add some state for the selected point and display its ID if we
have
one.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl si">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*hMFjyU2XS6W7DMrsg2vQBw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*hMFjyU2XS6W7DMrsg2vQBw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*hMFjyU2XS6W7DMrsg2vQBw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*hMFjyU2XS6W7DMrsg2vQBw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*hMFjyU2XS6W7DMrsg2vQBw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*hMFjyU2XS6W7DMrsg2vQBw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hMFjyU2XS6W7DMrsg2vQBw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*hMFjyU2XS6W7DMrsg2vQBw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*hMFjyU2XS6W7DMrsg2vQBw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*hMFjyU2XS6W7DMrsg2vQBw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*hMFjyU2XS6W7DMrsg2vQBw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*hMFjyU2XS6W7DMrsg2vQBw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*hMFjyU2XS6W7DMrsg2vQBw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*hMFjyU2XS6W7DMrsg2vQBw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="624" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for App with selectedPoint
state`</figcaption>`{=html}`</figure>`{=html}`<p id="d645" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Nothing
too exciting here, we create some state, display it, and pass it as a
prop to `<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}.
Could've brought a little pizazz to this code with some
`<a class="af om" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Nullish_coalescing_operator" rel="noopener ugc nofollow" target="_blank">`{=html}nullish
coalescing`</a>`{=html} but it seems it's a bit too soon still. Soon
though,
`<em class="qv">`{=html}soon`</em>`{=html}.`</p>`{=html}`<p id="2327" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Ok
so, how about we make use of those fancy new props in
`<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}? It turns
out to be just like normal React event handling. 3D? More like
`<em class="qv">`{=html}3Z`</em>`{=html}!
(thre`<em class="qv">`{=html}easy. I'm
sorry.)`</em>`{=html}`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rv">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*ZOzXwy074YGFCnLYpnFI1A.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*ZOzXwy074YGFCnLYpnFI1A.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*ZOzXwy074YGFCnLYpnFI1A.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*ZOzXwy074YGFCnLYpnFI1A.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*ZOzXwy074YGFCnLYpnFI1A.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*ZOzXwy074YGFCnLYpnFI1A.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZOzXwy074YGFCnLYpnFI1A.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*ZOzXwy074YGFCnLYpnFI1A.png 640w, https://miro.medium.com/v2/resize:fit:720/1*ZOzXwy074YGFCnLYpnFI1A.png 720w, https://miro.medium.com/v2/resize:fit:750/1*ZOzXwy074YGFCnLYpnFI1A.png 750w, https://miro.medium.com/v2/resize:fit:786/1*ZOzXwy074YGFCnLYpnFI1A.png 786w, https://miro.medium.com/v2/resize:fit:828/1*ZOzXwy074YGFCnLYpnFI1A.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*ZOzXwy074YGFCnLYpnFI1A.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*ZOzXwy074YGFCnLYpnFI1A.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="565" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for InstancedPoints with click handling for
selectedPoint`</figcaption>`{=html}`</figure>`{=html}`<p id="f8f2" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}As
mentioned previously, we can recover the data item based on the
`<strong class="nq gu">`{=html}instanceId`</strong>`{=html} provided in
the event object. If we never re-sort the data, this corresponds
directly to the index. If we do re-sort the data, we will have to do
some more work to find the point based on the
instanceId.`</p>`{=html}`<p id="2d2a" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}As
shown above, we just provide an `<strong class="nq gu">`{=html}onClick
`</strong>`{=html}prop`<strong class="nq gu">`{=html}
`</strong>`{=html}to the \<instancedMesh\> then toggle the selected
point as we normally would in React via our
`<strong class="nq gu">`{=html}handleClick`</strong>`{=html}
function.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sj">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*FBF8vokKVgn6nCN246UZ5Q.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*FBF8vokKVgn6nCN246UZ5Q.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*FBF8vokKVgn6nCN246UZ5Q.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*FBF8vokKVgn6nCN246UZ5Q.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*FBF8vokKVgn6nCN246UZ5Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*FBF8vokKVgn6nCN246UZ5Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FBF8vokKVgn6nCN246UZ5Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*FBF8vokKVgn6nCN246UZ5Q.png 640w, https://miro.medium.com/v2/resize:fit:720/1*FBF8vokKVgn6nCN246UZ5Q.png 720w, https://miro.medium.com/v2/resize:fit:750/1*FBF8vokKVgn6nCN246UZ5Q.png 750w, https://miro.medium.com/v2/resize:fit:786/1*FBF8vokKVgn6nCN246UZ5Q.png 786w, https://miro.medium.com/v2/resize:fit:828/1*FBF8vokKVgn6nCN246UZ5Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*FBF8vokKVgn6nCN246UZ5Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*FBF8vokKVgn6nCN246UZ5Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="257" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}A
toggled item shows a message, but no other visual
cues`</figcaption>`{=html}`</figure>`{=html}`<p id="ae08" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}With
that, we have basic mouse interaction: we can click the cylinders and
get a little message showing that an item was selected, but let's take
it a step further and color the selected item
too.`</p>`{=html}`<h2 id="4764" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Coloring
the Selected
Point`</h2>`{=html}`<p id="e574" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}To
get coloring for our selected point, we need to do a few things. First,
we need to update our material to use
`<strong class="nq gu">`{=html}vertexColors`</strong>`{=html}, which
lets the instances within our
`<strong class="nq gu">`{=html}InstancedMesh`</strong>`{=html} have
different colors. Then we need to provide an
`<a class="af om" href="https://threejs.org/docs/index.html#api/en/core/InstancedBufferAttribute" rel="noopener ugc nofollow" target="_blank">`{=html}InstancedBufferAttribute`</a>`{=html}
which specifies a color for each of the instances. Lastly, we need to
change the instance colors based on which point is
selected.`</p>`{=html}`<p id="09cb" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}The
first two steps can be mostly accomplished through
JSX:`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sk">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*b11Yx8bg41tOXNhplDDHQQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*b11Yx8bg41tOXNhplDDHQQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*b11Yx8bg41tOXNhplDDHQQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*b11Yx8bg41tOXNhplDDHQQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*b11Yx8bg41tOXNhplDDHQQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*b11Yx8bg41tOXNhplDDHQQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b11Yx8bg41tOXNhplDDHQQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*b11Yx8bg41tOXNhplDDHQQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*b11Yx8bg41tOXNhplDDHQQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*b11Yx8bg41tOXNhplDDHQQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*b11Yx8bg41tOXNhplDDHQQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*b11Yx8bg41tOXNhplDDHQQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*b11Yx8bg41tOXNhplDDHQQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*b11Yx8bg41tOXNhplDDHQQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="482" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for InstancedPoints with vertex coloring
support`</figcaption>`{=html}`</figure>`{=html}`<p id="76ca" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Here
we've added an \<instancedBufferAttribute\> child of
\<cylinderBufferGeometry\> that specifies our color attribute. Our
colors will be RGB values (3 values per instance), so that's why the
number `<strong class="nq gu">`{=html}3`</strong>`{=html} appears in a
few
locations.`</p>`{=html}`<p id="eba8" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We've
also added a prop
`<strong class="nq gu">`{=html}vertexColors`</strong>`{=html} to
\<meshStandardMaterial\> which informs it to look for a
`<strong class="nq gu">`{=html}color`</strong>`{=html} attribute when
rendering the meshes. Note that in our \<instancedBufferAttribute\> we
attach it as
`<strong class="nq gu">`{=html}attributes.color`</strong>`{=html} to the
geometry, which is how the two get
connected.`</p>`{=html}`<p id="19b8" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Now,
the code above doesn't provide any actual colors (colorArray doesn't
have reasonable values), so you wouldn't be able to see anything if you
used it as is. To handle the actual coloring, let's create a
`<strong class="nq gu">`{=html}usePointColors `</strong>`{=html}hook
that will set the colors based on data and the selected
point.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sl">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*rjUs2iGIeOLb7ZaS76zfng.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*rjUs2iGIeOLb7ZaS76zfng.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*rjUs2iGIeOLb7ZaS76zfng.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*rjUs2iGIeOLb7ZaS76zfng.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*rjUs2iGIeOLb7ZaS76zfng.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*rjUs2iGIeOLb7ZaS76zfng.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rjUs2iGIeOLb7ZaS76zfng.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*rjUs2iGIeOLb7ZaS76zfng.png 640w, https://miro.medium.com/v2/resize:fit:720/1*rjUs2iGIeOLb7ZaS76zfng.png 720w, https://miro.medium.com/v2/resize:fit:750/1*rjUs2iGIeOLb7ZaS76zfng.png 750w, https://miro.medium.com/v2/resize:fit:786/1*rjUs2iGIeOLb7ZaS76zfng.png 786w, https://miro.medium.com/v2/resize:fit:828/1*rjUs2iGIeOLb7ZaS76zfng.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*rjUs2iGIeOLb7ZaS76zfng.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*rjUs2iGIeOLb7ZaS76zfng.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="400" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for usePointColors
hook`</figcaption>`{=html}`</figure>`{=html}`<p id="03af" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}So
what's happening
here?`</p>`{=html}`<ul class="">`{=html}`<li id="7430" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}It
creates `<strong class="nq gu">`{=html}colorArray`</strong>`{=html}, an
array to store all the colors for each instance. We fill it with values
by using
`<strong class="nq gu">`{=html}scratchColor.toArray()`</strong>`{=html}.`</li>`{=html}`<li id="6255" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}It
create a reference
`<strong class="nq gu">`{=html}colorAttrib`</strong>`{=html} which will
hold the
`<strong class="nq gu">`{=html}InstancedBufferAttribute`</strong>`{=html}
reference`</li>`{=html}`<li id="9c61" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}When
the selected point or data changes, we recompute the color for all
points and notify Three that the color attribute needs to be
re-interpreted. This isn't the most efficient way, but it works well
enough.`</li>`{=html}`</ul>`{=html}`<p id="2f23" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We
then use the results of this hook as the props for the
\<instancedBufferAttribute\> in
`<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html}`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sm">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*yy5VWSuBDPWI08TTDgHaLg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*yy5VWSuBDPWI08TTDgHaLg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*yy5VWSuBDPWI08TTDgHaLg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*yy5VWSuBDPWI08TTDgHaLg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*yy5VWSuBDPWI08TTDgHaLg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*yy5VWSuBDPWI08TTDgHaLg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yy5VWSuBDPWI08TTDgHaLg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*yy5VWSuBDPWI08TTDgHaLg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*yy5VWSuBDPWI08TTDgHaLg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*yy5VWSuBDPWI08TTDgHaLg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*yy5VWSuBDPWI08TTDgHaLg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*yy5VWSuBDPWI08TTDgHaLg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*yy5VWSuBDPWI08TTDgHaLg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*yy5VWSuBDPWI08TTDgHaLg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="327" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for InstancedPoints using
usePointColors`</figcaption>`{=html}`</figure>`{=html}`<p id="e135" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}And
with that, we've got
coloring!`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sn">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*3pl7xqjc1Lup7EzpJ1TJxw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*3pl7xqjc1Lup7EzpJ1TJxw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*3pl7xqjc1Lup7EzpJ1TJxw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*3pl7xqjc1Lup7EzpJ1TJxw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*3pl7xqjc1Lup7EzpJ1TJxw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*3pl7xqjc1Lup7EzpJ1TJxw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3pl7xqjc1Lup7EzpJ1TJxw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*3pl7xqjc1Lup7EzpJ1TJxw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*3pl7xqjc1Lup7EzpJ1TJxw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*3pl7xqjc1Lup7EzpJ1TJxw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*3pl7xqjc1Lup7EzpJ1TJxw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*3pl7xqjc1Lup7EzpJ1TJxw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*3pl7xqjc1Lup7EzpJ1TJxw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*3pl7xqjc1Lup7EzpJ1TJxw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="424" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Screen
capture of a colored, selected
cylinder`</figcaption>`{=html}`</figure>`{=html}`<p id="6836" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Niceeeee,
but if you try clicking and dragging around, you'll see that it keeps
changing the selection when you release the mouse.
`<em class="qv">`{=html}Dang`</em>`{=html}, just when I thought I was
out, they pull me back
in.`</p>`{=html}`<h2 id="e728" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Preventing
Selection on
Drag`</h2>`{=html}`<p id="d563" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}To
prevent selecting new items when dragging across the vis, we just need
to check if the mouse moved too far between mouse down and mouse up. A
threshold of 5 pixels works reasonably well, so that's what we'll
use.`</p>`{=html}`<p id="c3e8" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}To
do this, we'll need to add a handler for
`<strong class="nq gu">`{=html}onPointerDown`</strong>`{=html}
(react-three-fiber uses pointer events and you may need to
`<a class="af om" href="https://github.com/jquery/PEP" rel="noopener ugc nofollow" target="_blank">`{=html}polyfill
them`</a>`{=html}), and modify our
`<strong class="nq gu">`{=html}onClick`</strong>`{=html} handler to
check if the mouse moved too far to be a click. We'll combine the logic
for these two into a custom hook called
`<strong class="nq gu">`{=html}useMousePointInteraction
`</strong>`{=html}that will return the two
handlers.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rv">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*QVk-piejbruKdtzyWcY6uA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*QVk-piejbruKdtzyWcY6uA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*QVk-piejbruKdtzyWcY6uA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*QVk-piejbruKdtzyWcY6uA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*QVk-piejbruKdtzyWcY6uA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*QVk-piejbruKdtzyWcY6uA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QVk-piejbruKdtzyWcY6uA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*QVk-piejbruKdtzyWcY6uA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*QVk-piejbruKdtzyWcY6uA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*QVk-piejbruKdtzyWcY6uA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*QVk-piejbruKdtzyWcY6uA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*QVk-piejbruKdtzyWcY6uA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*QVk-piejbruKdtzyWcY6uA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*QVk-piejbruKdtzyWcY6uA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="687" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for
useMousePointInteraction`</figcaption>`{=html}`</figure>`{=html}`<p id="a290" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We
store the last seen mouse down position in a ref in our pointer down
handler and then compare the mouse click position against it to see if
we dragged or not. Now we just need to use these handlers in our
`<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html}
component and we'll be all
set.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl so">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*HHU4mWb9BoH5b1BetoXM1Q.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*HHU4mWb9BoH5b1BetoXM1Q.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*HHU4mWb9BoH5b1BetoXM1Q.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*HHU4mWb9BoH5b1BetoXM1Q.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*HHU4mWb9BoH5b1BetoXM1Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*HHU4mWb9BoH5b1BetoXM1Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HHU4mWb9BoH5b1BetoXM1Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*HHU4mWb9BoH5b1BetoXM1Q.png 640w, https://miro.medium.com/v2/resize:fit:720/1*HHU4mWb9BoH5b1BetoXM1Q.png 720w, https://miro.medium.com/v2/resize:fit:750/1*HHU4mWb9BoH5b1BetoXM1Q.png 750w, https://miro.medium.com/v2/resize:fit:786/1*HHU4mWb9BoH5b1BetoXM1Q.png 786w, https://miro.medium.com/v2/resize:fit:828/1*HHU4mWb9BoH5b1BetoXM1Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*HHU4mWb9BoH5b1BetoXM1Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*HHU4mWb9BoH5b1BetoXM1Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="377" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
using useMousePointInteraction in
InstancedPoints`</figcaption>`{=html}`</figure>`{=html}`<p id="029f" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Ahhhhhh
the glorious feeling of mouse behavior matching
expectations.`</p>`{=html}`<figure class="on oo op oq or nb">`{=html}`<div class="os jj l fi">`{=html}`<div class="rp ou l">`{=html}`</div>`{=html}`</div>`{=html}`</figure>`{=html}`<h1 id="70f7" class="qb ow gt be ox qc qd qe pa qf qg qh pd qi qj qk ql qm qn qo qp qq qr qs qt qu bj">`{=html}Step
7 --- Bloom: Adding a Glow
Effect`</h1>`{=html}`<p id="28b0" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}`<em class="qv">`{=html}(`</em>`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-7-bxx97" rel="noopener ugc nofollow" target="_blank">`{=html}`<em class="qv">`{=html}CodeSandbox
for this
step`</em>`{=html}`</a>`{=html}`<em class="qv">`{=html})`</em>`{=html}`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sp">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*p-fU40UzR_naFv1Z3ohlVA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*p-fU40UzR_naFv1Z3ohlVA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*p-fU40UzR_naFv1Z3ohlVA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*p-fU40UzR_naFv1Z3ohlVA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*p-fU40UzR_naFv1Z3ohlVA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*p-fU40UzR_naFv1Z3ohlVA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p-fU40UzR_naFv1Z3ohlVA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*p-fU40UzR_naFv1Z3ohlVA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*p-fU40UzR_naFv1Z3ohlVA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*p-fU40UzR_naFv1Z3ohlVA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*p-fU40UzR_naFv1Z3ohlVA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*p-fU40UzR_naFv1Z3ohlVA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*p-fU40UzR_naFv1Z3ohlVA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*p-fU40UzR_naFv1Z3ohlVA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="507" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}End
result of step 7: a glowing, lit-up selected
point`</figcaption>`{=html}`</figure>`{=html}`<p id="a27e" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Ok,
we've got interaction and layout animation but we're living in the
wonderful world of 3D, let's get some sweet effects in there. The first
thing that comes to mind when I hear "bad ass 3D effects" is making
things glow, otherwise known as "bloom". Let's see how we turn on a
bloom effect and then spruce things up with some additional
lights.`</p>`{=html}`<p id="8f28" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}`<em class="qv">`{=html}Note:
Adding in these effects may slow down animation
performance.`</em>`{=html}`</p>`{=html}`<h2 id="2f1b" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Adding
Effects via \<Effects
/\>`</h2>`{=html}`<p id="8256" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}Turns
out react-three-fiber has a bunch of
`<a class="af om" href="https://github.com/react-spring/react-three-fiber" rel="noopener ugc nofollow" target="_blank">`{=html}amazing
examples`</a>`{=html} of how to add effects to your 3D work and the
library makes it really easy. We'll create an
`<strong class="nq gu">`{=html}Effects`</strong>`{=html} component that
we just add as a child to our \<Canvas\> and that'll be that. Really.
We'll add two effects:
`<a class="af om" href="https://threejs.org/examples/?q=bloom#webgl_postprocessing_unreal_bloom" rel="noopener ugc nofollow" target="_blank">`{=html}UnrealBloomPass`</a>`{=html}
for glow and
`<a class="af om" href="https://threejs.org/examples/?q=fxaa#webgl_postprocessing_fxaa" rel="noopener ugc nofollow" target="_blank">`{=html}FXAA`</a>`{=html}
for
`<a class="af om" href="https://en.wikipedia.org/wiki/Fast_approximate_anti-aliasing" rel="noopener ugc nofollow" target="_blank">`{=html}antialiasing`</a>`{=html}.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sq">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*VkKAthHyspxkvN7T-yi1wQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*VkKAthHyspxkvN7T-yi1wQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*VkKAthHyspxkvN7T-yi1wQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*VkKAthHyspxkvN7T-yi1wQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*VkKAthHyspxkvN7T-yi1wQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*VkKAthHyspxkvN7T-yi1wQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VkKAthHyspxkvN7T-yi1wQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*VkKAthHyspxkvN7T-yi1wQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*VkKAthHyspxkvN7T-yi1wQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*VkKAthHyspxkvN7T-yi1wQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*VkKAthHyspxkvN7T-yi1wQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*VkKAthHyspxkvN7T-yi1wQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*VkKAthHyspxkvN7T-yi1wQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*VkKAthHyspxkvN7T-yi1wQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="772" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for \<Effects
/\>`</figcaption>`{=html}`</figure>`{=html}`<p id="6f51" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}So
there's a bunch of stuff going on in here that happily you don't really
need to know much about to get working. Or at least I didn't need to
know much about it anyway. The general idea is post-processing effects
work by doing multiple passes through the scene and adjusting it each
time. Here we do three
passes:`</p>`{=html}`<ul class="">`{=html}`<li id="d6a4" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}First
we render the actual scene with a \<renderPass
/\>`</li>`{=html}`<li id="5f05" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}Then
we add the glow by inserting an \<unrealBloomPass /\>. You can play with
the bloom arguments to adjust how intense the glow
is.`</li>`{=html}`<li id="fff4" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}Lastly,
we use a \<shaderPass /\> with a FXAA shader that antialiases the scene
and importantly renders it to screen (note the
`<strong class="nq gu">`{=html}renderToScreen`</strong>`{=html}
prop)`</li>`{=html}`</ul>`{=html}`<p id="6af2" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}For
the most part, the only thing I play with here is the bloom arguments.
You can insert other effects in the composer too, check out the
`<a class="af om" href="https://threejs.org/examples/?q=postprocessing#webgl_postprocessing_unreal_bloom" rel="noopener ugc nofollow" target="_blank">`{=html}Three
docs`</a>`{=html} for more
ideas.`</p>`{=html}`<p id="c98f" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Now
we just need to add the
`<strong class="nq gu">`{=html}Effects`</strong>`{=html} component as a
child of `<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}
and we'll be good to
go.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rj">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*DC9VJAggVDSXiicWPjKZgA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*DC9VJAggVDSXiicWPjKZgA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*DC9VJAggVDSXiicWPjKZgA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*DC9VJAggVDSXiicWPjKZgA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*DC9VJAggVDSXiicWPjKZgA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*DC9VJAggVDSXiicWPjKZgA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DC9VJAggVDSXiicWPjKZgA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*DC9VJAggVDSXiicWPjKZgA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*DC9VJAggVDSXiicWPjKZgA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*DC9VJAggVDSXiicWPjKZgA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*DC9VJAggVDSXiicWPjKZgA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*DC9VJAggVDSXiicWPjKZgA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*DC9VJAggVDSXiicWPjKZgA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*DC9VJAggVDSXiicWPjKZgA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="463" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for ThreePointVis with \<Effects /\>
added`</figcaption>`{=html}`</figure>`{=html}`<p id="33fd" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}So
what does it look like at this
point?`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sr">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*S_jT0y97XM9efvvNdk1zfg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*S_jT0y97XM9efvvNdk1zfg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*S_jT0y97XM9efvvNdk1zfg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*S_jT0y97XM9efvvNdk1zfg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*S_jT0y97XM9efvvNdk1zfg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*S_jT0y97XM9efvvNdk1zfg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S_jT0y97XM9efvvNdk1zfg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*S_jT0y97XM9efvvNdk1zfg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*S_jT0y97XM9efvvNdk1zfg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*S_jT0y97XM9efvvNdk1zfg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*S_jT0y97XM9efvvNdk1zfg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*S_jT0y97XM9efvvNdk1zfg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*S_jT0y97XM9efvvNdk1zfg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*S_jT0y97XM9efvvNdk1zfg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="419" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Screenshot
after initial effects are
applied`</figcaption>`{=html}`</figure>`{=html}`<p id="ffb6" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Dang
that's some `<em class="qv">`{=html}seeeeerious`</em>`{=html} glow. Some
may argue too much, some not enough. But for our purposes, I'd like to
tone it down. The problem here is that all of the cylinders are #FFF
white, the brightest possible color and bloom works by making things
over a certain brightness level glow. I only want the selected items to
glow for the most part, so my solution is to reduce the default
unselected color from #FFF to something lower like
#888.`</p>`{=html}`<p id="f662" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}`<em class="qv">`{=html}Note:
there is such a thing as "selective bloom" that may work here as well,
but I've never used
it.`</em>`{=html}`</p>`{=html}`<p id="c154" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}To
adjust the colors of the non-selected points, we just update the
`<strong class="nq gu">`{=html}DEFAULT_COLOR`</strong>`{=html} const in
`<strong class="nq gu">`{=html}InstancedPoints.js`</strong>`{=html}.`</p>`{=html}`<pre class="on oo op oq or qw qx qy qz ax ra bj">`{=html}`<span id="80f7" class="ov ow gt qx b is rb rc l jh rd">`{=html}const
DEFAULT_COLOR =
\"#888\";`</span>`{=html}`</pre>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl ss">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*-dQBj7CXb4iTFqxrbTxjKw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*-dQBj7CXb4iTFqxrbTxjKw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*-dQBj7CXb4iTFqxrbTxjKw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*-dQBj7CXb4iTFqxrbTxjKw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*-dQBj7CXb4iTFqxrbTxjKw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*-dQBj7CXb4iTFqxrbTxjKw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-dQBj7CXb4iTFqxrbTxjKw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*-dQBj7CXb4iTFqxrbTxjKw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*-dQBj7CXb4iTFqxrbTxjKw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*-dQBj7CXb4iTFqxrbTxjKw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*-dQBj7CXb4iTFqxrbTxjKw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*-dQBj7CXb4iTFqxrbTxjKw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*-dQBj7CXb4iTFqxrbTxjKw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*-dQBj7CXb4iTFqxrbTxjKw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="336" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Screenshot
showing only the selected item
glowing`</figcaption>`{=html}`</figure>`{=html}`<p id="b4bc" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Ok
so that tones things way down, and we've got some mild glow going on. We
could play around with the bloom settings to make the glow more intense
on the selected item, or we could choose a brighter color for it, but
instead I'd like to add in some
lights.`</p>`{=html}`<h2 id="0646" class="ov ow gt be ox oy oz dx pa pb pc dz pd nz pe pf pg od ph pi pj oh pk pl pm pn bj">`{=html}Light
It
Up`</h2>`{=html}`<p id="f925" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}First,
let's try adding a light directly above the selected point and see how
that looks. All we have to do is modify our
`<strong class="nq gu">`{=html}InstancedPoints`</strong>`{=html}
component to add a
`<a class="af om" href="https://threejs.org/docs/index.html#api/en/lights/PointLight" rel="noopener ugc nofollow" target="_blank">`{=html}\<pointLight\>`</a>`{=html}
when we have a
`<strong class="nq gu">`{=html}selectedPoint`</strong>`{=html}.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sm">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*PjfUtsYgWfzG8S8JiEY5Fw.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*PjfUtsYgWfzG8S8JiEY5Fw.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*PjfUtsYgWfzG8S8JiEY5Fw.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*PjfUtsYgWfzG8S8JiEY5Fw.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*PjfUtsYgWfzG8S8JiEY5Fw.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*PjfUtsYgWfzG8S8JiEY5Fw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PjfUtsYgWfzG8S8JiEY5Fw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*PjfUtsYgWfzG8S8JiEY5Fw.png 640w, https://miro.medium.com/v2/resize:fit:720/1*PjfUtsYgWfzG8S8JiEY5Fw.png 720w, https://miro.medium.com/v2/resize:fit:750/1*PjfUtsYgWfzG8S8JiEY5Fw.png 750w, https://miro.medium.com/v2/resize:fit:786/1*PjfUtsYgWfzG8S8JiEY5Fw.png 786w, https://miro.medium.com/v2/resize:fit:828/1*PjfUtsYgWfzG8S8JiEY5Fw.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*PjfUtsYgWfzG8S8JiEY5Fw.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*PjfUtsYgWfzG8S8JiEY5Fw.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="363" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for adding a light above the selected
point`</figcaption>`{=html}`</figure>`{=html}`<p id="d3c1" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We
take the position of the
`<strong class="nq gu">`{=html}selectedPoint`</strong>`{=html} and add
`<strong class="nq gu">`{=html}0.3`</strong>`{=html} to the z position
to get the light slightly above it. Note we use a \<group\> since we
know we'll be adding another light momentarily. And with that, we get
some extra glowiness to our selected
point:`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl st">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*Gzi9LoEbPK2AUP0J8gNKUA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*Gzi9LoEbPK2AUP0J8gNKUA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*Gzi9LoEbPK2AUP0J8gNKUA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*Gzi9LoEbPK2AUP0J8gNKUA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*Gzi9LoEbPK2AUP0J8gNKUA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*Gzi9LoEbPK2AUP0J8gNKUA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gzi9LoEbPK2AUP0J8gNKUA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*Gzi9LoEbPK2AUP0J8gNKUA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*Gzi9LoEbPK2AUP0J8gNKUA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*Gzi9LoEbPK2AUP0J8gNKUA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*Gzi9LoEbPK2AUP0J8gNKUA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*Gzi9LoEbPK2AUP0J8gNKUA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*Gzi9LoEbPK2AUP0J8gNKUA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*Gzi9LoEbPK2AUP0J8gNKUA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="374" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Screenshot
with a light above the selected
point`</figcaption>`{=html}`</figure>`{=html}`<p id="6fac" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Ooo
not bad, not bad. But we can go further! And go further we shall. Let's
add a light around the point that lights up those adjacent to it. To do
this, we add another \<pointLight\> with a bigger radius and place it
right in the middle of the
object.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sm">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*r6yMmpF-CsmQpi_BYFqYUQ.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*r6yMmpF-CsmQpi_BYFqYUQ.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*r6yMmpF-CsmQpi_BYFqYUQ.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*r6yMmpF-CsmQpi_BYFqYUQ.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*r6yMmpF-CsmQpi_BYFqYUQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*r6yMmpF-CsmQpi_BYFqYUQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r6yMmpF-CsmQpi_BYFqYUQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*r6yMmpF-CsmQpi_BYFqYUQ.png 640w, https://miro.medium.com/v2/resize:fit:720/1*r6yMmpF-CsmQpi_BYFqYUQ.png 720w, https://miro.medium.com/v2/resize:fit:750/1*r6yMmpF-CsmQpi_BYFqYUQ.png 750w, https://miro.medium.com/v2/resize:fit:786/1*r6yMmpF-CsmQpi_BYFqYUQ.png 786w, https://miro.medium.com/v2/resize:fit:828/1*r6yMmpF-CsmQpi_BYFqYUQ.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*r6yMmpF-CsmQpi_BYFqYUQ.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*r6yMmpF-CsmQpi_BYFqYUQ.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="381" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for the second light right in the middle of the selected
point`</figcaption>`{=html}`</figure>`{=html}`<p id="dc42" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Again,
I just played around until I found some settings I liked. Here's the
result:`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl su">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*9s1pUwgQVmiYC7toIvWUig.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*9s1pUwgQVmiYC7toIvWUig.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*9s1pUwgQVmiYC7toIvWUig.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*9s1pUwgQVmiYC7toIvWUig.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*9s1pUwgQVmiYC7toIvWUig.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*9s1pUwgQVmiYC7toIvWUig.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9s1pUwgQVmiYC7toIvWUig.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*9s1pUwgQVmiYC7toIvWUig.png 640w, https://miro.medium.com/v2/resize:fit:720/1*9s1pUwgQVmiYC7toIvWUig.png 720w, https://miro.medium.com/v2/resize:fit:750/1*9s1pUwgQVmiYC7toIvWUig.png 750w, https://miro.medium.com/v2/resize:fit:786/1*9s1pUwgQVmiYC7toIvWUig.png 786w, https://miro.medium.com/v2/resize:fit:828/1*9s1pUwgQVmiYC7toIvWUig.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*9s1pUwgQVmiYC7toIvWUig.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*9s1pUwgQVmiYC7toIvWUig.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="423" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Screenshot
after adding the glow and two lights to the selected
point`</figcaption>`{=html}`</figure>`{=html}`<p id="5c44" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Now
we're talking! But if you try switching layouts, you'll see the lights
don't animate with the point. Oops. Nothing free in this world. Since
our point animation is kind of happening behind the scenes, we'll have
to do some trickery to get the lights to update with the
point.`</p>`{=html}`<p id="e1d2" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}First,
we update
`<strong class="nq gu">`{=html}useAnimatedLayout`</strong>`{=html} to
return the spring animation
props.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rr">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*oE6yRDfl0yrACuJPw7Q52A.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*oE6yRDfl0yrACuJPw7Q52A.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*oE6yRDfl0yrACuJPw7Q52A.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*oE6yRDfl0yrACuJPw7Q52A.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*oE6yRDfl0yrACuJPw7Q52A.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*oE6yRDfl0yrACuJPw7Q52A.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oE6yRDfl0yrACuJPw7Q52A.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*oE6yRDfl0yrACuJPw7Q52A.png 640w, https://miro.medium.com/v2/resize:fit:720/1*oE6yRDfl0yrACuJPw7Q52A.png 720w, https://miro.medium.com/v2/resize:fit:750/1*oE6yRDfl0yrACuJPw7Q52A.png 750w, https://miro.medium.com/v2/resize:fit:786/1*oE6yRDfl0yrACuJPw7Q52A.png 786w, https://miro.medium.com/v2/resize:fit:828/1*oE6yRDfl0yrACuJPw7Q52A.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*oE6yRDfl0yrACuJPw7Q52A.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*oE6yRDfl0yrACuJPw7Q52A.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="565" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for useAnimatedLayout now returning animProps from
useSpring`</figcaption>`{=html}`</figure>`{=html}`<p id="839c" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Next,
we need to make our light group animate along with the
points.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sv">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*KfHs2HvHq291dhkyz1P80Q.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*KfHs2HvHq291dhkyz1P80Q.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*KfHs2HvHq291dhkyz1P80Q.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*KfHs2HvHq291dhkyz1P80Q.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*KfHs2HvHq291dhkyz1P80Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*KfHs2HvHq291dhkyz1P80Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KfHs2HvHq291dhkyz1P80Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*KfHs2HvHq291dhkyz1P80Q.png 640w, https://miro.medium.com/v2/resize:fit:720/1*KfHs2HvHq291dhkyz1P80Q.png 720w, https://miro.medium.com/v2/resize:fit:750/1*KfHs2HvHq291dhkyz1P80Q.png 750w, https://miro.medium.com/v2/resize:fit:786/1*KfHs2HvHq291dhkyz1P80Q.png 786w, https://miro.medium.com/v2/resize:fit:828/1*KfHs2HvHq291dhkyz1P80Q.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*KfHs2HvHq291dhkyz1P80Q.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*KfHs2HvHq291dhkyz1P80Q.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="801" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for InstancedPoints updated to animate the light
group`</figcaption>`{=html}`</figure>`{=html}`<p id="c1a5" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}To
do this, we switch from using \<group\> to \<a.group\> with the
`<strong class="nq gu">`{=html}a `</strong>`{=html}from react-spring.
Then we just have it re-read the current (x, y, z) position of the
selected point as the animation runs since we know our spring will be
recomputing it each
tick.`</p>`{=html}`<p id="2385" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}That's
it! Here's the
demo:`</p>`{=html}`<figure class="on oo op oq or nb">`{=html}`<div class="os jj l fi">`{=html}`<div class="rp ou l">`{=html}`</div>`{=html}`</div>`{=html}`</figure>`{=html}`<p id="20d1" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}One
final touch and we'll be
done.`</p>`{=html}`<h1 id="5f1e" class="qb ow gt be ox qc qd qe pa qf qg qh pd qi qj qk ql qm qn qo qp qq qr qs qt qu bj">`{=html}Step
8 --- Finishing Touch: Resetting the
Camera`</h1>`{=html}`<p id="3458" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}`<em class="qv">`{=html}(`</em>`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-8-y5nrg" rel="noopener ugc nofollow" target="_blank">`{=html}`<em class="qv">`{=html}CodeSandbox
for this
step`</em>`{=html}`</a>`{=html}`<em class="qv">`{=html})`</em>`{=html}`</p>`{=html}`<p id="41bf" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}This
is kind of a bonus step, but I find it really helps making the UI less
painful to use. When navigating around with the
`<strong class="nq gu">`{=html}TrackballControls`</strong>`{=html} or
`<strong class="nq gu">`{=html}OrbitControls`</strong>`{=html}, it can
get annoying to get back to a base position. Sometimes you just end up
in some wonky rotation and can't get out, so I like to add in a button
that will reset the camera position. Now there's probably a better way
to do this than the way I'm going to show you, but I didn't know any
better so here it is. We're going to put a button outside of our
`<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html} component
that changes the camera position via
refs.`</p>`{=html}`<p id="6f40" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}First,
let's add the button to the UI via
`<strong class="nq gu">`{=html}App`</strong>`{=html}.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rs">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*KNAXfD5ROF58Cr9BoyeZeg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*KNAXfD5ROF58Cr9BoyeZeg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*KNAXfD5ROF58Cr9BoyeZeg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*KNAXfD5ROF58Cr9BoyeZeg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*KNAXfD5ROF58Cr9BoyeZeg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*KNAXfD5ROF58Cr9BoyeZeg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KNAXfD5ROF58Cr9BoyeZeg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*KNAXfD5ROF58Cr9BoyeZeg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*KNAXfD5ROF58Cr9BoyeZeg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*KNAXfD5ROF58Cr9BoyeZeg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*KNAXfD5ROF58Cr9BoyeZeg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*KNAXfD5ROF58Cr9BoyeZeg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*KNAXfD5ROF58Cr9BoyeZeg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*KNAXfD5ROF58Cr9BoyeZeg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="647" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for \<App /\> updated to have a reset camera
button`</figcaption>`{=html}`</figure>`{=html}`<p id="71e2" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We
add a ref `<strong class="nq gu">`{=html}visRef`</strong>`{=html} to our
`<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}
component, a button and a click handler that tells
`<strong class="nq gu">`{=html}visRef`</strong>`{=html} to reset the
camera.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sw">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*GQS97efuzoyka0r9o3I3Wg.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*GQS97efuzoyka0r9o3I3Wg.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*GQS97efuzoyka0r9o3I3Wg.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*GQS97efuzoyka0r9o3I3Wg.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*GQS97efuzoyka0r9o3I3Wg.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*GQS97efuzoyka0r9o3I3Wg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GQS97efuzoyka0r9o3I3Wg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*GQS97efuzoyka0r9o3I3Wg.png 640w, https://miro.medium.com/v2/resize:fit:720/1*GQS97efuzoyka0r9o3I3Wg.png 720w, https://miro.medium.com/v2/resize:fit:750/1*GQS97efuzoyka0r9o3I3Wg.png 750w, https://miro.medium.com/v2/resize:fit:786/1*GQS97efuzoyka0r9o3I3Wg.png 786w, https://miro.medium.com/v2/resize:fit:828/1*GQS97efuzoyka0r9o3I3Wg.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*GQS97efuzoyka0r9o3I3Wg.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*GQS97efuzoyka0r9o3I3Wg.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="335" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Added
reset camera
button`</figcaption>`{=html}`</figure>`{=html}`<p id="25ae" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Now
we just have to create this resetCamera handler within
`<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}. My
solution here was to use
`<strong class="nq gu">`{=html}useImperativeHandle `</strong>`{=html}and
`<strong class="nq gu">`{=html}forwardRef`</strong>`{=html}, which
pretty much always feels bad, but heyo it works in this
case.`</p>`{=html}`<p id="b222" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Let's
get those refs going down the line. Here we
go!`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl rj">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*e3_WwIjV7ju9EHr5EhNXQA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*e3_WwIjV7ju9EHr5EhNXQA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*e3_WwIjV7ju9EHr5EhNXQA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*e3_WwIjV7ju9EHr5EhNXQA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*e3_WwIjV7ju9EHr5EhNXQA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*e3_WwIjV7ju9EHr5EhNXQA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e3_WwIjV7ju9EHr5EhNXQA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*e3_WwIjV7ju9EHr5EhNXQA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*e3_WwIjV7ju9EHr5EhNXQA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*e3_WwIjV7ju9EHr5EhNXQA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*e3_WwIjV7ju9EHr5EhNXQA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*e3_WwIjV7ju9EHr5EhNXQA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*e3_WwIjV7ju9EHr5EhNXQA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*e3_WwIjV7ju9EHr5EhNXQA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="485" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for ThreePointVis with forwardRef and
useImperativeHandle`</figcaption>`{=html}`</figure>`{=html}`<p id="8371" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}First
we update `<strong class="nq gu">`{=html}ThreePointVis`</strong>`{=html}
to have a resetCamera function that it passes through to the
`<strong class="nq gu">`{=html}Controls`</strong>`{=html} component via
`<strong class="nq gu">`{=html}controlsRef`</strong>`{=html}.`</p>`{=html}`<figure class="on oo op oq or nb nk nl paragraph-image">`{=html}`<div role="button" tabindex="0" class="rf rg fi rh bg ri">`{=html}`<div class="nk nl sx">`{=html}`<picture>`{=html}`<source srcSet="https://miro.medium.com/v2/resize:fit:640/format:webp/1*UmIbogI6tmHW3ZQDgIDelA.png 640w, https://miro.medium.com/v2/resize:fit:720/format:webp/1*UmIbogI6tmHW3ZQDgIDelA.png 720w, https://miro.medium.com/v2/resize:fit:750/format:webp/1*UmIbogI6tmHW3ZQDgIDelA.png 750w, https://miro.medium.com/v2/resize:fit:786/format:webp/1*UmIbogI6tmHW3ZQDgIDelA.png 786w, https://miro.medium.com/v2/resize:fit:828/format:webp/1*UmIbogI6tmHW3ZQDgIDelA.png 828w, https://miro.medium.com/v2/resize:fit:1100/format:webp/1*UmIbogI6tmHW3ZQDgIDelA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UmIbogI6tmHW3ZQDgIDelA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px" type="image/webp"/>`{=html}`<source data-testid="og" srcSet="https://miro.medium.com/v2/resize:fit:640/1*UmIbogI6tmHW3ZQDgIDelA.png 640w, https://miro.medium.com/v2/resize:fit:720/1*UmIbogI6tmHW3ZQDgIDelA.png 720w, https://miro.medium.com/v2/resize:fit:750/1*UmIbogI6tmHW3ZQDgIDelA.png 750w, https://miro.medium.com/v2/resize:fit:786/1*UmIbogI6tmHW3ZQDgIDelA.png 786w, https://miro.medium.com/v2/resize:fit:828/1*UmIbogI6tmHW3ZQDgIDelA.png 828w, https://miro.medium.com/v2/resize:fit:1100/1*UmIbogI6tmHW3ZQDgIDelA.png 1100w, https://miro.medium.com/v2/resize:fit:1400/1*UmIbogI6tmHW3ZQDgIDelA.png 1400w" sizes="(min-resolution: 4dppx) and (max-width: 700px) 50vw, (-webkit-min-device-pixel-ratio: 4) and (max-width: 700px) 50vw, (min-resolution: 3dppx) and (max-width: 700px) 67vw, (-webkit-min-device-pixel-ratio: 3) and (max-width: 700px) 65vw, (min-resolution: 2.5dppx) and (max-width: 700px) 80vw, (-webkit-min-device-pixel-ratio: 2.5) and (max-width: 700px) 80vw, (min-resolution: 2dppx) and (max-width: 700px) 100vw, (-webkit-min-device-pixel-ratio: 2) and (max-width: 700px) 100vw, 700px"/>`{=html}`<img alt="" class="bg mi nh c" width="700" height="770" loading="lazy" role="presentation"/>`{=html}`</picture>`{=html}`</div>`{=html}`</div>`{=html}`<figcaption class="ni fe nj nk nl nm nn be b bf z dt">`{=html}Code
for \<Controls /\> that uses forwardRef and
useImperativeHandle`</figcaption>`{=html}`</figure>`{=html}`<p id="2e75" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}We
do similar things to the
`<strong class="nq gu">`{=html}Controls`</strong>`{=html} component
except here is where we have access to the
`<strong class="nq gu">`{=html}camera`</strong>`{=html} and
`<strong class="nq gu">`{=html}controls`</strong>`{=html} object to do
the actual resetting. A few important things to
note:`</p>`{=html}`<ul class="">`{=html}`<li id="54e1" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}We
set the `<strong class="nq gu">`{=html}target`</strong>`{=html} of
`<strong class="nq gu">`{=html}controls`</strong>`{=html} back to the
origin (0, 0, 0). This is where the camera will orbit around and is the
center of the
screen.`</li>`{=html}`<li id="d8e4" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}We
reset the `<strong class="nq gu">`{=html}camera
position`</strong>`{=html} back to our original (0, 0, 80) coordinates.
We could use a prop for this, but this is good enough for our
purposes.`</li>`{=html}`<li id="6b76" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}Since
we're using
`<strong class="nq gu">`{=html}TrackballControls`</strong>`{=html}, we
need to also reset the `<strong class="nq gu">`{=html}up
`</strong>`{=html}vector of the
`<strong class="nq gu">`{=html}camera`</strong>`{=html}. Conveniently,
this is stored as `<strong class="nq gu">`{=html}up0`</strong>`{=html}
on `<strong class="nq gu">`{=html}controls`</strong>`{=html}, so we copy
it
over.`</li>`{=html}`<li id="1c96" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}Lastly,
we indirectly call
`<strong class="nq gu">`{=html}controls.update`</strong>`{=html} via our
`<strong class="nq gu">`{=html}useFrame`</strong>`{=html} hook which
updates the
view.`</li>`{=html}`</ul>`{=html}`<p id="e725" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}In
my hack-week project I used animation to tween back to the original
position, but I'll leave that as an exercise for the reader. This was
the last step in our tour through the world of 3D.
Hallelujah.`</p>`{=html}`<figure class="on oo op oq or nb">`{=html}`<div class="os jj l fi">`{=html}`<div class="rp ou l">`{=html}`</div>`{=html}`</div>`{=html}`</figure>`{=html}`<h1 id="fb73" class="qb ow gt be ox qc qd qe pa qf qg qh pd qi qj qk ql qm qn qo qp qq qr qs qt qu bj">`{=html}Please
Say This is The
End`</h1>`{=html}`<p id="9623" class="pw-post-body-paragraph no np gt nq b nr po nt nu nv pp nx ny nz pq ob oc od pr of og oh ps oj ok ol gm bj">`{=html}Holy
smokes, we did it!! Thanks for reading, and congratulations for making
it this far. If you've got any questions or comments about this post
please feel free to reach out to me on Twitter
`<a class="af om" href="https://twitter.com/pbesh" rel="noopener ugc nofollow" target="_blank">`{=html}\@pbesh`</a>`{=html}
any
time.`</p>`{=html}`<ul class="">`{=html}`<li id="9f70" class="no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="https://github.com/CorticoAI/3d-react-demo" rel="noopener ugc nofollow" target="_blank">`{=html}`<strong class="nq gu">`{=html}Final
Source Code on
GitHub`</strong>`{=html}`</a>`{=html}`</li>`{=html}`<li id="7896" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="https://corticoai.github.io/3d-react-demo/" rel="noopener ugc nofollow" target="_blank">`{=html}`<strong class="nq gu">`{=html}Final
Demo`</strong>`{=html}`</a>`{=html}`</li>`{=html}`<li id="1ff1" class="no np gt nq b nr pw nt nu nv px nx ny nz py ob oc od pz of og oh qa oj ok ol pt pu pv bj">`{=html}`<a class="af om" href="https://codesandbox.io/s/r3f-demo-7-y5nrg?fontsize=14&amp;hidenavigation=1&amp;theme=dark" rel="noopener ugc nofollow" target="_blank">`{=html}Final
CodeSandbox`</a>`{=html}`</li>`{=html}`</ul>`{=html}`<p id="6b68" class="pw-post-body-paragraph no np gt nq b nr ns nt nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol gm bj">`{=html}Best
of luck in the wonderful world of
3D!`</p>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</section>`{=html}`</div>`{=html}`</div>`{=html}`</article>`{=html}`<div class="ab ca">`{=html}`<div class="ch bg fy fz ga gb">`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="ab ca">`{=html}`<div class="ch bg fy fz ga gb">`{=html}`<div class="sy sz ab je">`{=html}`<div class="ta ab">`{=html}`<a class="tb ax am ao" rel="noopener follow" href="/tag/data-visualization?source=post_page-----7272fb6de432---------------data_visualization-----------------">`{=html}`<div class="tc fi cw td gd te tf be b bf z bj tg">`{=html}Data
Visualization`</div>`{=html}`</a>`{=html}`</div>`{=html}`<div class="ta ab">`{=html}`<a class="tb ax am ao" rel="noopener follow" href="/tag/react?source=post_page-----7272fb6de432---------------react-----------------">`{=html}`<div class="tc fi cw td gd te tf be b bf z bj tg">`{=html}React`</div>`{=html}`</a>`{=html}`</div>`{=html}`<div class="ta ab">`{=html}`<a class="tb ax am ao" rel="noopener follow" href="/tag/threejs?source=post_page-----7272fb6de432---------------threejs-----------------">`{=html}`<div class="tc fi cw td gd te tf be b bf z bj tg">`{=html}Threejs`</div>`{=html}`</a>`{=html}`</div>`{=html}`<div class="ta ab">`{=html}`<a class="tb ax am ao" rel="noopener follow" href="/tag/3d?source=post_page-----7272fb6de432---------------3d-----------------">`{=html}`<div class="tc fi cw td gd te tf be b bf z bj tg">`{=html}3d`</div>`{=html}`</a>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="l">`{=html}`</div>`{=html}`<footer class="th ti tj tk tl tm tn to tp ab q tq io c">`{=html}`<div class="l ae">`{=html}`<div class="ab ca">`{=html}`<div class="ch bg fy fz ga gb">`{=html}`<div class="ab co tr">`{=html}`<div class="ab q kz">`{=html}`<div class="ts l">`{=html}`<span class="l tt tu tv e d">`{=html}`<div class="ab q kz la">`{=html}`<div class="pw-multi-vote-icon fi ji lb lc ld">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fcortico%2F7272fb6de432&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;user=Peter+Beshai&amp;userId=94b947609777&amp;source=-----7272fb6de432---------------------clap_footer-----------">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<div class="le ao lf lg lh li am lj lk ll ld">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap">`{=html}`<path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z">`{=html}`</path>`{=html}`</svg>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</a>`{=html}`</span>`{=html}`</div>`{=html}`<div class="pw-multi-vote-count l lm ln lo lp lq lr ls">`{=html}`<p class="be b du z dt">`{=html}`<span class="lt">`{=html}\--`</span>`{=html}`</p>`{=html}`</div>`{=html}`</div>`{=html}`</span>`{=html}`<span class="l h g f tw tx">`{=html}`<div class="ab q kz la">`{=html}`<div class="pw-multi-vote-icon fi ji lb lc ld">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerClapButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fvote%2Fcortico%2F7272fb6de432&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;user=Peter+Beshai&amp;userId=94b947609777&amp;source=-----7272fb6de432---------------------clap_footer-----------">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<div class="le ao lf lg lh li am lj lk ll ld">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" aria-label="clap">`{=html}`<path fill-rule="evenodd" clip-rule="evenodd" d="M11.37.83L12 3.28l.63-2.45h-1.26zM13.92 3.95l1.52-2.1-1.18-.4-.34 2.5zM8.59 1.84l1.52 2.11-.34-2.5-1.18.4zM18.52 18.92a4.23 4.23 0 0 1-2.62 1.33l.41-.37c2.39-2.4 2.86-4.95 1.4-7.63l-.91-1.6-.8-1.67c-.25-.56-.19-.98.21-1.29a.7.7 0 0 1 .55-.13c.28.05.54.23.72.5l2.37 4.16c.97 1.62 1.14 4.23-1.33 6.7zm-11-.44l-4.15-4.15a.83.83 0 0 1 1.17-1.17l2.16 2.16a.37.37 0 0 0 .51-.52l-2.15-2.16L3.6 11.2a.83.83 0 0 1 1.17-1.17l3.43 3.44a.36.36 0 0 0 .52 0 .36.36 0 0 0 0-.52L5.29 9.51l-.97-.97a.83.83 0 0 1 0-1.16.84.84 0 0 1 1.17 0l.97.97 3.44 3.43a.36.36 0 0 0 .51 0 .37.37 0 0 0 0-.52L6.98 7.83a.82.82 0 0 1-.18-.9.82.82 0 0 1 .76-.51c.22 0 .43.09.58.24l5.8 5.79a.37.37 0 0 0 .58-.42L13.4 9.67c-.26-.56-.2-.98.2-1.29a.7.7 0 0 1 .55-.13c.28.05.55.23.73.5l2.2 3.86c1.3 2.38.87 4.59-1.29 6.75a4.65 4.65 0 0 1-4.19 1.37 7.73 7.73 0 0 1-4.07-2.25zm3.23-12.5l2.12 2.11c-.41.5-.47 1.17-.13 1.9l.22.46-3.52-3.53a.81.81 0 0 1-.1-.36c0-.23.09-.43.24-.59a.85.85 0 0 1 1.17 0zm7.36 1.7a1.86 1.86 0 0 0-1.23-.84 1.44 1.44 0 0 0-1.12.27c-.3.24-.5.55-.58.89-.25-.25-.57-.4-.91-.47-.28-.04-.56 0-.82.1l-2.18-2.18a1.56 1.56 0 0 0-2.2 0c-.2.2-.33.44-.4.7a1.56 1.56 0 0 0-2.63.75 1.6 1.6 0 0 0-2.23-.04 1.56 1.56 0 0 0 0 2.2c-.24.1-.5.24-.72.45a1.56 1.56 0 0 0 0 2.2l.52.52a1.56 1.56 0 0 0-.75 2.61L7 19a8.46 8.46 0 0 0 4.48 2.45 5.18 5.18 0 0 0 3.36-.5 4.89 4.89 0 0 0 4.2-1.51c2.75-2.77 2.54-5.74 1.43-7.59L18.1 7.68z">`{=html}`</path>`{=html}`</svg>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</a>`{=html}`</span>`{=html}`</div>`{=html}`<div class="pw-multi-vote-count l lm ln lo lp lq lr ls">`{=html}`<p class="be b du z dt">`{=html}`<span class="lt">`{=html}\--`</span>`{=html}`</p>`{=html}`</div>`{=html}`</div>`{=html}`</span>`{=html}`</div>`{=html}`<div class="bp ab">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<button class="ao le lw lx ab q fj ly lz" aria-label="responses">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" class="lv">`{=html}`<path d="M18 16.8a7.14 7.14 0 0 0 2.24-5.32c0-4.12-3.53-7.48-8.05-7.48C7.67 4 4 7.36 4 11.48c0 4.13 3.67 7.48 8.2 7.48a8.9 8.9 0 0 0 2.38-.32c.23.2.48.39.75.56 1.06.69 2.2 1.04 3.4 1.04.22 0 .4-.11.48-.29a.5.5 0 0 0-.04-.52 6.4 6.4 0 0 1-1.16-2.65v.02zm-3.12 1.06l-.06-.22-.32.1a8 8 0 0 1-2.3.33c-4.03 0-7.3-2.96-7.3-6.59S8.17 4.9 12.2 4.9c4 0 7.1 2.96 7.1 6.6 0 1.8-.6 3.47-2.02 4.72l-.2.16v.26l.02.3a6.74 6.74 0 0 0 .88 2.4 5.27 5.27 0 0 1-2.17-.86c-.28-.17-.72-.38-.94-.59l.01-.02z">`{=html}`</path>`{=html}`</svg>`{=html}`<p class="be b bf z dt">`{=html}`<span class="pw-responses-count lu lv">`{=html}2`</span>`{=html}`</p>`{=html}`</button>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="ab q">`{=html}`<div class="ty l jb">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" data-testid="footerBookmarkButton" rel="noopener follow" href="/m/signin?actionUrl=https%3A%2F%2Fmedium.com%2F_%2Fbookmark%2Fp%2F7272fb6de432&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;source=--------------------------bookmark_footer-----------">`{=html}`<svg width="25" height="25" viewBox="0 0 25 25" fill="none" class="dt mb" aria-label="Add to list bookmark button">`{=html}`<path d="M18 2.5a.5.5 0 0 1 1 0V5h2.5a.5.5 0 0 1 0 1H19v2.5a.5.5 0 1 1-1 0V6h-2.5a.5.5 0 0 1 0-1H18V2.5zM7 7a1 1 0 0 1 1-1h3.5a.5.5 0 0 0 0-1H8a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4V7z" fill="currentColor">`{=html}`</path>`{=html}`</svg>`{=html}`</a>`{=html}`</span>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="ty l jb">`{=html}`<div class="bl" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="footerSocialShareButton" class="af fj ah ai aj ak al mj an ao ap ew mk ml lz mm">`{=html}`<svg width="24" height="24" viewBox="0 0 24 24" fill="none">`{=html}`<path fill-rule="evenodd" clip-rule="evenodd" d="M15.22 4.93a.42.42 0 0 1-.12.13h.01a.45.45 0 0 1-.29.08.52.52 0 0 1-.3-.13L12.5 3v7.07a.5.5 0 0 1-.5.5.5.5 0 0 1-.5-.5V3.02l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.8a.42.42 0 0 1 .07.5zm-.1.14zm.88 2h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11a2 2 0 0 1-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.14c.1.1.15.22.15.35a.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9V8.96c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1z" fill="currentColor">`{=html}`</path>`{=html}`</svg>`{=html}`</button>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</footer>`{=html}`<div class="tz ua ub uc ud l bw">`{=html}`<div class="ab ca">`{=html}`<div class="ch bg fy fz ga gb">`{=html}`<div class="ck ab ue co">`{=html}`<div class="ab ie">`{=html}`<a rel="noopener follow" href="/@pbesh?source=post_page-----7272fb6de432--------------------------------">`{=html}`<div class="l uf ug bx uh ii">`{=html}`<div class="l fi">`{=html}`<img alt="Peter Beshai" class="l fc bx ui uj cw" src="https://miro.medium.com/v2/resize:fill:144:144/1*S58noheRzWOAjDomF-9jmA.jpeg" width="72" height="72" loading="lazy"/>`{=html}`<div class="ij bx l ui uj fr n ik fs">`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</a>`{=html}`<a href="https://medium.com/cortico?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<div class="uk ab fi">`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<div class="l ul um bx uh io">`{=html}`<div class="l fi">`{=html}`<img alt="Cortico" class="l fc bx by bz cw" src="https://miro.medium.com/v2/resize:fill:64:64/1*gslGVpbqijjDxcDqK5AYpw.jpeg" width="32" height="32" loading="lazy"/>`{=html}`<div class="ij bx l by bz fr n ik fs">`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</a>`{=html}`</div>`{=html}`<div class="j i d">`{=html}`<div class="ab">`{=html}`<span>`{=html}`<button class="be b bf z un tc uo up uq ur us eu ev ut uu uv ez uw fa fb fc bl fd fe">`{=html}Follow`</button>`{=html}`</span>`{=html}`<div class="ds l">`{=html}`<div>`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<div class="l">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc2e7490761e9&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;newsletterV3=94b947609777&amp;newsletterV3Id=c2e7490761e9&amp;user=Peter+Beshai&amp;userId=94b947609777&amp;source=-----7272fb6de432---------------------subscribe_user-----------">`{=html}`<button class="be b bf z uy am uz ra va vb vc vd ve vf ev ut uu uv ez fa fb fc bl fd fe" aria-label="Subscribe">`{=html}`<svg width="38" height="38" viewBox="0 0 38 38" fill="none" class="ux um ul">`{=html}`<rect x="26.25" y="9.25" width="0.5" height="6.5" rx="0.25">`{=html}`</rect>`{=html}`<rect x="29.75" y="12.25" width="0.5" height="6.5" rx="0.25" transform="rotate(90 29.75 12.25)">`{=html}`</rect>`{=html}`<path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5">`{=html}`</path>`{=html}`<path d="M11.5 14.5L19 20l4-3">`{=html}`</path>`{=html}`</svg>`{=html}`</button>`{=html}`</a>`{=html}`</span>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="ab cm co">`{=html}`<div class="l">`{=html}`<div class="ab q">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at ab q" rel="noopener follow" href="/@pbesh?source=post_page-----7272fb6de432--------------------------------">`{=html}`<h2 class="pw-author-name be vg vh vi vj bj">`{=html}`<span class="gm">`{=html}Written
by `<!-- -->`{=html}Peter
Beshai`</span>`{=html}`</h2>`{=html}`</a>`{=html}`</div>`{=html}`<div class="ta ab">`{=html}`<div class="l jb">`{=html}`<span class="pw-follower-count be b bf z bj">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar iu" rel="noopener follow" href="/@pbesh/followers?source=post_page-----7272fb6de432--------------------------------">`{=html}500
Followers`</a>`{=html}`</span>`{=html}`</div>`{=html}`<div class="be b bf z jj jk jl ab jn jo jp jq dt jh">`{=html}`<span class="iv l" aria-hidden="true">`{=html}`<span class="be b bf z dt">`{=html}·`</span>`{=html}`</span>`{=html}`<span class="l jb">`{=html}Writer
for
`</span>`{=html}`<div>`{=html}`<div class="l" aria-hidden="false">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar iu ab q" href="https://medium.com/cortico?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<p class="be b bf z jj jk jl jm jn jo jp jq bj">`{=html}Cortico`</p>`{=html}`</a>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="vk l">`{=html}`<p class="be b bf z bj">`{=html}Director
of Engineering and Design \@Cortico. I enjoy data vis, javascript,
generative art, and user experience design.
`<a class="af ag ah ai aj ak al am an ao ap aq ar om gn" href="http://peterbeshai.com" rel="noopener  ugc nofollow">`{=html}peterbeshai.com`</a>`{=html}`</p>`{=html}`</div>`{=html}`</div>`{=html}`<div class="h k">`{=html}`<div class="ab">`{=html}`<span>`{=html}`<button class="be b bf z un tc uo up uq ur us eu ev ut uu uv ez uw fa fb fc bl fd fe">`{=html}Follow`</button>`{=html}`</span>`{=html}`<div class="ds l">`{=html}`<div>`{=html}`<div>`{=html}`<div class="bl" aria-hidden="false">`{=html}`<div class="l">`{=html}`<span>`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/m/signin?actionUrl=%2F_%2Fapi%2Fsubscriptions%2Fnewsletters%2Fc2e7490761e9&amp;operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2Fcortico%2F3d-data-visualization-with-react-and-three-js-7272fb6de432&amp;newsletterV3=94b947609777&amp;newsletterV3Id=c2e7490761e9&amp;user=Peter+Beshai&amp;userId=94b947609777&amp;source=-----7272fb6de432---------------------subscribe_user-----------">`{=html}`<button class="be b bf z uy am uz ra va vb vc vd ve vf ev ut uu uv ez fa fb fc bl fd fe" aria-label="Subscribe">`{=html}`<svg width="38" height="38" viewBox="0 0 38 38" fill="none" class="ux um ul">`{=html}`<rect x="26.25" y="9.25" width="0.5" height="6.5" rx="0.25">`{=html}`</rect>`{=html}`<rect x="29.75" y="12.25" width="0.5" height="6.5" rx="0.25" transform="rotate(90 29.75 12.25)">`{=html}`</rect>`{=html}`<path d="M19.5 12.5h-7a1 1 0 0 0-1 1v11a1 1 0 0 0 1 1h13a1 1 0 0 0 1-1v-5">`{=html}`</path>`{=html}`<path d="M11.5 14.5L19 20l4-3">`{=html}`</path>`{=html}`</svg>`{=html}`</button>`{=html}`</a>`{=html}`</span>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="vl bg vm nc nd ne nf ng">`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<div class="h k j">`{=html}`<div class="vl bg vm vn">`{=html}`</div>`{=html}`<div class="ab ca">`{=html}`<div class="ch bg fy fz ga gb">`{=html}`<div class="vo ab kz je">`{=html}`<div class="vp vq l">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://help.medium.com/hc/en-us?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<p class="be b du z dt">`{=html}Help`</p>`{=html}`</a>`{=html}`</div>`{=html}`<div class="vp vq l">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://medium.statuspage.io/?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<p class="be b du z dt">`{=html}Status`</p>`{=html}`</a>`{=html}`</div>`{=html}`<div class="vp vq l">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/about?autoplay=1&amp;source=post_page-----7272fb6de432--------------------------------">`{=html}`<p class="be b du z dt">`{=html}About`</p>`{=html}`</a>`{=html}`</div>`{=html}`<div class="vp vq l">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/jobs-at-medium/work-at-medium-959d1a85284e?source=post_page-----7272fb6de432--------------------------------">`{=html}`<p class="be b du z dt">`{=html}Careers`</p>`{=html}`</a>`{=html}`</div>`{=html}`<div class="vp vq l">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://blog.medium.com/?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<p class="be b du z dt">`{=html}Blog`</p>`{=html}`</a>`{=html}`</div>`{=html}`<div class="vp vq l">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-privacy-policy-f03bf92035c9?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<p class="be b du z dt">`{=html}Privacy`</p>`{=html}`</a>`{=html}`</div>`{=html}`<div class="vp vq l">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://policy.medium.com/medium-terms-of-service-9db0094a1e0f?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<p class="be b du z dt">`{=html}Terms`</p>`{=html}`</a>`{=html}`</div>`{=html}`<div class="vp vq l">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" href="https://speechify.com/medium?source=post_page-----7272fb6de432--------------------------------" rel="noopener follow">`{=html}`<p class="be b du z dt">`{=html}Text
to
speech`</p>`{=html}`</a>`{=html}`</div>`{=html}`<div class="vp l">`{=html}`<a class="af ag ah ai aj ak al am an ao ap aq ar as at" rel="noopener follow" href="/business?source=post_page-----7272fb6de432--------------------------------">`{=html}`<p class="be b du z dt">`{=html}Teams`</p>`{=html}`</a>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`</div>`{=html}`<script>`{=html}window.**BUILD_ID**=\"main-20240411-221018-a055b2d780\"`</script>`{=html}`<script>`{=html}window.**GRAPHQL_URI**
=
\"https://medium.com/*/graphql\"`</script>`{=html}`<script>`{=html}window.**PRELOADED_STATE**
=
{\"algolia\":{\"queries\":{}},\"cache\":{\"experimentGroupSet\":true,\"reason\":\"\",\"group\":\"enabled\",\"tags\":\[\"group-edgeCachePosts\",\"post-7272fb6de432\",\"user-94b947609777\",\"collection-58df2c4fcaa3\"\],\"serverVariantState\":\"44136fa355b3678a1146ad16f7e8649e94fb4fc21fe77e8310c060f61caaff8a\",\"middlewareEnabled\":true,\"cacheStatus\":\"DYNAMIC\",\"shouldUseCache\":true,\"vary\":\[\],\"loHomepageEnabled\":false,\"updatedPostPreviewsEnabled\":false,\"customMocPreviewWeightThreshold\":\"group_2\",\"recommendedTagsQueryEnabled\":false,\"enableLohpWithSearch\":\"control\",\"enableLohpFocused\":\"control\",\"enableMobileLohpShortHero\":\"experiment\",\"enableSpamBuster\":\"control\"},\"client\":{\"hydrated\":false,\"isUs\":false,\"isNativeMedium\":false,\"isSafariMobile\":false,\"isSafari\":false,\"isFirefox\":false,\"routingEntity\":{\"type\":\"DEFAULT\",\"explicit\":false},\"viewerIsBot\":false},\"debug\":{\"requestId\":\"16ee81f7-ee44-4f54-a932-5a40548ff03c\",\"hybridDevServices\":\[\],\"originalSpanCarrier\":{\"ot-tracer-spanid\":\"2b44468b7ffbfb1f\",\"ot-tracer-traceid\":\"5e70d5f0ac48a241\",\"ot-tracer-sampled\":\"true\"}},\"multiVote\":{\"clapsPerPost\":{}},\"navigation\":{\"branch\":{\"show\":null,\"hasRendered\":null,\"blockedByCTA\":false},\"hideGoogleOneTap\":false,\"hasRenderedAlternateUserBanner\":null,\"currentLocation\":\"https:\\u002F\\u002Fmedium.com\\u002Fcortico\\u002F3d-data-visualization-with-react-and-three-js-7272fb6de432\",\"host\":\"medium.com\",\"hostname\":\"medium.com\",\"referrer\":\"\",\"hasSetReferrer\":false,\"susiModal\":{\"step\":null,\"operation\":\"register\"},\"postRead\":false,\"queryString\":\"\",\"currentHash\":\"\"},\"config\":{\"nodeEnv\":\"production\",\"version\":\"main-20240411-221018-a055b2d780\",\"target\":\"production\",\"productName\":\"Medium\",\"publicUrl\":\"https:\\u002F\\u002Fcdn-client.medium.com\\u002Flite\",\"authDomain\":\"medium.com\",\"authGoogleClientId\":\"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com\",\"favicon\":\"production\",\"glyphUrl\":\"https:\\u002F\\u002Fglyph.medium.com\",\"branchKey\":\"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm\",\"algolia\":{\"appId\":\"MQ57UUUQZ2\",\"apiKeySearch\":\"394474ced050e3911ae2249ecc774921\",\"indexPrefix\":\"medium*\",\"host\":\"-dsn.algolia.net\"},\"recaptchaKey\":\"6Lfc37IUAAAAAKGGtC6rLS13R1Hrw_BqADfS1LRk\",\"recaptcha3Key\":\"6Lf8R9wUAAAAABMI_85Wb8melS7Zj6ziuf99Yot5\",\"recaptchaEnterpriseKeyId\":\"6Le-uGgpAAAAAPprRaokM8AKthQ9KNGdoxaGUvVp\",\"datadog\":{\"applicationId\":\"6702d87d-a7e0-42fe-bbcb-95b469547ea0\",\"clientToken\":\"pub853ea8d17ad6821d9f8f11861d23dfed\",\"rumToken\":\"pubf9cc52896502b9413b68ba36fc0c7162\",\"context\":{\"deployment\":{\"target\":\"production\",\"tag\":\"main-20240411-221018-a055b2d780\",\"commit\":\"a055b2d7801abbd87d4878e7f2d1d2bf70d59f70\"}},\"datacenter\":\"us\"},\"googleAnalyticsCode\":\"G-7JY7T788PK\",\"googlePay\":{\"apiVersion\":\"2\",\"apiVersionMinor\":\"0\",\"merchantId\":\"BCR2DN6TV7EMTGBM\",\"merchantName\":\"Medium\",\"instanceMerchantId\":\"13685562959212738550\"},\"applePay\":{\"version\":3},\"signInWallCustomDomainCollectionIds\":\[\"3a8144eabfe3\",\"336d898217ee\",\"61061eb0c96b\",\"138adf9c44c\",\"819cc2aaeee0\"\],\"mediumMastodonDomainName\":\"me.dm\",\"mediumOwnedAndOperatedCollectionIds\":\[\"8a9336e5bb4\",\"b7e45b22fec3\",\"193b68bd4fba\",\"8d6b8a439e32\",\"54c98c43354d\",\"3f6ecf56618\",\"d944778ce714\",\"92d2092dc598\",\"ae2a65f35510\",\"1285ba81cada\",\"544c7006046e\",\"fc8964313712\",\"40187e704f1c\",\"88d9857e584e\",\"7b6769f2748b\",\"bcc38c8f6edf\",\"cef6983b292\",\"cb8577c9149e\",\"444d13b52878\",\"713d7dbc99b0\",\"ef8e90590e66\",\"191186aaafa0\",\"55760f21cdc5\",\"9dc80918cc93\",\"bdc4052bbdba\",\"8ccfed20cbb2\"\],\"tierOneDomains\":\[\"medium.com\",\"thebolditalic.com\",\"arcdigital.media\",\"towardsdatascience.com\",\"uxdesign.cc\",\"codeburst.io\",\"psiloveyou.xyz\",\"writingcooperative.com\",\"entrepreneurshandbook.co\",\"prototypr.io\",\"betterhumans.coach.me\",\"theascent.pub\"\],\"topicsToFollow\":\[\"d61cf867d93f\",\"8a146bc21b28\",\"1eca0103fff3\",\"4d562ee63426\",\"aef1078a3ef5\",\"e15e46793f8d\",\"6158eb913466\",\"55f1c20aba7a\",\"3d18b94f6858\",\"4861fee224fd\",\"63c6f1f93ee\",\"1d98b3a9a871\",\"decb52b64abf\",\"ae5d4995e225\",\"830cded25262\"\],\"topicToTagMappings\":{\"accessibility\":\"accessibility\",\"addiction\":\"addiction\",\"android-development\":\"android-development\",\"art\":\"art\",\"artificial-intelligence\":\"artificial-intelligence\",\"astrology\":\"astrology\",\"basic-income\":\"basic-income\",\"beauty\":\"beauty\",\"biotech\":\"biotech\",\"blockchain\":\"blockchain\",\"books\":\"books\",\"business\":\"business\",\"cannabis\":\"cannabis\",\"cities\":\"cities\",\"climate-change\":\"climate-change\",\"comics\":\"comics\",\"coronavirus\":\"coronavirus\",\"creativity\":\"creativity\",\"cryptocurrency\":\"cryptocurrency\",\"culture\":\"culture\",\"cybersecurity\":\"cybersecurity\",\"data-science\":\"data-science\",\"design\":\"design\",\"digital-life\":\"digital-life\",\"disability\":\"disability\",\"economy\":\"economy\",\"education\":\"education\",\"equality\":\"equality\",\"family\":\"family\",\"feminism\":\"feminism\",\"fiction\":\"fiction\",\"film\":\"film\",\"fitness\":\"fitness\",\"food\":\"food\",\"freelancing\":\"freelancing\",\"future\":\"future\",\"gadgets\":\"gadgets\",\"gaming\":\"gaming\",\"gun-control\":\"gun-control\",\"health\":\"health\",\"history\":\"history\",\"humor\":\"humor\",\"immigration\":\"immigration\",\"ios-development\":\"ios-development\",\"javascript\":\"javascript\",\"justice\":\"justice\",\"language\":\"language\",\"leadership\":\"leadership\",\"lgbtqia\":\"lgbtqia\",\"lifestyle\":\"lifestyle\",\"machine-learning\":\"machine-learning\",\"makers\":\"makers\",\"marketing\":\"marketing\",\"math\":\"math\",\"media\":\"media\",\"mental-health\":\"mental-health\",\"mindfulness\":\"mindfulness\",\"money\":\"money\",\"music\":\"music\",\"neuroscience\":\"neuroscience\",\"nonfiction\":\"nonfiction\",\"outdoors\":\"outdoors\",\"parenting\":\"parenting\",\"pets\":\"pets\",\"philosophy\":\"philosophy\",\"photography\":\"photography\",\"podcasts\":\"podcast\",\"poetry\":\"poetry\",\"politics\":\"politics\",\"privacy\":\"privacy\",\"product-management\":\"product-management\",\"productivity\":\"productivity\",\"programming\":\"programming\",\"psychedelics\":\"psychedelics\",\"psychology\":\"psychology\",\"race\":\"race\",\"relationships\":\"relationships\",\"religion\":\"religion\",\"remote-work\":\"remote-work\",\"san-francisco\":\"san-francisco\",\"science\":\"science\",\"self\":\"self\",\"self-driving-cars\":\"self-driving-cars\",\"sexuality\":\"sexuality\",\"social-media\":\"social-media\",\"society\":\"society\",\"software-engineering\":\"software-engineering\",\"space\":\"space\",\"spirituality\":\"spirituality\",\"sports\":\"sports\",\"startups\":\"startup\",\"style\":\"style\",\"technology\":\"technology\",\"transportation\":\"transportation\",\"travel\":\"travel\",\"true-crime\":\"true-crime\",\"tv\":\"tv\",\"ux\":\"ux\",\"venture-capital\":\"venture-capital\",\"visual-design\":\"visual-design\",\"work\":\"work\",\"world\":\"world\",\"writing\":\"writing\"},\"defaultImages\":{\"avatar\":{\"imageId\":\"1*dmbNkD5D-u45r44go_cf0g.png\",\"height\":150,\"width\":150},\"orgLogo\":{\"imageId\":\"1*OMF3fSqH8t4xBJ9-6oZDZw.png\",\"height\":106,\"width\":545},\"postLogo\":{\"imageId\":\"1*kFrc4tBFM_tCis-2Ic87WA.png\",\"height\":810,\"width\":1440},\"postPreviewImage\":{\"imageId\":\"1*hn4v1tCaJy7cWMyb0bpNpQ.png\",\"height\":386,\"width\":579}},\"collectionStructuredData\":{\"8d6b8a439e32\":{\"name\":\"Elemental\",\"data\":{\"@type\":\"NewsMediaOrganization\",\"ethicsPolicy\":\"https:\\u002F\\u002Fhelp.medium.com\\u002Fhc\\u002Fen-us\\u002Farticles\\u002F360043290473\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\u002F\\u002Fcdn-images-1.medium.com\\u002Fmax\\u002F980\\u002F1*9ygdqoKprhwuTVKUM0DLPA@2x.png\",\"width\":980,\"height\":159}}},\"3f6ecf56618\":{\"name\":\"Forge\",\"data\":{\"@type\":\"NewsMediaOrganization\",\"ethicsPolicy\":\"https:\\u002F\\u002Fhelp.medium.com\\u002Fhc\\u002Fen-us\\u002Farticles\\u002F360043290473\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\u002F\\u002Fcdn-images-1.medium.com\\u002Fmax\\u002F596\\u002F1*uULpIlImcO5TDuBZ6lm7Lg@2x.png\",\"width\":596,\"height\":183}}},\"ae2a65f35510\":{\"name\":\"GEN\",\"data\":{\"@type\":\"NewsMediaOrganization\",\"ethicsPolicy\":\"https:\\u002F\\u002Fhelp.medium.com\\u002Fhc\\u002Fen-us\\u002Farticles\\u002F360043290473\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\u002F\\u002Fmiro.medium.com\\u002Fmax\\u002F264\\u002F1*RdVZMdvfV3YiZTw6mX7yWA.png\",\"width\":264,\"height\":140}}},\"88d9857e584e\":{\"name\":\"LEVEL\",\"data\":{\"@type\":\"NewsMediaOrganization\",\"ethicsPolicy\":\"https:\\u002F\\u002Fhelp.medium.com\\u002Fhc\\u002Fen-us\\u002Farticles\\u002F360043290473\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\u002F\\u002Fmiro.medium.com\\u002Fmax\\u002F540\\u002F1*JqYMhNX6KNNb2UlqGqO2WQ.png\",\"width\":540,\"height\":108}}},\"7b6769f2748b\":{\"name\":\"Marker\",\"data\":{\"@type\":\"NewsMediaOrganization\",\"ethicsPolicy\":\"https:\\u002F\\u002Fhelp.medium.com\\u002Fhc\\u002Fen-us\\u002Farticles\\u002F360043290473\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\u002F\\u002Fcdn-images-1.medium.com\\u002Fmax\\u002F383\\u002F1*haCUs0wF6TgOOvfoY-jEoQ@2x.png\",\"width\":383,\"height\":92}}},\"444d13b52878\":{\"name\":\"OneZero\",\"data\":{\"@type\":\"NewsMediaOrganization\",\"ethicsPolicy\":\"https:\\u002F\\u002Fhelp.medium.com\\u002Fhc\\u002Fen-us\\u002Farticles\\u002F360043290473\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\u002F\\u002Fmiro.medium.com\\u002Fmax\\u002F540\\u002F1*cw32fIqCbRWzwJaoQw6BUg.png\",\"width\":540,\"height\":123}}},\"8ccfed20cbb2\":{\"name\":\"Zora\",\"data\":{\"@type\":\"NewsMediaOrganization\",\"ethicsPolicy\":\"https:\\u002F\\u002Fhelp.medium.com\\u002Fhc\\u002Fen-us\\u002Farticles\\u002F360043290473\",\"logo\":{\"@type\":\"ImageObject\",\"url\":\"https:\\u002F\\u002Fmiro.medium.com\\u002Fmax\\u002F540\\u002F1*tZUQqRcCCZDXjjiZ4bDvgQ.png\",\"width\":540,\"height\":106}}}},\"embeddedPostIds\":{\"coronavirus\":\"cd3010f9d81f\"},\"sharedCdcMessaging\":{\"COVID_APPLICABLE_TAG_SLUGS\":\[\],\"COVID_APPLICABLE_TOPIC_NAMES\":\[\],\"COVID_APPLICABLE_TOPIC_NAMES_FOR_TOPIC_PAGE\":\[\],\"COVID_MESSAGES\":{\"tierA\":{\"text\":\"For
more information on the novel coronavirus and Covid-19, visit
cdc.gov.\",\"markups\":\[{\"start\":66,\"end\":73,\"href\":\"https:\\u002F\\u002Fwww.cdc.gov\\u002Fcoronavirus\\u002F2019-nCoV\"}\]},\"tierB\":{\"text\":\"Anyone
can publish on Medium per our Policies, but we don't fact-check every
story. For more info about the coronavirus, see
cdc.gov.\",\"markups\":\[{\"start\":37,\"end\":45,\"href\":\"https:\\u002F\\u002Fhelp.medium.com\\u002Fhc\\u002Fen-us\\u002Fcategories\\u002F201931128-Policies-Safety\"},{\"start\":125,\"end\":132,\"href\":\"https:\\u002F\\u002Fwww.cdc.gov\\u002Fcoronavirus\\u002F2019-nCoV\"}\]},\"paywall\":{\"text\":\"This
article has been made free for everyone, thanks to Medium Members. For
more information on the novel coronavirus and Covid-19, visit
cdc.gov.\",\"markups\":\[{\"start\":56,\"end\":70,\"href\":\"https:\\u002F\\u002Fmedium.com\\u002Fmembership\"},{\"start\":138,\"end\":145,\"href\":\"https:\\u002F\\u002Fwww.cdc.gov\\u002Fcoronavirus\\u002F2019-nCoV\"}\]},\"unbound\":{\"text\":\"This
article is free for everyone, thanks to Medium Members. For more
information on the novel coronavirus and Covid-19, visit
cdc.gov.\",\"markups\":\[{\"start\":45,\"end\":59,\"href\":\"https:\\u002F\\u002Fmedium.com\\u002Fmembership\"},{\"start\":127,\"end\":134,\"href\":\"https:\\u002F\\u002Fwww.cdc.gov\\u002Fcoronavirus\\u002F2019-nCoV\"}\]}},\"COVID_BANNER_POST_ID_OVERRIDE_WHITELIST\":\[\"3b31a67bff4a\"\]},\"sharedVoteMessaging\":{\"TAGS\":\[\"politics\",\"election-2020\",\"government\",\"us-politics\",\"election\",\"2020-presidential-race\",\"trump\",\"donald-trump\",\"democrats\",\"republicans\",\"congress\",\"republican-party\",\"democratic-party\",\"biden\",\"joe-biden\",\"maga\"\],\"TOPICS\":\[\"politics\",\"election\"\],\"MESSAGE\":{\"text\":\"Find
out more about the U.S. election results
here.\",\"markups\":\[{\"start\":46,\"end\":50,\"href\":\"https:\\u002F\\u002Fcookpolitical.com\\u002F2020-national-popular-vote-tracker\"}\]},\"EXCLUDE_POSTS\":\[\"397ef29e3ca5\"\]},\"embedPostRules\":\[\],\"recircOptions\":{\"v1\":{\"limit\":3},\"v2\":{\"limit\":8}},\"braintreeClientKey\":\"production_zjkj96jm_m56f8fqpf7ngnrd4\",\"braintree\":{\"enabled\":true,\"merchantId\":\"m56f8fqpf7ngnrd4\",\"merchantAccountId\":{\"usd\":\"AMediumCorporation_instant\",\"eur\":\"amediumcorporation_EUR\",\"cad\":\"amediumcorporation_CAD\"},\"publicKey\":\"ds2nn34bg2z7j5gd\",\"braintreeEnvironment\":\"production\",\"dashboardUrl\":\"https:\\u002F\\u002Fwww.braintreegateway.com\\u002Fmerchants\",\"gracePeriodDurationInDays\":14,\"mediumMembershipPlanId\":{\"monthly\":\"ce105f8c57a3\",\"monthlyV2\":\"e8a5e126-792b-4ee6-8fba-d574c1b02fc5\",\"monthlyWithTrial\":\"d5ee3dbe3db8\",\"monthlyPremium\":\"fa741a9b47a2\",\"yearly\":\"a40ad4a43185\",\"yearlyV2\":\"3815d7d6-b8ca-4224-9b8c-182f9047866e\",\"yearlyStaff\":\"d74fb811198a\",\"yearlyWithTrial\":\"b3bc7350e5c7\",\"yearlyPremium\":\"e21bd2c12166\",\"monthlyOneYearFree\":\"e6c0637a-2bad-4171-ab4f-3c268633d83c\",\"monthly25PercentOffFirstYear\":\"235ecc62-0cdb-49ae-9378-726cd21c504b\",\"monthly20PercentOffFirstYear\":\"ba518864-9c13-4a99-91ca-411bf0cac756\",\"monthly15PercentOffFirstYear\":\"594c029b-9f89-43d5-88f8-8173af4e070e\",\"monthly10PercentOffFirstYear\":\"c6c7bc9a-40f2-4b51-8126-e28511d5bdb0\",\"monthlyForStudents\":\"629ebe51-da7d-41fd-8293-34cd2f2030a8\",\"yearlyOneYearFree\":\"78ba7be9-0d9f-4ece-aa3e-b54b826f2bf1\",\"yearly25PercentOffFirstYear\":\"2dbb010d-bb8f-4eeb-ad5c-a08509f42d34\",\"yearly20PercentOffFirstYear\":\"47565488-435b-47f8-bf93-40d5fbe0ebc8\",\"yearly15PercentOffFirstYear\":\"8259809b-0881-47d9-acf7-6c001c7f720f\",\"yearly10PercentOffFirstYear\":\"9dd694fb-96e1-472c-8d9e-3c868d5c1506\",\"yearlyForStudents\":\"e29345ef-ab1c-4234-95c5-70e50fe6bc23\",\"monthlyCad\":\"p52orjkaceei\",\"yearlyCad\":\"h4q9g2up9ktt\"},\"braintreeDiscountId\":{\"oneMonthFree\":\"MONTHS_FREE_01\",\"threeMonthsFree\":\"MONTHS_FREE_03\",\"sixMonthsFree\":\"MONTHS_FREE_06\",\"fiftyPercentOffOneYear\":\"FIFTY_PERCENT_OFF_ONE_YEAR\"},\"3DSecureVersion\":\"2\",\"defaultCurrency\":\"usd\",\"providerPlanIdCurrency\":{\"4ycw\":\"usd\",\"rz3b\":\"usd\",\"3kqm\":\"usd\",\"jzw6\":\"usd\",\"c2q2\":\"usd\",\"nnsw\":\"usd\",\"q8qw\":\"usd\",\"d9y6\":\"usd\",\"fx7w\":\"cad\",\"nwf2\":\"cad\"}},\"paypalClientId\":\"AXj1G4fotC2GE8KzWX9mSxCH1wmPE3nJglf4Z2ig_amnhvlMVX87otaq58niAg9iuLktVNF_1WCMnN7v\",\"paypal\":{\"host\":\"https:\\u002F\\u002Fapi.paypal.com:443\",\"clientMode\":\"production\",\"serverMode\":\"live\",\"webhookId\":\"4G466076A0294510S\",\"monthlyPlan\":{\"planId\":\"P-9WR0658853113943TMU5FDQA\",\"name\":\"Medium
Membership (Monthly) with setup fee\",\"description\":\"Unlimited access
to the best and brightest stories on Medium. Membership billed
monthly.\"},\"yearlyPlan\":{\"planId\":\"P-7N8963881P8875835MU5JOPQ\",\"name\":\"Medium
Membership (Annual) with setup fee\",\"description\":\"Unlimited access
to the best and brightest stories on Medium. Membership billed
annually.\"},\"oneYearGift\":{\"name\":\"Medium Membership (1 Year,
Digital Gift Code)\",\"description\":\"Unlimited access to the best and
brightest stories on Medium. Gift codes can be redeemed at
medium.com\\u002Fredeem.\",\"price\":\"50.00\",\"currency\":\"USD\",\"sku\":\"membership-gift-1-yr\"},\"oldMonthlyPlan\":{\"planId\":\"P-96U02458LM656772MJZUVH2Y\",\"name\":\"Medium
Membership (Monthly)\",\"description\":\"Unlimited access to the best
and brightest stories on Medium. Membership billed
monthly.\"},\"oldYearlyPlan\":{\"planId\":\"P-59P80963JF186412JJZU3SMI\",\"name\":\"Medium
Membership (Annual)\",\"description\":\"Unlimited access to the best and
brightest stories on Medium. Membership billed
annually.\"},\"monthlyPlanWithTrial\":{\"planId\":\"P-66C21969LR178604GJPVKUKY\",\"name\":\"Medium
Membership (Monthly) with setup fee\",\"description\":\"Unlimited access
to the best and brightest stories on Medium. Membership billed
monthly.\"},\"yearlyPlanWithTrial\":{\"planId\":\"P-6XW32684EX226940VKCT2MFA\",\"name\":\"Medium
Membership (Annual) with setup fee\",\"description\":\"Unlimited access
to the best and brightest stories on Medium. Membership billed
annually.\"},\"oldMonthlyPlanNoSetupFee\":{\"planId\":\"P-4N046520HR188054PCJC7LJI\",\"name\":\"Medium
Membership (Monthly)\",\"description\":\"Unlimited access to the best
and brightest stories on Medium. Membership billed
monthly.\"},\"oldYearlyPlanNoSetupFee\":{\"planId\":\"P-7A4913502Y5181304CJEJMXQ\",\"name\":\"Medium
Membership (Annual)\",\"description\":\"Unlimited access to the best and
brightest stories on Medium. Membership billed
annually.\"},\"sdkUrl\":\"https:\\u002F\\u002Fwww.paypal.com\\u002Fsdk\\u002Fjs\"},\"stripePublishableKey\":\"pk_live_7FReX44VnNIInZwrIIx6ghjl\",\"log\":{\"json\":true,\"level\":\"info\"},\"imageUploadMaxSizeMb\":25,\"staffPicks\":{\"title\":\"Staff
Picks\",\"catalogId\":\"c7bc6e1ee00f\"}},\"session\":{\"xsrf\":\"\"}}`</script>`{=html}`<script>`{=html}window.**APOLLO_STATE**
=
{\"ROOT_QUERY\":{\"\_\_typename\":\"Query\",\"viewer\":null,\"isLoggedIn\":false,\"collectionByDomainOrSlug({\"domainOrSlug\":\"cortico\"})\":{\"\_\_ref\":\"Collection:58df2c4fcaa3\"},\"postResult({\"id\":\"7272fb6de432\"})\":{\"\_\_ref\":\"Post:7272fb6de432\"}},\"ImageMetadata:\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"\"},\"Collection:58df2c4fcaa3\":{\"\_\_typename\":\"Collection\",\"id\":\"58df2c4fcaa3\",\"favicon\":{\"\_\_ref\":\"ImageMetadata:\"},\"customStyleSheet\":null,\"colorPalette\":{\"\_\_typename\":\"ColorPalette\",\"highlightSpectrum\":{\"\_\_typename\":\"ColorSpectrum\",\"backgroundColor\":\"#FFFFFFFF\",\"colorPoints\":\[{\"\_\_typename\":\"ColorPoint\",\"color\":\"#FFFFFFFF\",\"point\":0},{\"\_\_typename\":\"ColorPoint\",\"color\":\"#FFE8F3E8\",\"point\":0.1},{\"\_\_typename\":\"ColorPoint\",\"color\":\"#FFE8F3E8\",\"point\":0.2},{\"\_\_typename\":\"ColorPoint\",\"color\":\"#FFD1E7D1\",\"point\":0.6},{\"\_\_typename\":\"ColorPoint\",\"color\":\"#FFA3D0A2\",\"point\":1}\]},\"defaultBackgroundSpectrum\":{\"\_\_typename\":\"ColorSpectrum\",\"backgroundColor\":\"#FFFFFFFF\",\"colorPoints\":\[{\"\_\_typename\":\"ColorPoint\",\"color\":\"#FF1A8917\",\"point\":0},{\"\_\_typename\":\"ColorPoint\",\"color\":\"#FF11800E\",\"point\":0.1},{\"\_\_typename\":\"ColorPoint\",\"color\":\"#FF0F730C\",\"point\":0.2},{\"\_\_typename\":\"ColorPoint\",\"color\":\"#FF095407\",\"point\":1}\]},\"tintBackgroundSpectrum\":null},\"googleAnalyticsId\":null,\"editors\":\[{\"\_\_typename\":\"CollectionMastheadUserItem\",\"user\":{\"\_\_ref\":\"User:8ee2df0609b6\"}},{\"\_\_typename\":\"CollectionMastheadUserItem\",\"user\":{\"\_\_ref\":\"User:3638e9ffcd01\"}}\],\"name\":\"Cortico\",\"avatar\":{\"\_\_ref\":\"ImageMetadata:1*gslGVpbqijjDxcDqK5AYpw.jpeg\"},\"domain\":null,\"slug\":\"cortico\",\"description\":\"Updates
from our public
sphere.\",\"subscriberCount\":194,\"viewerEdge\":{\"\_\_ref\":\"CollectionViewerEdge:collectionId:58df2c4fcaa3-viewerId:lo_f4345b386af9\"},\"twitterUsername\":\"cortico\",\"facebookPageId\":null,\"logo\":{\"\_\_ref\":\"ImageMetadata:1*9V5dXkk0pSMmeoNad9aC1A.png\"}},\"User:8ee2df0609b6\":{\"\_\_typename\":\"User\",\"id\":\"8ee2df0609b6\"},\"User:3638e9ffcd01\":{\"\_\_typename\":\"User\",\"id\":\"3638e9ffcd01\"},\"ImageMetadata:1*gslGVpbqijjDxcDqK5AYpw.jpeg\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*gslGVpbqijjDxcDqK5AYpw.jpeg\"},\"LinkedAccounts:94b947609777\":{\"\_\_typename\":\"LinkedAccounts\",\"mastodon\":null,\"id\":\"94b947609777\"},\"UserViewerEdge:userId:94b947609777-viewerId:lo_f4345b386af9\":{\"\_\_typename\":\"UserViewerEdge\",\"id\":\"userId:94b947609777-viewerId:lo_f4345b386af9\",\"isFollowing\":false,\"isUser\":false,\"isMuting\":false},\"NewsletterV3:c2e7490761e9\":{\"\_\_typename\":\"NewsletterV3\",\"id\":\"c2e7490761e9\",\"type\":\"NEWSLETTER_TYPE_AUTHOR\",\"slug\":\"94b947609777\",\"name\":\"94b947609777\",\"collection\":null,\"user\":{\"\_\_ref\":\"User:94b947609777\"}},\"User:94b947609777\":{\"\_\_typename\":\"User\",\"id\":\"94b947609777\",\"name\":\"Peter
Beshai\",\"username\":\"pbesh\",\"newsletterV3\":{\"\_\_ref\":\"NewsletterV3:c2e7490761e9\"},\"linkedAccounts\":{\"\_\_ref\":\"LinkedAccounts:94b947609777\"},\"isSuspended\":false,\"imageId\":\"1*S58noheRzWOAjDomF-9jmA.jpeg\",\"mediumMemberAt\":0,\"verifications\":{\"\_\_typename\":\"VerifiedInfo\",\"isBookAuthor\":false},\"socialStats\":{\"\_\_typename\":\"SocialStats\",\"followerCount\":500},\"customDomainState\":null,\"hasSubdomain\":false,\"bio\":\"Director
of Engineering and Design \@Cortico. I enjoy data vis, javascript,
generative art, and user experience design.
peterbeshai.com\",\"isPartnerProgramEnrolled\":false,\"viewerEdge\":{\"\_\_ref\":\"UserViewerEdge:userId:94b947609777-viewerId:lo_f4345b386af9\"},\"viewerIsUser\":false,\"postSubscribeMembershipUpsellShownAt\":0,\"allowNotes\":true,\"membership\":null,\"twitterScreenName\":\"pbesh\"},\"Paragraph:afbeda6709c_0\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_0\",\"name\":\"a7f5\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"3D
Data Visualization with React and
Three.js\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*vWLlwO3cFbWse25p1y6E9Q.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*vWLlwO3cFbWse25p1y6E9Q.png\",\"originalHeight\":1230,\"originalWidth\":2424,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_1\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_1\",\"name\":\"a0cb\",\"type\":\"IMG\",\"href\":null,\"layout\":\"FULL_WIDTH\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*vWLlwO3cFbWse25p1y6E9Q.png\"},\"text\":\"Screenshot
of what we're gonna
make\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_2\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_2\",\"name\":\"9b01\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"At
the end of 2019, we had a hack week at Cortico where all of the
technical staff got together to explore new ideas without any
requirements or limitations. I ended up in a small team with NLP expert
Doug Beeferman and one of our technical fellows, Aneesh Naik. They were
going to experiment with new approaches of analyzing our Local Voices
Network conversation data, including applying BERT for semantic
clustering and using DeepMoji to try and explore emotional content. My
role was to build a fun UI to explore the data, which is what we'll
explore
today.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":42,\"end\":49,\"href\":\"https:\\u002F\\u002Fcortico.ai\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":201,\"end\":215,\"href\":\"https:\\u002F\\u002Fwww.dougb.com\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":330,\"end\":350,\"href\":\"https:\\u002F\\u002Flvn.org\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":389,\"end\":393,\"href\":\"https:\\u002F\\u002Fai.googleblog.com\\u002F2018\\u002F11\\u002Fopen-sourcing-bert-state-of-art-pre.html\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":428,\"end\":436,\"href\":\"https:\\u002F\\u002Fdeepmoji.mit.edu\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_3\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_3\",\"name\":\"5ccc\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Here's
what I ended up
making:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"MediaResource:61a4e311993f1396ca629d549da36c61\":{\"\_\_typename\":\"MediaResource\",\"id\":\"61a4e311993f1396ca629d549da36c61\",\"iframeSrc\":\"https:\\u002F\\u002Fcdn.embedly.com\\u002Fwidgets\\u002Fmedia.html?type=text%2Fhtml&key=a19fcc184b9711e1b4764040d3dc5c07&schema=twitter&url=https%3A\\u002F\\u002Ftwitter.com\\u002Fpbesh\\u002Fstatus\\u002F1208451307687817217&image=https%3A\\u002F\\u002Fi.embed.ly\\u002F1\\u002Fimage%3Furl%3Dhttps%253A%252F%252Fpbs.twimg.com%252Fext_tw_video_thumb%252F1208451226460917765%252Fpu%252Fimg%252F16tnPInen51HfIeZ.jpg%26key%3Da19fcc184b9711e1b4764040d3dc5c07\",\"iframeHeight\":281,\"iframeWidth\":500,\"title\":\"Peter
Beshai on
Twitter\"},\"Paragraph:afbeda6709c_4\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_4\",\"name\":\"ae6e\",\"type\":\"IFRAME\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":null,\"text\":\"\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":{\"\_\_typename\":\"Iframe\",\"mediaResource\":{\"\_\_ref\":\"MediaResource:61a4e311993f1396ca629d549da36c61\"}},\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_5\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_5\",\"name\":\"7710\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"In
this post, I'll go over how to create something similar to what I did
using React, Three.js, and react-three-fiber as the magical library
connecting the
two.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":79,\"end\":84,\"href\":\"https:\\u002F\\u002Freactjs.org\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":86,\"end\":94,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":100,\"end\":117,\"href\":\"https:\\u002F\\u002Fgithub.com\\u002Freact-spring\\u002Freact-three-fiber\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_6\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_6\",\"name\":\"70a5\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Table
of
Contents\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_7\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_7\",\"name\":\"39e5\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
1 --- Getting Started
(CodeSandbox)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":24,\"href\":\"#2a39\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":26,\"end\":37,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-1-ljh5l\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_8\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_8\",\"name\":\"ab5a\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
2 --- Rendering the Data Points
(CodeSandbox)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":34,\"href\":\"#30e9\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":36,\"end\":47,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-2-prj0b\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_9\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_9\",\"name\":\"c288\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
3 --- Using InstancedMesh for 100,000 points
(CodeSandbox)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":47,\"href\":\"#40d9\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":49,\"end\":60,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-3-es4ru\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_10\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_10\",\"name\":\"4dd9\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
4 --- Computing Different Layouts
(CodeSandbox)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":36,\"href\":\"#40c2\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":38,\"end\":49,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-4-fhemj\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_11\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_11\",\"name\":\"3092\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
5 --- Animating Positions
(CodeSandbox)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":28,\"href\":\"#08e9\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":30,\"end\":41,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-5-prgpk\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_12\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_12\",\"name\":\"1f7d\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
6 --- Adding Interactivity: Selecting a Point
(CodeSandbox)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":48,\"href\":\"#820b\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":50,\"end\":61,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-6-ffrme\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_13\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_13\",\"name\":\"4602\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
7 --- Bloom: Adding a Glow Effect
(CodeSandbox)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":36,\"href\":\"#70f7\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":38,\"end\":49,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-7-bxx97\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_14\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_14\",\"name\":\"5d27\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
8 --- Finishing Touch: Resetting the Camera
(CodeSandbox)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":46,\"href\":\"#5f1e\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":48,\"end\":59,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-8-y5nrg\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_15\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_15\",\"name\":\"11f7\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Please
Say This is The
End\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":26,\"href\":\"#fb73\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_16\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_16\",\"name\":\"c069\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Quick
Links\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_17\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_17\",\"name\":\"0c7a\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Final
Source Code on
GitHub\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":27,\"href\":\"https:\\u002F\\u002Fgithub.com\\u002FCorticoAI\\u002F3d-react-demo\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_18\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_18\",\"name\":\"14e7\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Final
Demo\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":10,\"href\":\"https:\\u002F\\u002Fcorticoai.github.io\\u002F3d-react-demo\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":0,\"end\":10,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_19\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_19\",\"name\":\"360c\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Final
CodeSandbox\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":17,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-7-y5nrg?fontsize=14&hidenavigation=1&theme=dark\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_20\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_20\",\"name\":\"2a39\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
1 --- Getting
Started\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_21\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_21\",\"name\":\"7290\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"(CodeSandbox
for this
step)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":1,\"end\":26,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-1-ljh5l\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_22\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_22\",\"name\":\"d56f\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"There's
nothing special you have to do to get started that you wouldn't do for
any other React project. For me, that means using
create-react-app.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":129,\"end\":145,\"href\":\"https:\\u002F\\u002Freactjs.org\\u002Fdocs\\u002Fcreate-a-new-react-app.html#create-react-app\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_23\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_23\",\"name\":\"dc6e\",\"type\":\"PRE\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"\$
npx create-react-app r3f-demo\\n\$ cd r3f-demo\\n\$ npm install \--save
react-three-fiber
three\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_24\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_24\",\"name\":\"2da0\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
first thing to do is draw a simple cylinder with some lights and a
trackball controller to move the camera around. This will get all the
basic scaffolding we need to start playing with Three.js in
React-land.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*SaDhHnyThhl1HoJtc82Q-A.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*SaDhHnyThhl1HoJtc82Q-A.png\",\"originalHeight\":856,\"originalWidth\":1276,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_25\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_25\",\"name\":\"7d59\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*SaDhHnyThhl1HoJtc82Q-A.png\"},\"text\":\"End
result of initial
setup\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_26\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_26\",\"name\":\"fe5a\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Just
like any other React app, we're going to be making components to do
this. Let's start with
two:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_27\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_27\",\"name\":\"56ae\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"ThreePointVis
--- The root 3D component with the
Canvas\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":0,\"end\":14,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":47,\"end\":53,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_28\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_28\",\"name\":\"19a5\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Controls
--- The component that allows us to control the camera with the mouse or
trackpad\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":0,\"end\":8,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_29\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_29\",\"name\":\"4a09\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"First,
we'll update App to include our new ThreePointVis
component.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":20,\"end\":23,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":43,\"end\":56,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_30\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_30\",\"name\":\"0c34\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Note:
I'll be using screenshots of code here but will include CodeSandboxes
along the way with full working code at each
step.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":126,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*e6L8GXP6qc2_bWnIv8xLnw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*e6L8GXP6qc2_bWnIv8xLnw.png\",\"originalHeight\":1244,\"originalWidth\":2212,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_31\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_31\",\"name\":\"fe49\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*e6L8GXP6qc2_bWnIv8xLnw.png\"},\"text\":\"Code
for
App.js\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_32\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_32\",\"name\":\"fc45\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Our
initial ThreePointVis will render a cylinder and some lights while also
including Controls to enable us to move the camera
around.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":12,\"end\":25,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":86,\"end\":94,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*4XYOdJXJ2ALcOEVmbCqgDA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*4XYOdJXJ2ALcOEVmbCqgDA.png\",\"originalHeight\":2036,\"originalWidth\":2956,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_33\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_33\",\"name\":\"7383\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*4XYOdJXJ2ALcOEVmbCqgDA.png\"},\"text\":\"Code
for
ThreePointVis.js\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_34\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_34\",\"name\":\"aa93\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Let's
break down what we're seeing here before moving on to
Controls.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":60,\"end\":68,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_35\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_35\",\"name\":\"4ee0\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"First,
we have a Canvas component which is the base component we need to use
react-three-fiber. It takes a few props but we'll only specify the
camera here to keep it simple. You'll note that since we're in 3D, all
positions will take a three dimensional tuple: \[x, y, z\] (ooOOooOoo z,
fancy), so to place the camera away from our cylinder, we can place it
at (0, 0, 5) or 5 "units" away from the origin on the Z axis. These
units don't correspond to pixels or other standard units of measure,
they just specify a position in the arbitrary coordinate space we'll be
building our vis in. The middle of the screen, by default, is at (0, 0,
0).\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":262,\"end\":271,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":17,\"end\":23,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":283,\"end\":284,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":283,\"end\":284,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":285,\"end\":291,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":411,\"end\":412,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_36\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_36\",\"name\":\"0602\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Next,
we add a few lights with simple props specifying their colors and how
bright they are. You can read about AmbientLight and HemisphereLight in
the Three documentation. Be careful to note that the initial letter in
these tags is lowercase: \\u003ChemisphereLight\\u003E not
\\u003CHemisphereLight\\u003E--- they won't work otherwise (and same for
all Three components when using react-three-fiber). In the world of 3D,
we need lights or we won't be able to see anything, so don't forget
them!\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":112,\"end\":124,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#api\\u002Fen\\u002Flights\\u002FAmbientLight\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":129,\"end\":144,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#api\\u002Fen\\u002Flights\\u002FHemisphereLight\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":233,\"end\":242,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":245,\"end\":246,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_37\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_37\",\"name\":\"a98c\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Finally
we create a cylinder object in our scene through the use of a
\\u003Cmesh\\u003E containing a geometry and a material. You'll see that
we apply positional transformations at the \\u003Cmesh\\u003E level, not
to the geometry itself, something I always mix up. As with the lights,
you can find details about all available parameters in the Three docs:
Mesh, CylinderBufferGeometry, MeshStandardMaterial. I'll point out two
important
parts:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":334,\"end\":338,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#api\\u002Fen\\u002Fobjects\\u002FMesh\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":340,\"end\":362,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#api\\u002Fen\\u002Fgeometries\\u002FCylinderBufferGeometry\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":364,\"end\":384,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#api\\u002Fen\\u002Fmaterials\\u002FMeshStandardMaterial\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_38\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_38\",\"name\":\"7d2d\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
args prop corresponds to what is provided to the constructor of these
objects. For CylinderBufferGeometry, this means we are specifying
radiusTop (0.5), radiusBottom (0.5), height (0.15), and radialSegments
(32).\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":4,\"end\":8,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":87,\"end\":109,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":140,\"end\":149,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":157,\"end\":169,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":177,\"end\":183,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":196,\"end\":210,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_39\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_39\",\"name\":\"e62c\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
attach prop specifies how these children components should be connected
to their parent (the mesh in this case). See the react-three-fiber docs
for more
info.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":125,\"end\":142,\"href\":\"https:\\u002F\\u002Fgithub.com\\u002Freact-spring\\u002Freact-three-fiber#shortcuts-and-non-object3d-stow-away\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":4,\"end\":11,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_40\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_40\",\"name\":\"1de8\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Lastly,
we add Controls to get some mouse control of the visualization. Most
commonly this is OrbitControls, but here I've opted for
TrackballControls, which I liked better for this UI after trying both.
(For an example of a similar data vis using OrbitControls see my NBA 3D
experimental
app).\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":94,\"end\":107,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#examples\\u002Fen\\u002Fcontrols\\u002FOrbitControls\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":133,\"end\":150,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#examples\\u002Fen\\u002Fcontrols\\u002FTrackballControls\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":269,\"end\":292,\"href\":\"http:\\u002F\\u002Fnba3d.peterbeshai.com\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":15,\"end\":23,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":248,\"end\":261,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*NNH_eZedbnPdnaD5sO2DTg.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*NNH_eZedbnPdnaD5sO2DTg.png\",\"originalHeight\":3332,\"originalWidth\":3020,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_41\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_41\",\"name\":\"a7ea\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*NNH_eZedbnPdnaD5sO2DTg.png\"},\"text\":\"Code
for
Controls.js\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_42\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_42\",\"name\":\"f64b\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"A
couple things to note about this
code:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_43\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_43\",\"name\":\"775a\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
are using TrackballControls which lives in the examples directory in
Three, so we have to extend() Three to include it for it to work with
react-three-fiber.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":93,\"end\":101,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":13,\"end\":30,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":50,\"end\":58,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_44\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_44\",\"name\":\"93af\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
need to use the useFrame() hook to have the camera update every frame
based on the state of the
controls.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":19,\"end\":29,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_45\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_45\",\"name\":\"0eaf\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"I've
overridden default behavior to have left-click pan instead of rotate
since I want it to act like a slippy map. Two finger drag or
alt\\u002Foption drag will rotate on a
trackpad.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_46\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_46\",\"name\":\"c0c1\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
dynamicDampingFactor gives the controls some momentum and makes it feel
a bit more
natural.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":4,\"end\":24,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_47\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_47\",\"name\":\"85fd\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"With
all these components set up, we have a little playground with a 3D
cylinder ready to build out. Let's check it
out!\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"MediaResource:de38577a0487917dc22c1bf274fc3524\":{\"\_\_typename\":\"MediaResource\",\"id\":\"de38577a0487917dc22c1bf274fc3524\",\"iframeSrc\":\"https:\\u002F\\u002Fcdn.embedly.com\\u002Fwidgets\\u002Fmedia.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fljh5l&display_name=CodeSandbox&url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fljh5l&image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fljh5l%2Fscreenshot.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=codesandbox\",\"iframeHeight\":500,\"iframeWidth\":1000,\"title\":\"r3f-demo-1\"},\"Paragraph:afbeda6709c_48\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_48\",\"name\":\"8abc\",\"type\":\"IFRAME\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":null,\"text\":\"CodeSandbox
demo of initial set
up\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":{\"\_\_typename\":\"Iframe\",\"mediaResource\":{\"\_\_ref\":\"MediaResource:de38577a0487917dc22c1bf274fc3524\"}},\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_49\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_49\",\"name\":\"30e9\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
2 --- Rendering the Data
Points\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_50\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_50\",\"name\":\"06fc\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"(CodeSandbox
for this
step)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":1,\"end\":26,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-2-prj0b\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_51\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_51\",\"name\":\"f171\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Now
that we have the basic structure of our app in place, let's generate
some data and render it on screen. Our goal will be to have a little
cylinder for each data
point.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*E-cAYgG7Y3ki_ZsFJ57xvw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*E-cAYgG7Y3ki_ZsFJ57xvw.png\",\"originalHeight\":766,\"originalWidth\":1298,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_52\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_52\",\"name\":\"3045\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*E-cAYgG7Y3ki_ZsFJ57xvw.png\"},\"text\":\"End
result of step
2\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_53\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_53\",\"name\":\"1027\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"First,
we generate the data (or you could load your own!) and pass it as a prop
to our vis component. We'll start with 1000 data points, of the
form\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_54\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_54\",\"name\":\"a2ff\",\"type\":\"PRE\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"\[{
id: 0 }, { id: 1 }, { id: 2 }, \..., { id: 999
}\]\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png\",\"originalHeight\":1388,\"originalWidth\":2348,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_55\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_55\",\"name\":\"99f4\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*Wg-wNVe5PqWZ8Xnhj5wBEQ.png\"},\"text\":\"Code
for App.js with generated
data\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_56\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_56\",\"name\":\"dc90\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Nothing
too fancy there, just normal React things. Now, over in the
ThreePointVis component, we need to render a cylinder for each point, so
we'll map over the data prop and return a mesh for each entry. We'll
also move the camera back to 40 on the Z-axis so we can see the
data.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":68,\"end\":82,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":160,\"end\":164,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":239,\"end\":241,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*UQK83GzPbO_440PNjhiTfA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*UQK83GzPbO_440PNjhiTfA.png\",\"originalHeight\":2108,\"originalWidth\":2516,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_57\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_57\",\"name\":\"e456\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*UQK83GzPbO_440PNjhiTfA.png\"},\"text\":\"Code
for ThreePointVis.js with a mesh for each data
point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_58\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_58\",\"name\":\"3fe5\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Here
we set an arbitrary number of items (30) to wrap at which makes a grid
of cylinders. Looks just like normal React, right? This is the beauty of
react-three-fiber at
work.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"MediaResource:50486ad337b87e7fe041004123545479\":{\"\_\_typename\":\"MediaResource\",\"id\":\"50486ad337b87e7fe041004123545479\",\"iframeSrc\":\"https:\\u002F\\u002Fcdn.embedly.com\\u002Fwidgets\\u002Fmedia.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fprj0b&display_name=CodeSandbox&url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fprj0b&image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fprj0b%2Fscreenshot.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=codesandbox\",\"iframeHeight\":500,\"iframeWidth\":1000,\"title\":\"r3f-demo-2\"},\"Paragraph:afbeda6709c_59\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_59\",\"name\":\"2e4c\",\"type\":\"IFRAME\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":null,\"text\":\"\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":{\"\_\_typename\":\"Iframe\",\"mediaResource\":{\"\_\_ref\":\"MediaResource:50486ad337b87e7fe041004123545479\"}},\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_60\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_60\",\"name\":\"cf81\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"This
is working pretty well here at 1000 data points, but what about 10,000
or 100,000? How far can we go? On my machine, 100k basically kills my
browser with this approach. But we're living in the wonderful world of
GPUs, so we should definitely be able to get up there, we'll just have
to modify our
approach.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_61\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_61\",\"name\":\"c7e6\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"To
get 100,000 points with high performance, we need to switch to using
InstancedMesh instead of Mesh. Now as with all things performance
related, things will get a bit more complex as we head down this path,
but really in the end it's not too bad. Let's see how it all shakes out
next.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":72,\"end\":85,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#api\\u002Fen\\u002Fobjects\\u002FInstancedMesh\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":97,\"end\":101,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_62\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_62\",\"name\":\"40d9\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
3 --- Using InstancedMesh for 100,000
points\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_63\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_63\",\"name\":\"704c\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"(CodeSandbox
for this
step)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":1,\"end\":26,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-3-es4ru\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_64\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_64\",\"name\":\"8d2e\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
need more power! And it turns out we've had it inside us all
along.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*BrPhQA8Ds8jwNy7gh1e7Vw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*BrPhQA8Ds8jwNy7gh1e7Vw.png\",\"originalHeight\":630,\"originalWidth\":1164,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_65\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_65\",\"name\":\"55cf\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*BrPhQA8Ds8jwNy7gh1e7Vw.png\"},\"text\":\"End
result of step
3\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_66\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_66\",\"name\":\"969e\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
main difference you need to know about Mesh vs InstancedMesh is that
with InstancedMesh we have one big root object that contains a
transformation matrix for each instance (or data point in our case) that
we want to render, whereas with Mesh we have individual objects each
with their own matrices. Behind the scenes InstancedMesh lets the GPU be
smarter about how it renders the geometry and as a result reduces the
number of (slow) draw calls we need to make to see our
scene.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":43,\"end\":47,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":51,\"end\":64,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":78,\"end\":91,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":241,\"end\":245,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":321,\"end\":334,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_67\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_67\",\"name\":\"150a\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"So
instead of setting our positions and rotations directly on Mesh objects,
we need to update matrices that represent these positions and rotations.
Luckily, Three provides a number of mechanisms that make this relatively
painless once you've got an example to
follow.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":62,\"end\":66,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_68\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_68\",\"name\":\"0d78\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
first step is to tear out our familiar {data.map(\...)} React code and
replace our \\u003Cmesh\\u003E with an
\\u003CinstancedMesh\\u003E\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":43,\"end\":58,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*oisRozjTaPGSBgJDcjlg_Q.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*oisRozjTaPGSBgJDcjlg_Q.png\",\"originalHeight\":740,\"originalWidth\":2280,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_69\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_69\",\"name\":\"4f89\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*oisRozjTaPGSBgJDcjlg_Q.png\"},\"text\":\"Code
for converting \\u003Cmesh\\u003E to
\\u003CinstancedMesh\\u003E\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_70\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_70\",\"name\":\"1c42\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"At
this point, however, I prefer to extract the rendering of the points
into their own component before our ThreePointVis component gets too
complex. Let's call it InstancedPoints. We can update ThreePointVis to
use it, just like any normal React
component:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":108,\"end\":121,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":164,\"end\":179,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":195,\"end\":208,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*Rrpd0PNj5Sl6r7B5XMJw_g.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*Rrpd0PNj5Sl6r7B5XMJw_g.png\",\"originalHeight\":1388,\"originalWidth\":2212,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_71\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_71\",\"name\":\"9cb2\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*Rrpd0PNj5Sl6r7B5XMJw_g.png\"},\"text\":\"Code
for ThreePointVis.js swapping the {data.map()} with our
\\u003CInstancedPoints \\u002F\\u003E
component\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_72\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_72\",\"name\":\"b9e6\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Now,
let's see the complete InstancedPoints component and break it
down.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":28,\"end\":43,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":53,\"end\":54,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*0RZT7SgKyAQpPNlSsngtvw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*0RZT7SgKyAQpPNlSsngtvw.png\",\"originalHeight\":3404,\"originalWidth\":2884,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_73\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_73\",\"name\":\"5544\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*0RZT7SgKyAQpPNlSsngtvw.png\"},\"text\":\"Code
for
InstancedPoints.js\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_74\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_74\",\"name\":\"e2e4\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Instead
of mapping over the data points, we tell the InstancedMesh how many
instances there are (via the args prop) then set the individual
positions and rotations for each instance in the useEffect hook. When
the number of data points changes, we re-compute the layout for them (in
this case, re-using the 30 column layout from earlier). We make use of
scratchObject3D to do the hard matrix math for us instead of setting
prop
values.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":53,\"end\":66,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":105,\"end\":109,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":189,\"end\":198,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":354,\"end\":370,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_75\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_75\",\"name\":\"76ee\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"A
couple of things to
note:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_76\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_76\",\"name\":\"e4ab\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"You
must set the needsUpdate flag to true: mesh.instancedMatrix.needsUpdate
= true in order for your changes to be rendered on
screen.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":43,\"end\":82,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":4,\"end\":8,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":17,\"end\":28,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_77\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_77\",\"name\":\"95b7\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"I
sneakily added a frustumCulled prop to InstancedMesh. Without it, it
seems Three will remove all instances from the screen when \[0, 0, 0\]
(more or less) is off the screen. There may be other smarter ways around
this, but this is what worked for
me.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":130,\"end\":139,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":19,\"end\":32,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":41,\"end\":54,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_78\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_78\",\"name\":\"9083\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"With
that, we're all set up to use InstancedMesh! Let's see how it does at
100,000 points by updating our data generation in
App.js.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":35,\"end\":48,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_79\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_79\",\"name\":\"e3af\",\"type\":\"PRE\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"const
data = new Array(100000).fill(0).map((d, id) =\\u003E ({ id
}));\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_80\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_80\",\"name\":\"fc94\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Note
it's laggy for me when nested in CodeSandbox but works fine when popped
out on its own. I'll use 10,000 for the sandboxes here, but try it out
on your
own!\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":160,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"MediaResource:13648086bdcaa39ac3f73a5ae588820f\":{\"\_\_typename\":\"MediaResource\",\"id\":\"13648086bdcaa39ac3f73a5ae588820f\",\"iframeSrc\":\"https:\\u002F\\u002Fcdn.embedly.com\\u002Fwidgets\\u002Fmedia.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fes4ru&display_name=CodeSandbox&url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fes4ru&image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fes4ru%2Fscreenshot.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=codesandbox\",\"iframeHeight\":500,\"iframeWidth\":1000,\"title\":\"r3f-demo-3\"},\"Paragraph:afbeda6709c_81\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_81\",\"name\":\"23b9\",\"type\":\"IFRAME\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":null,\"text\":\"CodeSandbox
demo of Step 3 10,000
points\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":{\"\_\_typename\":\"Iframe\",\"mediaResource\":{\"\_\_ref\":\"MediaResource:13648086bdcaa39ac3f73a5ae588820f\"}},\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_82\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_82\",\"name\":\"ed0e\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"All
right we can efficiently render a ton of points as fancy 3D meshes now,
so let's try putting them in different layouts beside the 30 column
layout we've been using thus
far.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_83\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_83\",\"name\":\"40c2\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
4 --- Computing Different
Layouts\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_84\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_84\",\"name\":\"8152\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"(CodeSandbox
for this
step)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":1,\"end\":26,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-4-fhemj\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*FmHdMkZyf5sj237f90YF-g.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*FmHdMkZyf5sj237f90YF-g.png\",\"originalHeight\":541,\"originalWidth\":945,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_85\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_85\",\"name\":\"277a\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*FmHdMkZyf5sj237f90YF-g.png\"},\"text\":\"End
result of step 4: toggle-able
layouts\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_86\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_86\",\"name\":\"6cc4\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"In
this step, we're going to add support for rendering the points in two
different layouts: a square grid and an Archimedean spiral. Since you
may end up with a lot of different layouts, I find it convenient to put
the layout code into its own file:
layouts.js.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":250,\"end\":260,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_87\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_87\",\"name\":\"3cf7\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We'll
borrow some practices from layouts used by d3 where the actual positions
of each data point are stored on the data itself. There are other ways,
but this has worked well for me and is efficient. This differs from how
we have done it up until this point where we just computed the (x, y, z)
tuples for the instances right where we updated the instance
matrices.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":49,\"end\":51,\"href\":\"https:\\u002F\\u002Fd3js.org\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_88\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_88\",\"name\":\"d235\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Grid
Layout\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*wUFBWliThilp9Imftwzh_g.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*wUFBWliThilp9Imftwzh_g.png\",\"originalHeight\":627,\"originalWidth\":1024,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_89\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_89\",\"name\":\"6e9d\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*wUFBWliThilp9Imftwzh_g.png\"},\"text\":\"Square
Grid
Layout\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_90\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_90\",\"name\":\"3ca9\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We'll
start by writing the function that assigns the (x, y, z) values to each
data
point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*SaAZooRlPYOGO6d6tC2rog.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*SaAZooRlPYOGO6d6tC2rog.png\",\"originalHeight\":1388,\"originalWidth\":2076,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_91\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_91\",\"name\":\"7322\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*SaAZooRlPYOGO6d6tC2rog.png\"},\"text\":\"Code
for grid layout centered around (0,
0)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_92\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_92\",\"name\":\"4b23\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Note
we use \* 1.05 as a simple means of providing a modest amount of spacing
between the points. We offset by -numCols\\u002F2 and -numRows\\u002F2
to center the grid at the origin (0,
0).\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":12,\"end\":18,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_93\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_93\",\"name\":\"a778\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Next,
we'll create a useLayout hook that will apply this layout when the data
changes.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":21,\"end\":30,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*aXaVQRmpSiLe-4_4GnfRgw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*aXaVQRmpSiLe-4_4GnfRgw.png\",\"originalHeight\":514,\"originalWidth\":1090,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_94\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_94\",\"name\":\"8bd4\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*aXaVQRmpSiLe-4_4GnfRgw.png\"},\"text\":\"Code
for useLayout custom
hook\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_95\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_95\",\"name\":\"cbf2\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"As
we add more layouts, the hook will grow, but this structure will keep it
reasonably easy to work
with.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_96\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_96\",\"name\":\"6dfa\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Lastly,
we need to call this hook from our InstancedPoints component and update
the code that sets the instance matrix values to read from the data
instead of computing positions
directly.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":43,\"end\":58,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*WCc9xznTXM5X5U4L-o1vnA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*WCc9xznTXM5X5U4L-o1vnA.png\",\"originalHeight\":1234,\"originalWidth\":1074,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_97\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_97\",\"name\":\"7886\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*WCc9xznTXM5X5U4L-o1vnA.png\"},\"text\":\"Code
for using the layout in
InstancedPoints\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_98\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_98\",\"name\":\"3ef3\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
main change here is calling useLayout and reading the results from the
data: const { x, y, z } = data\[i\]. With that, we've got a square grid
working.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":81,\"end\":108,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":32,\"end\":42,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_99\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_99\",\"name\":\"2d91\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Spiral
Layout\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*pZVjzeALvobCJJz0lekphA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*pZVjzeALvobCJJz0lekphA.png\",\"originalHeight\":734,\"originalWidth\":891,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_100\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_100\",\"name\":\"f72d\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*pZVjzeALvobCJJz0lekphA.png\"},\"text\":\"Spiral
Layout\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_101\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_101\",\"name\":\"8121\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Let's
try something a bit more fun-- a spiral layout. Everyone loves spirals,
even if they're not particularly useful in this context. It's okay to
have fun every now and then,
right?\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_102\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_102\",\"name\":\"7159\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Here's
the algorithm I use for the spiral which puts points at equal distances
along the
way.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*iAtbOkff9WJgvi_8MKukEA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*iAtbOkff9WJgvi_8MKukEA.png\",\"originalHeight\":622,\"originalWidth\":1054,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_103\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_103\",\"name\":\"4ddc\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*iAtbOkff9WJgvi_8MKukEA.png\"},\"text\":\"Code
for laying out points on a
spiral\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_104\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_104\",\"name\":\"61f3\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"I'd
be lying if I said I totally understood everything that was happening in
here, but thanks to the wonders of the internet, you too can get
equidistant points on a spiral without knowing exactly how it works. I
left in some factors on radius (* 1) and theta (\* 0.8) that you can
play with to adjust how tight the spiral is wound and how close the
points
are.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":245,\"end\":248,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":261,\"end\":266,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":237,\"end\":243,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":254,\"end\":259,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_105\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_105\",\"name\":\"5abf\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"I
recommend adding something fun to the z position to get weird
tunnel-like effects (try datum.z = i \*
0.05).\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":89,\"end\":107,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_106\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_106\",\"name\":\"1123\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"To
use it, we update our useLayout hook to take the value
"spiral":\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":25,\"end\":34,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":58,\"end\":66,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*9owUksmc7lXWRX7_0DEMmg.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*9owUksmc7lXWRX7_0DEMmg.png\",\"originalHeight\":1244,\"originalWidth\":2180,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_107\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_107\",\"name\":\"a17a\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*9owUksmc7lXWRX7_0DEMmg.png\"},\"text\":\"Updated
useLayout code that has the spiral
layout\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_108\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_108\",\"name\":\"47c4\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Then
set the layout in InstancedPoints
accordingly:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":13,\"end\":19,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":23,\"end\":38,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_109\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_109\",\"name\":\"b4c3\",\"type\":\"PRE\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"useLayout({
data, layout: \'spiral\'
});\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_110\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_110\",\"name\":\"a042\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"So
we've got two layouts, how about swapping between
them?\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_111\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_111\",\"name\":\"65b9\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Toggling
Between
Layouts\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_112\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_112\",\"name\":\"5213\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"This
is another part where react-three-fiber really shines: we can do the
normal types of interactivity and declarative programming we love while
working with 3D components. Let's add a toggle that switches between our
two layout
options.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_113\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_113\",\"name\":\"cfd3\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"First,
we'll add some state to App and pass in layout as a prop to
ThreePointVis.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":31,\"end\":34,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":47,\"end\":53,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":67,\"end\":80,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*G2uaT7dcL6rh754UA0vfyA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*G2uaT7dcL6rh754UA0vfyA.png\",\"originalHeight\":1388,\"originalWidth\":2516,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_114\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_114\",\"name\":\"89b1\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*G2uaT7dcL6rh754UA0vfyA.png\"},\"text\":\"Code
for App.js with layout state
added\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_115\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_115\",\"name\":\"8af5\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Now
we just need to pass the layout prop through ThreePointVis to
InstancedPoints and update our instance-matrix-updating useEffect hook
to have layout as a
dependency.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":29,\"end\":35,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":49,\"end\":62,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":66,\"end\":81,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":122,\"end\":131,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":145,\"end\":151,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*hqSm7IIF3hh_oiVn_D6z6w.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*hqSm7IIF3hh_oiVn_D6z6w.png\",\"originalHeight\":1820,\"originalWidth\":1908,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_116\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_116\",\"name\":\"09d3\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*hqSm7IIF3hh_oiVn_D6z6w.png\"},\"text\":\"Excerpt
of code for InstancedMesh with layout
prop\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_117\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_117\",\"name\":\"edf0\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"And
with that, we are now able to swap between layouts. Check it out
below!\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"MediaResource:20898afc8ba4c8485df424e91e3e689d\":{\"\_\_typename\":\"MediaResource\",\"id\":\"20898afc8ba4c8485df424e91e3e689d\",\"iframeSrc\":\"https:\\u002F\\u002Fcdn.embedly.com\\u002Fwidgets\\u002Fmedia.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Ffhemj&display_name=CodeSandbox&url=https%3A%2F%2Fcodesandbox.io%2Fs%2Ffhemj&image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Ffhemj%2Fscreenshot.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=codesandbox\",\"iframeHeight\":500,\"iframeWidth\":1000,\"title\":\"r3f-demo-4\"},\"Paragraph:afbeda6709c_118\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_118\",\"name\":\"7205\",\"type\":\"IFRAME\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":null,\"text\":\"\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":{\"\_\_typename\":\"Iframe\",\"mediaResource\":{\"\_\_ref\":\"MediaResource:20898afc8ba4c8485df424e91e3e689d\"}},\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_119\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_119\",\"name\":\"2176\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Swapping
is cool and all, but you know what's cooler? Animation. Let's tackle
that
next.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_120\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_120\",\"name\":\"08e9\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
5 --- Animating
Positions\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_121\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_121\",\"name\":\"abcb\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"(CodeSandbox
for this
step)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":1,\"end\":26,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-5-prgpk\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*UlE7II6Ctw1NrhsaB9uUfw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*UlE7II6Ctw1NrhsaB9uUfw.png\",\"originalHeight\":525,\"originalWidth\":851,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_122\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_122\",\"name\":\"4ddb\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*UlE7II6Ctw1NrhsaB9uUfw.png\"},\"text\":\"Screen
capture mid-transition between spiral and grid
layouts\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_123\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_123\",\"name\":\"fa6f\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Inspired
by projects like Microsoft SandDance and Google Facets, our next steps
will be to get these cylinders flying around the screen. To do so we're
going to use react-spring which will give us some organic looking
animations while also making it easy to do most of the animating outside
of React, giving us better performance. On my machine I'm able to get
smooth animations at 100,000 points with this
approach.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":26,\"end\":45,\"href\":\"https:\\u002F\\u002Fwww.microsoft.com\\u002Fen-us\\u002Fresearch\\u002Fproject\\u002Fsanddance\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":50,\"end\":63,\"href\":\"https:\\u002F\\u002Fpair-code.github.io\\u002Ffacets\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":165,\"end\":177,\"href\":\"https:\\u002F\\u002Fwww.react-spring.io\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_124\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_124\",\"name\":\"10ee\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Before
we begin, I've got to give a shout-out to Paul Henschel. He created both
react-spring and react-three-fiber. It's definitely worth following him
on Twitter as he's always doing something
cool.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":49,\"end\":62,\"href\":\"https:\\u002F\\u002Ftwitter.com\\u002F0xca0a\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":138,\"end\":162,\"href\":\"https:\\u002F\\u002Ftwitter.com\\u002F0xca0a\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":75,\"end\":80,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_125\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_125\",\"name\":\"3113\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Remembering
Source and Target
Positions\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_126\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_126\",\"name\":\"c030\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Ok
so let's get started! The first thing we need to know to animate is
where we're going (the target position) and where we're coming from (the
source position). To accomplish this, we're just going to jam more
properties on to the data objects themselves because I'm lazy and it
works. You could also do something involving associative lists without
tarnishing your data, but sometimes it just feels good to be
bad.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":94,\"end\":100,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":144,\"end\":150,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_127\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_127\",\"name\":\"d19d\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"There
are a lot of ways of doing this. We're going to wrap it up in a small
hook called
useSourceTargetLayout.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":88,\"end\":109,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*AcdIvWkGkCVg122Zt4-QAg.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*AcdIvWkGkCVg122Zt4-QAg.png\",\"originalHeight\":1964,\"originalWidth\":1940,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_128\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_128\",\"name\":\"b592\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*AcdIvWkGkCVg122Zt4-QAg.png\"},\"text\":\"Code
for
useSourceTargetLayout\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_129\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_129\",\"name\":\"7138\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Note:
It might be better to have just a single useEffect here and refactor
parts of useLayout for reuse, but this seems to work
too.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":132,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_130\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_130\",\"name\":\"cbc3\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"All
we're doing is storing the current position, or (0, 0, 0) if there isn't
one, as the source position. Then we run the layout which will set (x,
y, z) on each data point, which is finally copied as the target
position.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_131\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_131\",\"name\":\"0869\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Interpolation
Between Source and
Target\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_132\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_132\",\"name\":\"8601\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Next
up, we need the ability to interpolate between these two positions. The
basic idea is: given a progress value between 0 and 1, we want 0 to be
the source position, 1 to be the target position and 0.5 to be halfway
between them. This is generally solved by the
formula\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_133\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_133\",\"name\":\"9ade\",\"type\":\"PRE\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"(1 -
t) \* source + t \*
target\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_134\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_134\",\"name\":\"4843\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"where
t is the progress value. In many libraries you'll see this called "mix"
or "lerp" (for linear
interpolation).\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":6,\"end\":7,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_135\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_135\",\"name\":\"3e1d\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Our
interpolation function interpolateSourceTarget looks as
follows:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":27,\"end\":50,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*ShytHzMYuD9XCFjuj0YukA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*ShytHzMYuD9XCFjuj0YukA.png\",\"originalHeight\":812,\"originalWidth\":2884,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_136\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_136\",\"name\":\"a61b\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*ShytHzMYuD9XCFjuj0YukA.png\"},\"text\":\"Code
for
interpolateSourceTarget\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_137\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_137\",\"name\":\"679d\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
iterate through all data points linearly interpolating the (x, y, z)
values to be between source and target based on the progress value (0 ≤
progress ≤
1).\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_138\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_138\",\"name\":\"1e59\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Animating
with a
Spring\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_139\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_139\",\"name\":\"a222\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Now
we need to actually call our interpolator and get these cylinders flying
around. First, we'll need to add react-spring as a
dependency:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_140\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_140\",\"name\":\"b643\",\"type\":\"PRE\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"\$
npm install \--save
react-spring\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_141\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_141\",\"name\":\"d2a2\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Then
we'll create a useAnimatedLayout hook that will use a spring to
interpolate between source and target positions when the layout changes.
Here's the
code:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":20,\"end\":38,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*w1xiFZlOLUIAiIBwiKV4oQ.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*w1xiFZlOLUIAiIBwiKV4oQ.png\",\"originalHeight\":1892,\"originalWidth\":2348,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_142\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_142\",\"name\":\"8ec1\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*w1xiFZlOLUIAiIBwiKV4oQ.png\"},\"text\":\"\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_143\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_143\",\"name\":\"3ce3\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Let's
break it
down.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_144\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_144\",\"name\":\"a0fe\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
import from \'react-spring\\u002Fthree\' not just react-spring . I think
in this case it doesn't matter, but if you end up using the animated or
a imports (e.g. \\u003Ca.mesh \...\\u002F\\u003E ) then you'll likely
need the \\u002Fthree
version.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":15,\"end\":35,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":45,\"end\":57,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":128,\"end\":136,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":140,\"end\":141,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":156,\"end\":169,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_145\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_145\",\"name\":\"cebf\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
run our useSourceTargetLayout hook which will run our layout and
remember source and target positions as described
above.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":11,\"end\":32,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_146\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_146\",\"name\":\"86a7\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
useSpring hook animates animationProgress from 0 to
1.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":4,\"end\":13,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":28,\"end\":45,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_147\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_147\",\"name\":\"629c\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
use a ref to keep track of the previously seen layout value so we can
compare it with the current value and "reset" the spring animation when
it changes, forcing it to re-run interpolating animationProgress from 0
to 1. I'm no react-spring expert by any means, so there may be better
ways, but this worked for
me.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":192,\"end\":209,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_148\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_148\",\"name\":\"494f\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
use useSpring::onFrame to get a callback for each tick of the animation
where we can update our positions by calling the interpolateSourceTarget
function. We then call the user-provided onFrame callback to indicate
the data has been updated. Note this happens without the React
reconciler getting involved, keeping the performance
high.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":7,\"end\":25,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":124,\"end\":147,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":189,\"end\":196,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_149\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_149\",\"name\":\"5a67\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"With
all of this, we now have some numbers changing but we still haven't
integrated it with our InstancedMesh to actually see the animation
happening-- let's do that
next.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":96,\"end\":109,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_150\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_150\",\"name\":\"6e59\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Update
the InstancedMesh
Matrices\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_151\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_151\",\"name\":\"1557\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
final piece of getting animation to work is hooking up our
useAnimatedLayout hook to our InstancedPoints component. Recall that
previously we called useLayout({ data, layout }). Instead we'll replace
that with useAnimatedLayout({ data, layout }) , but we'll also have to
provide an onFrame argument that will handle updating the instance
matrices. Let's first extract the code we had in the useEffect hook in
InstancedPoints into a helper function
updateInstancedMeshMatrices:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":153,\"end\":180,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"CODE\",\"start\":214,\"end\":249,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":63,\"end\":81,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":93,\"end\":108,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":286,\"end\":293,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":395,\"end\":405,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":413,\"end\":428,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":452,\"end\":479,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*Nej4UpsVwv0e82PXA5v-Iw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*Nej4UpsVwv0e82PXA5v-Iw.png\",\"originalHeight\":1388,\"originalWidth\":2076,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_152\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_152\",\"name\":\"f742\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*Nej4UpsVwv0e82PXA5v-Iw.png\"},\"text\":\"Code
for
updateInstancedMeshMatrices\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_153\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_153\",\"name\":\"0504\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Warning!
If you're re-sorting your data array, this code will have unexpected
behavior. The mesh instances are always in the same order and we're
calling mesh.setMatrixAt(index, matrix). It's possible the index in the
mesh array is different than the current index in the data array if
you've re-sorted, so make sure you keep track of it if you're
re-sorting. On events, the mesh index is called instanceId, so it can be
handy to store that on the data objects to use
here.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":0,\"end\":9,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":171,\"end\":176,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":396,\"end\":406,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":8,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_154\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_154\",\"name\":\"7b6a\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Anyway,
back to animating. Now, we can call this helper function in our onFrame
callback to get our mesh to update as the spring animation is
happening.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":72,\"end\":79,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*wSo_I435frGx3SdB-tE9WA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*wSo_I435frGx3SdB-tE9WA.png\",\"originalHeight\":2468,\"originalWidth\":2884,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_155\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_155\",\"name\":\"1b6d\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*wSo_I435frGx3SdB-tE9WA.png\"},\"text\":\"Updated
code for InstancedPoints with
useAnimatedLayout\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_156\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_156\",\"name\":\"975f\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"And
with that, we've got animation! For me when I pop the CodeSandbox into
its own window I get smooth animation with 100,000 points on my machine.
Give it a shot and see how it works for
you.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"MediaResource:19f7a500baaf2ac5cf875694152e56d4\":{\"\_\_typename\":\"MediaResource\",\"id\":\"19f7a500baaf2ac5cf875694152e56d4\",\"iframeSrc\":\"https:\\u002F\\u002Fcdn.embedly.com\\u002Fwidgets\\u002Fmedia.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fprgpk&display_name=CodeSandbox&url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fprgpk&image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fprgpk%2Fscreenshot.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=codesandbox\",\"iframeHeight\":500,\"iframeWidth\":1000,\"title\":\"r3f-demo-5\"},\"Paragraph:afbeda6709c_157\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_157\",\"name\":\"4bef\",\"type\":\"IFRAME\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":null,\"text\":\"\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":{\"\_\_typename\":\"Iframe\",\"mediaResource\":{\"\_\_ref\":\"MediaResource:19f7a500baaf2ac5cf875694152e56d4\"}},\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_158\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_158\",\"name\":\"38a0\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Using
the GPU for better
performance\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_159\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_159\",\"name\":\"5f0e\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"After
a certain threshold (perhaps over 100,000 items depending on your
machine), animating always becomes a bit tricky since we need to turn to
using the GPU instead of the CPU in order to keep our animations smooth.
Using the GPU means using shaders, and this post is long enough as it is
without talking about them, but for those that want to learn more, check
out these
resources:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":244,\"end\":251,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_160\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_160\",\"name\":\"0bd6\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Three
Buffer Animation System (BAS) --- An extension for Three that makes it
relatively easy to animate via the vertex shader. During hack week I
wrote my own custom material based on MeshStandardMaterial to accomplish
this, but only because I had never heard of Three BAS until Paul
Henschel tweeted about
it!\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":29,\"href\":\"https:\\u002F\\u002Fgithub.com\\u002Fzadvorsky\\u002Fthree.bas\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":277,\"end\":307,\"href\":\"https:\\u002F\\u002Ftwitter.com\\u002F0xca0a\\u002Fstatus\\u002F1209045571388018688\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_161\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_161\",\"name\":\"eec6\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"An
older post of mine about doing basic point animation in a shader with
regl.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":67,\"href\":\"https:\\u002F\\u002Fpeterbeshai.com\\u002Fblog\\u002F2017-05-26-beautifully-animate-points-with-webgl-and-regl\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":73,\"end\":77,\"href\":\"http:\\u002F\\u002Fregl.party\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_162\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_162\",\"name\":\"39e3\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"So
we've got animation now, how about some
interactivity?\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_163\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_163\",\"name\":\"820b\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
6 --- Adding Interactivity: Selecting a
Point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_164\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_164\",\"name\":\"70c0\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"(CodeSandbox
for this
step)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":1,\"end\":26,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-6-ffrme\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*AIYrfp0ZV_ObAl61YKTtjQ.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*AIYrfp0ZV_ObAl61YKTtjQ.png\",\"originalHeight\":930,\"originalWidth\":1292,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_165\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_165\",\"name\":\"7382\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*AIYrfp0ZV_ObAl61YKTtjQ.png\"},\"text\":\"End
result of step 6 selecting a
point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_166\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_166\",\"name\":\"909a\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"One
of the great parts about using InstancedMesh is that it allows mouse
events to work as we expect with very little effort on our
part.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":35,\"end\":48,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_167\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_167\",\"name\":\"a802\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Setting
up selectedPoint
State\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_168\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_168\",\"name\":\"69a0\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We'll
get started by putting in some scaffolding to show the selected point in
other parts in the app besides the ThreePointVis component. This is
handy for having panels that show details about the data you're
selecting. We'll just do a very basic message that shows the selected
ID, but the same idea applies for more sophisticated
applications.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":114,\"end\":127,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_169\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_169\",\"name\":\"412d\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Back
in good ol' App.js, let's add some state for the selected point and
display its ID if we have
one.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":17,\"end\":23,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*hMFjyU2XS6W7DMrsg2vQBw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*hMFjyU2XS6W7DMrsg2vQBw.png\",\"originalHeight\":2180,\"originalWidth\":2448,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_170\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_170\",\"name\":\"dd36\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*hMFjyU2XS6W7DMrsg2vQBw.png\"},\"text\":\"Code
for App with selectedPoint
state\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_171\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_171\",\"name\":\"d645\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Nothing
too exciting here, we create some state, display it, and pass it as a
prop to ThreePointVis. Could've brought a little pizazz to this code
with some nullish coalescing but it seems it's a bit too soon still.
Soon though,
soon.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":157,\"end\":175,\"href\":\"https:\\u002F\\u002Fdeveloper.mozilla.org\\u002Fen-US\\u002Fdocs\\u002FWeb\\u002FJavaScript\\u002FReference\\u002FOperators\\u002FNullish_coalescing_operator\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":86,\"end\":99,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":229,\"end\":233,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_172\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_172\",\"name\":\"2327\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Ok
so, how about we make use of those fancy new props in ThreePointVis? It
turns out to be just like normal React event handling. 3D? More like 3Z!
(threeasy. I'm
sorry.)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":57,\"end\":70,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":144,\"end\":146,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":153,\"end\":170,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*ZOzXwy074YGFCnLYpnFI1A.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*ZOzXwy074YGFCnLYpnFI1A.png\",\"originalHeight\":2324,\"originalWidth\":2884,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_173\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_173\",\"name\":\"c9be\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*ZOzXwy074YGFCnLYpnFI1A.png\"},\"text\":\"Code
for InstancedPoints with click handling for
selectedPoint\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_174\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_174\",\"name\":\"f8f2\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"As
mentioned previously, we can recover the data item based on the
instanceId provided in the event object. If we never re-sort the data,
this corresponds directly to the index. If we do re-sort the data, we
will have to do some more work to find the point based on the
instanceId.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":67,\"end\":77,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_175\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_175\",\"name\":\"2d2a\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"As
shown above, we just provide an onClick prop to the
\\u003CinstancedMesh\\u003E then toggle the selected point as we
normally would in React via our handleClick
function.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":35,\"end\":43,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":47,\"end\":48,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":140,\"end\":151,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*FBF8vokKVgn6nCN246UZ5Q.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*FBF8vokKVgn6nCN246UZ5Q.png\",\"originalHeight\":460,\"originalWidth\":1254,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_176\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_176\",\"name\":\"92d9\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*FBF8vokKVgn6nCN246UZ5Q.png\"},\"text\":\"A
toggled item shows a message, but no other visual
cues\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_177\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_177\",\"name\":\"ae08\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"With
that, we have basic mouse interaction: we can click the cylinders and
get a little message showing that an item was selected, but let's take
it a step further and color the selected item
too.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_178\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_178\",\"name\":\"4764\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Coloring
the Selected
Point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_179\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_179\",\"name\":\"e574\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"To
get coloring for our selected point, we need to do a few things. First,
we need to update our material to use vertexColors, which lets the
instances within our InstancedMesh have different colors. Then we need
to provide an InstancedBufferAttribute which specifies a color for each
of the instances. Lastly, we need to change the instance colors based on
which point is
selected.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":227,\"end\":251,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#api\\u002Fen\\u002Fcore\\u002FInstancedBufferAttribute\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":113,\"end\":125,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":163,\"end\":176,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_180\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_180\",\"name\":\"09cb\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"The
first two steps can be mostly accomplished through
JSX:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*b11Yx8bg41tOXNhplDDHQQ.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*b11Yx8bg41tOXNhplDDHQQ.png\",\"originalHeight\":1892,\"originalWidth\":2752,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_181\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_181\",\"name\":\"60dc\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*b11Yx8bg41tOXNhplDDHQQ.png\"},\"text\":\"Code
for InstancedPoints with vertex coloring
support\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_182\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_182\",\"name\":\"76ca\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Here
we've added an \\u003CinstancedBufferAttribute\\u003E child of
\\u003CcylinderBufferGeometry\\u003E that specifies our color attribute.
Our colors will be RGB values (3 values per instance), so that's why the
number 3 appears in a few
locations.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":197,\"end\":198,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_183\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_183\",\"name\":\"eba8\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We've
also added a prop vertexColors to \\u003CmeshStandardMaterial\\u003E
which informs it to look for a color attribute when rendering the
meshes. Note that in our \\u003CinstancedBufferAttribute\\u003E we
attach it as attributes.color to the geometry, which is how the two get
connected.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":24,\"end\":36,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":94,\"end\":99,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":197,\"end\":213,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_184\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_184\",\"name\":\"19b8\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Now,
the code above doesn't provide any actual colors (colorArray doesn't
have reasonable values), so you wouldn't be able to see anything if you
used it as is. To handle the actual coloring, let's create a
usePointColors hook that will set the colors based on data and the
selected
point.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":207,\"end\":222,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*rjUs2iGIeOLb7ZaS76zfng.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*rjUs2iGIeOLb7ZaS76zfng.png\",\"originalHeight\":1820,\"originalWidth\":3192,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_185\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_185\",\"name\":\"208b\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*rjUs2iGIeOLb7ZaS76zfng.png\"},\"text\":\"Code
for usePointColors
hook\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_186\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_186\",\"name\":\"03af\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"So
what's happening
here?\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_187\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_187\",\"name\":\"7430\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"It
creates colorArray, an array to store all the colors for each instance.
We fill it with values by using
scratchColor.toArray().\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":11,\"end\":21,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":107,\"end\":129,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_188\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_188\",\"name\":\"6255\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"It
create a reference colorAttrib which will hold the
InstancedBufferAttribute
reference\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":22,\"end\":33,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":54,\"end\":78,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_189\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_189\",\"name\":\"9c61\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"When
the selected point or data changes, we recompute the color for all
points and notify Three that the color attribute needs to be
re-interpreted. This isn't the most efficient way, but it works well
enough.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_190\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_190\",\"name\":\"2f23\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
then use the results of this hook as the props for the
\\u003CinstancedBufferAttribute\\u003E in
InstancedPoints\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":88,\"end\":103,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*yy5VWSuBDPWI08TTDgHaLg.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*yy5VWSuBDPWI08TTDgHaLg.png\",\"originalHeight\":1316,\"originalWidth\":2820,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_191\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_191\",\"name\":\"0332\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*yy5VWSuBDPWI08TTDgHaLg.png\"},\"text\":\"Code
for InstancedPoints using
usePointColors\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_192\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_192\",\"name\":\"e135\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"And
with that, we've got
coloring!\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*3pl7xqjc1Lup7EzpJ1TJxw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*3pl7xqjc1Lup7EzpJ1TJxw.png\",\"originalHeight\":764,\"originalWidth\":1262,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_193\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_193\",\"name\":\"0193\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*3pl7xqjc1Lup7EzpJ1TJxw.png\"},\"text\":\"Screen
capture of a colored, selected
cylinder\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_194\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_194\",\"name\":\"6836\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Niceeeee,
but if you try clicking and dragging around, you'll see that it keeps
changing the selection when you release the mouse. Dang, just when I
thought I was out, they pull me back
in.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":131,\"end\":135,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_195\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_195\",\"name\":\"e728\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Preventing
Selection on
Drag\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_196\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_196\",\"name\":\"d563\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"To
prevent selecting new items when dragging across the vis, we just need
to check if the mouse moved too far between mouse down and mouse up. A
threshold of 5 pixels works reasonably well, so that's what we'll
use.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_197\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_197\",\"name\":\"c3e8\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"To
do this, we'll need to add a handler for onPointerDown
(react-three-fiber uses pointer events and you may need to polyfill
them), and modify our onClick handler to check if the mouse moved too
far to be a click. We'll combine the logic for these two into a custom
hook called useMousePointInteraction that will return the two
handlers.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":117,\"end\":130,\"href\":\"https:\\u002F\\u002Fgithub.com\\u002Fjquery\\u002FPEP\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":44,\"end\":57,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":148,\"end\":155,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":279,\"end\":304,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*QVk-piejbruKdtzyWcY6uA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*QVk-piejbruKdtzyWcY6uA.png\",\"originalHeight\":2828,\"originalWidth\":2884,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_198\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_198\",\"name\":\"b019\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*QVk-piejbruKdtzyWcY6uA.png\"},\"text\":\"Code
for
useMousePointInteraction\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_199\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_199\",\"name\":\"a290\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
store the last seen mouse down position in a ref in our pointer down
handler and then compare the mouse click position against it to see if
we dragged or not. Now we just need to use these handlers in our
InstancedPoints component and we'll be all
set.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":208,\"end\":223,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*HHU4mWb9BoH5b1BetoXM1Q.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*HHU4mWb9BoH5b1BetoXM1Q.png\",\"originalHeight\":1388,\"originalWidth\":2580,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_200\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_200\",\"name\":\"1d1b\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*HHU4mWb9BoH5b1BetoXM1Q.png\"},\"text\":\"Code
using useMousePointInteraction in
InstancedPoints\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_201\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_201\",\"name\":\"029f\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Ahhhhhh
the glorious feeling of mouse behavior matching
expectations.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"MediaResource:12cb8d69dfc44f05e169f3f561e4704b\":{\"\_\_typename\":\"MediaResource\",\"id\":\"12cb8d69dfc44f05e169f3f561e4704b\",\"iframeSrc\":\"https:\\u002F\\u002Fcdn.embedly.com\\u002Fwidgets\\u002Fmedia.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fffrme&display_name=CodeSandbox&url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fffrme&image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fffrme%2Fscreenshot.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=codesandbox\",\"iframeHeight\":500,\"iframeWidth\":1000,\"title\":\"r3f-demo-6\"},\"Paragraph:afbeda6709c_202\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_202\",\"name\":\"2e89\",\"type\":\"IFRAME\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":null,\"text\":\"\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":{\"\_\_typename\":\"Iframe\",\"mediaResource\":{\"\_\_ref\":\"MediaResource:12cb8d69dfc44f05e169f3f561e4704b\"}},\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_203\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_203\",\"name\":\"70f7\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
7 --- Bloom: Adding a Glow
Effect\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_204\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_204\",\"name\":\"28b0\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"(CodeSandbox
for this
step)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":1,\"end\":26,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-7-bxx97\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*p-fU40UzR_naFv1Z3ohlVA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*p-fU40UzR_naFv1Z3ohlVA.png\",\"originalHeight\":922,\"originalWidth\":1274,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_205\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_205\",\"name\":\"88c6\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*p-fU40UzR_naFv1Z3ohlVA.png\"},\"text\":\"End
result of step 7: a glowing, lit-up selected
point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_206\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_206\",\"name\":\"a27e\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Ok,
we've got interaction and layout animation but we're living in the
wonderful world of 3D, let's get some sweet effects in there. The first
thing that comes to mind when I hear "bad ass 3D effects" is making
things glow, otherwise known as "bloom". Let's see how we turn on a
bloom effect and then spruce things up with some additional
lights.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_207\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_207\",\"name\":\"8f28\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Note:
Adding in these effects may slow down animation
performance.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":66,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_208\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_208\",\"name\":\"2f1b\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Adding
Effects via \\u003CEffects
\\u002F\\u003E\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_209\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_209\",\"name\":\"8256\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Turns
out react-three-fiber has a bunch of amazing examples of how to add
effects to your 3D work and the library makes it really easy. We'll
create an Effects component that we just add as a child to our
\\u003CCanvas\\u003E and that'll be that. Really. We'll add two effects:
UnrealBloomPass for glow and FXAA for
antialiasing.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":43,\"end\":59,\"href\":\"https:\\u002F\\u002Fgithub.com\\u002Freact-spring\\u002Freact-three-fiber\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":266,\"end\":281,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fexamples\\u002F?q=bloom#webgl_postprocessing_unreal_bloom\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":295,\"end\":299,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fexamples\\u002F?q=fxaa#webgl_postprocessing_fxaa\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":304,\"end\":316,\"href\":\"https:\\u002F\\u002Fen.wikipedia.org\\u002Fwiki\\u002FFast_approximate_anti-aliasing\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":152,\"end\":159,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*VkKAthHyspxkvN7T-yi1wQ.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*VkKAthHyspxkvN7T-yi1wQ.png\",\"originalHeight\":3404,\"originalWidth\":3088,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_210\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_210\",\"name\":\"8cef\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*VkKAthHyspxkvN7T-yi1wQ.png\"},\"text\":\"Code
for \\u003CEffects
\\u002F\\u003E\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_211\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_211\",\"name\":\"6f51\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"So
there's a bunch of stuff going on in here that happily you don't really
need to know much about to get working. Or at least I didn't need to
know much about it anyway. The general idea is post-processing effects
work by doing multiple passes through the scene and adjusting it each
time. Here we do three
passes:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_212\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_212\",\"name\":\"d6a4\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"First
we render the actual scene with a \\u003CrenderPass
\\u002F\\u003E\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_213\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_213\",\"name\":\"5f05\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Then
we add the glow by inserting an \\u003CunrealBloomPass \\u002F\\u003E.
You can play with the bloom arguments to adjust how intense the glow
is.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_214\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_214\",\"name\":\"fff4\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Lastly,
we use a \\u003CshaderPass \\u002F\\u003E with a FXAA shader that
antialiases the scene and importantly renders it to screen (note the
renderToScreen
prop)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":125,\"end\":139,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_215\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_215\",\"name\":\"6af2\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"For
the most part, the only thing I play with here is the bloom arguments.
You can insert other effects in the composer too, check out the Three
docs for more
ideas.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":139,\"end\":149,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fexamples\\u002F?q=postprocessing#webgl_postprocessing_unreal_bloom\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_216\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_216\",\"name\":\"c98f\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Now
we just need to add the Effects component as a child of ThreePointVis
and we'll be good to
go.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":28,\"end\":35,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":60,\"end\":73,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*DC9VJAggVDSXiicWPjKZgA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*DC9VJAggVDSXiicWPjKZgA.png\",\"originalHeight\":1460,\"originalWidth\":2212,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_217\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_217\",\"name\":\"b502\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*DC9VJAggVDSXiicWPjKZgA.png\"},\"text\":\"Code
for ThreePointVis with \\u003CEffects \\u002F\\u003E
added\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_218\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_218\",\"name\":\"33fd\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"So
what does it look like at this
point?\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*S_jT0y97XM9efvvNdk1zfg.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*S_jT0y97XM9efvvNdk1zfg.png\",\"originalHeight\":760,\"originalWidth\":1270,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_219\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_219\",\"name\":\"b1ca\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*S_jT0y97XM9efvvNdk1zfg.png\"},\"text\":\"Screenshot
after initial effects are
applied\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_220\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_220\",\"name\":\"ffb6\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Dang
that's some seeeeerious glow. Some may argue too much, some not enough.
But for our purposes, I'd like to tone it down. The problem here is that
all of the cylinders are #FFF white, the brightest possible color and
bloom works by making things over a certain brightness level glow. I
only want the selected items to glow for the most part, so my solution
is to reduce the default unselected color from #FFF to something lower
like
#888.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":17,\"end\":28,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_221\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_221\",\"name\":\"f662\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Note:
there is such a thing as "selective bloom" that may work here as well,
but I've never used
it.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":100,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_222\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_222\",\"name\":\"c154\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"To
adjust the colors of the non-selected points, we just update the
DEFAULT_COLOR const in
InstancedPoints.js.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":68,\"end\":81,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":91,\"end\":109,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_223\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_223\",\"name\":\"80f7\",\"type\":\"PRE\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"const
DEFAULT_COLOR =
\"#888\";\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*-dQBj7CXb4iTFqxrbTxjKw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1\*-dQBj7CXb4iTFqxrbTxjKw.png\",\"originalHeight\":610,\"originalWidth\":1272,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_224\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_224\",\"name\":\"ebad\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1\*-dQBj7CXb4iTFqxrbTxjKw.png\"},\"text\":\"Screenshot
showing only the selected item
glowing\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_225\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_225\",\"name\":\"b4bc\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Ok
so that tones things way down, and we've got some mild glow going on. We
could play around with the bloom settings to make the glow more intense
on the selected item, or we could choose a brighter color for it, but
instead I'd like to add in some
lights.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_226\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_226\",\"name\":\"0646\",\"type\":\"H4\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Light
It
Up\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_227\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_227\",\"name\":\"f925\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"First,
let's try adding a light directly above the selected point and see how
that looks. All we have to do is modify our InstancedPoints component to
add a \\u003CpointLight\\u003E when we have a
selectedPoint.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":157,\"end\":169,\"href\":\"https:\\u002F\\u002Fthreejs.org\\u002Fdocs\\u002Findex.html#api\\u002Fen\\u002Flights\\u002FPointLight\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":122,\"end\":137,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":185,\"end\":198,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*PjfUtsYgWfzG8S8JiEY5Fw.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*PjfUtsYgWfzG8S8JiEY5Fw.png\",\"originalHeight\":1460,\"originalWidth\":2820,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_228\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_228\",\"name\":\"92d0\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*PjfUtsYgWfzG8S8JiEY5Fw.png\"},\"text\":\"Code
for adding a light above the selected
point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_229\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_229\",\"name\":\"d3c1\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
take the position of the selectedPoint and add 0.3 to the z position to
get the light slightly above it. Note we use a \\u003Cgroup\\u003E since
we know we'll be adding another light momentarily. And with that, we get
some extra glowiness to our selected
point:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":28,\"end\":41,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":50,\"end\":53,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*Gzi9LoEbPK2AUP0J8gNKUA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*Gzi9LoEbPK2AUP0J8gNKUA.png\",\"originalHeight\":668,\"originalWidth\":1252,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_230\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_230\",\"name\":\"b0e0\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*Gzi9LoEbPK2AUP0J8gNKUA.png\"},\"text\":\"Screenshot
with a light above the selected
point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_231\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_231\",\"name\":\"6fac\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Ooo
not bad, not bad. But we can go further! And go further we shall. Let's
add a light around the point that lights up those adjacent to it. To do
this, we add another \\u003CpointLight\\u003E with a bigger radius and
place it right in the middle of the
object.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*r6yMmpF-CsmQpi_BYFqYUQ.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*r6yMmpF-CsmQpi_BYFqYUQ.png\",\"originalHeight\":1532,\"originalWidth\":2820,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_232\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_232\",\"name\":\"22ff\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*r6yMmpF-CsmQpi_BYFqYUQ.png\"},\"text\":\"Code
for the second light right in the middle of the selected
point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_233\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_233\",\"name\":\"dc42\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Again,
I just played around until I found some settings I liked. Here's the
result:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*9s1pUwgQVmiYC7toIvWUig.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*9s1pUwgQVmiYC7toIvWUig.png\",\"originalHeight\":732,\"originalWidth\":1212,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_234\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_234\",\"name\":\"cacc\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*9s1pUwgQVmiYC7toIvWUig.png\"},\"text\":\"Screenshot
after adding the glow and two lights to the selected
point\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_235\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_235\",\"name\":\"5c44\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Now
we're talking! But if you try switching layouts, you'll see the lights
don't animate with the point. Oops. Nothing free in this world. Since
our point animation is kind of happening behind the scenes, we'll have
to do some trickery to get the lights to update with the
point.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_236\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_236\",\"name\":\"e1d2\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"First,
we update useAnimatedLayout to return the spring animation
props.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":17,\"end\":34,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*oE6yRDfl0yrACuJPw7Q52A.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*oE6yRDfl0yrACuJPw7Q52A.png\",\"originalHeight\":1892,\"originalWidth\":2348,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_237\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_237\",\"name\":\"8949\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*oE6yRDfl0yrACuJPw7Q52A.png\"},\"text\":\"Code
for useAnimatedLayout now returning animProps from
useSpring\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_238\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_238\",\"name\":\"839c\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Next,
we need to make our light group animate along with the
points.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*KfHs2HvHq291dhkyz1P80Q.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*KfHs2HvHq291dhkyz1P80Q.png\",\"originalHeight\":3260,\"originalWidth\":2852,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_239\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_239\",\"name\":\"a401\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*KfHs2HvHq291dhkyz1P80Q.png\"},\"text\":\"Code
for InstancedPoints updated to animate the light
group\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_240\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_240\",\"name\":\"c1a5\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"To
do this, we switch from using \\u003Cgroup\\u003E to
\\u003Ca.group\\u003E with the a from react-spring. Then we just have it
re-read the current (x, y, z) position of the selected point as the
animation runs since we know our spring will be recomputing it each
tick.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":63,\"end\":65,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_241\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_241\",\"name\":\"2385\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"That's
it! Here's the
demo:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"MediaResource:2d1ae551261b7c90d38f0c9e9c6de292\":{\"\_\_typename\":\"MediaResource\",\"id\":\"2d1ae551261b7c90d38f0c9e9c6de292\",\"iframeSrc\":\"https:\\u002F\\u002Fcdn.embedly.com\\u002Fwidgets\\u002Fmedia.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fbxx97&display_name=CodeSandbox&url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fbxx97&image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fbxx97%2Fscreenshot.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=codesandbox\",\"iframeHeight\":500,\"iframeWidth\":1000,\"title\":\"r3f-demo-7\"},\"Paragraph:afbeda6709c_242\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_242\",\"name\":\"c389\",\"type\":\"IFRAME\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":null,\"text\":\"\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":{\"\_\_typename\":\"Iframe\",\"mediaResource\":{\"\_\_ref\":\"MediaResource:2d1ae551261b7c90d38f0c9e9c6de292\"}},\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_243\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_243\",\"name\":\"20d1\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"One
final touch and we'll be
done.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_244\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_244\",\"name\":\"5f1e\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Step
8 --- Finishing Touch: Resetting the
Camera\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_245\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_245\",\"name\":\"3458\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"(CodeSandbox
for this
step)\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":1,\"end\":26,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-8-y5nrg\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"EM\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_246\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_246\",\"name\":\"41bf\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"This
is kind of a bonus step, but I find it really helps making the UI less
painful to use. When navigating around with the TrackballControls or
OrbitControls, it can get annoying to get back to a base position.
Sometimes you just end up in some wonky rotation and can't get out, so I
like to add in a button that will reset the camera position. Now there's
probably a better way to do this than the way I'm going to show you, but
I didn't know any better so here it is. We're going to put a button
outside of our ThreePointVis component that changes the camera position
via
refs.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":124,\"end\":141,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":145,\"end\":158,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":514,\"end\":527,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_247\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_247\",\"name\":\"6f40\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"First,
let's add the button to the UI via
App.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":42,\"end\":45,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*KNAXfD5ROF58Cr9BoyeZeg.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*KNAXfD5ROF58Cr9BoyeZeg.png\",\"originalHeight\":2324,\"originalWidth\":2516,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_248\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_248\",\"name\":\"5af3\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*KNAXfD5ROF58Cr9BoyeZeg.png\"},\"text\":\"Code
for \\u003CApp \\u002F\\u003E updated to have a reset camera
button\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_249\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_249\",\"name\":\"71e2\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
add a ref visRef to our ThreePointVis component, a button and a click
handler that tells visRef to reset the
camera.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":13,\"end\":19,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":27,\"end\":40,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":92,\"end\":98,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*GQS97efuzoyka0r9o3I3Wg.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*GQS97efuzoyka0r9o3I3Wg.png\",\"originalHeight\":610,\"originalWidth\":1278,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_250\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_250\",\"name\":\"7587\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*GQS97efuzoyka0r9o3I3Wg.png\"},\"text\":\"Added
reset camera
button\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_251\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_251\",\"name\":\"25ae\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Now
we just have to create this resetCamera handler within ThreePointVis. My
solution here was to use useImperativeHandle and forwardRef, which
pretty much always feels bad, but heyo it works in this
case.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":59,\"end\":72,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":102,\"end\":122,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":126,\"end\":136,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_252\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_252\",\"name\":\"b222\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Let's
get those refs going down the line. Here we
go!\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*e3_WwIjV7ju9EHr5EhNXQA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*e3_WwIjV7ju9EHr5EhNXQA.png\",\"originalHeight\":1532,\"originalWidth\":2212,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_253\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_253\",\"name\":\"8c70\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*e3_WwIjV7ju9EHr5EhNXQA.png\"},\"text\":\"Code
for ThreePointVis with forwardRef and
useImperativeHandle\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_254\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_254\",\"name\":\"8371\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"First
we update ThreePointVis to have a resetCamera function that it passes
through to the Controls component via
controlsRef.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":16,\"end\":29,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":91,\"end\":99,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":114,\"end\":125,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"ImageMetadata:1*UmIbogI6tmHW3ZQDgIDelA.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*UmIbogI6tmHW3ZQDgIDelA.png\",\"originalHeight\":2468,\"originalWidth\":2244,\"focusPercentX\":null,\"focusPercentY\":null,\"alt\":null},\"Paragraph:afbeda6709c_255\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_255\",\"name\":\"1fba\",\"type\":\"IMG\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":{\"\_\_ref\":\"ImageMetadata:1*UmIbogI6tmHW3ZQDgIDelA.png\"},\"text\":\"Code
for \\u003CControls \\u002F\\u003E that uses forwardRef and
useImperativeHandle\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_256\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_256\",\"name\":\"2e75\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
do similar things to the Controls component except here is where we have
access to the camera and controls object to do the actual resetting. A
few important things to
note:\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":28,\"end\":36,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":90,\"end\":96,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":101,\"end\":109,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_257\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_257\",\"name\":\"54e1\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
set the target of controls back to the origin (0, 0, 0). This is where
the camera will orbit around and is the center of the
screen.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":11,\"end\":17,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":21,\"end\":29,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_258\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_258\",\"name\":\"d8e4\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"We
reset the camera position back to our original (0, 0, 80) coordinates.
We could use a prop for this, but this is good enough for our
purposes.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":13,\"end\":28,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_259\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_259\",\"name\":\"6b76\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Since
we're using TrackballControls, we need to also reset the up vector of
the camera. Conveniently, this is stored as up0 on controls, so we copy
it
over.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":18,\"end\":35,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":63,\"end\":66,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":80,\"end\":86,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":120,\"end\":123,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":127,\"end\":135,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_260\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_260\",\"name\":\"1c96\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Lastly,
we indirectly call controls.update via our useFrame hook which updates
the
view.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":27,\"end\":42,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":51,\"end\":59,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_261\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_261\",\"name\":\"e725\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"In
my hack-week project I used animation to tween back to the original
position, but I'll leave that as an exercise for the reader. This was
the last step in our tour through the world of 3D.
Hallelujah.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"MediaResource:5abc94555dcfbc0884fa62b032a91f69\":{\"\_\_typename\":\"MediaResource\",\"id\":\"5abc94555dcfbc0884fa62b032a91f69\",\"iframeSrc\":\"https:\\u002F\\u002Fcdn.embedly.com\\u002Fwidgets\\u002Fmedia.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fy5nrg&display_name=CodeSandbox&url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fy5nrg&image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fy5nrg%2Fscreenshot.png&key=a19fcc184b9711e1b4764040d3dc5c07&type=text%2Fhtml&schema=codesandbox\",\"iframeHeight\":500,\"iframeWidth\":1000,\"title\":\"r3f-demo-8\"},\"Paragraph:afbeda6709c_262\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_262\",\"name\":\"ae0e\",\"type\":\"IFRAME\",\"href\":null,\"layout\":\"INSET_CENTER\",\"metadata\":null,\"text\":\"\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":{\"\_\_typename\":\"Iframe\",\"mediaResource\":{\"\_\_ref\":\"MediaResource:5abc94555dcfbc0884fa62b032a91f69\"}},\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_263\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_263\",\"name\":\"fb73\",\"type\":\"H3\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Please
Say This is The
End\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_264\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_264\",\"name\":\"9623\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Holy
smokes, we did it!! Thanks for reading, and congratulations for making
it this far. If you've got any questions or comments about this post
please feel free to reach out to me on Twitter \@pbesh any
time.\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":192,\"end\":198,\"href\":\"https:\\u002F\\u002Ftwitter.com\\u002Fpbesh\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_265\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_265\",\"name\":\"9f70\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Final
Source Code on
GitHub\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":27,\"href\":\"https:\\u002F\\u002Fgithub.com\\u002FCorticoAI\\u002F3d-react-demo\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":0,\"end\":27,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_266\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_266\",\"name\":\"7896\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Final
Demo\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":10,\"href\":\"https:\\u002F\\u002Fcorticoai.github.io\\u002F3d-react-demo\\u002F\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null},{\"\_\_typename\":\"Markup\",\"type\":\"STRONG\",\"start\":0,\"end\":10,\"href\":null,\"anchorType\":null,\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_267\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_267\",\"name\":\"1ff1\",\"type\":\"ULI\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Final
CodeSandbox\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[{\"\_\_typename\":\"Markup\",\"type\":\"A\",\"start\":0,\"end\":17,\"href\":\"https:\\u002F\\u002Fcodesandbox.io\\u002Fs\\u002Fr3f-demo-7-y5nrg?fontsize=14&hidenavigation=1&theme=dark\",\"anchorType\":\"LINK\",\"userId\":null,\"linkMetadata\":null}\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"Paragraph:afbeda6709c_268\":{\"\_\_typename\":\"Paragraph\",\"id\":\"afbeda6709c_268\",\"name\":\"6b68\",\"type\":\"P\",\"href\":null,\"layout\":null,\"metadata\":null,\"text\":\"Best
of luck in the wonderful world of
3D!\",\"hasDropCap\":null,\"dropCapImage\":null,\"markups\":\[\],\"codeBlockMetadata\":null,\"iframe\":null,\"mixtapeMetadata\":null},\"CollectionViewerEdge:collectionId:58df2c4fcaa3-viewerId:lo_f4345b386af9\":{\"\_\_typename\":\"CollectionViewerEdge\",\"id\":\"collectionId:58df2c4fcaa3-viewerId:lo_f4345b386af9\",\"isEditor\":false,\"isMuting\":false},\"ImageMetadata:1*9V5dXkk0pSMmeoNad9aC1A.png\":{\"\_\_typename\":\"ImageMetadata\",\"id\":\"1*9V5dXkk0pSMmeoNad9aC1A.png\",\"originalWidth\":1500,\"originalHeight\":309},\"Tag:data-visualization\":{\"\_\_typename\":\"Tag\",\"id\":\"data-visualization\",\"displayTitle\":\"Data
Visualization\",\"normalizedTagSlug\":\"data-visualization\"},\"Tag:react\":{\"\_\_typename\":\"Tag\",\"id\":\"react\",\"displayTitle\":\"React\",\"normalizedTagSlug\":\"react\"},\"Tag:threejs\":{\"\_\_typename\":\"Tag\",\"id\":\"threejs\",\"displayTitle\":\"Threejs\",\"normalizedTagSlug\":\"threejs\"},\"Tag:3d\":{\"\_\_typename\":\"Tag\",\"id\":\"3d\",\"displayTitle\":\"3d\",\"normalizedTagSlug\":\"3d\"},\"Post:7272fb6de432\":{\"\_\_typename\":\"Post\",\"id\":\"7272fb6de432\",\"collection\":{\"\_\_ref\":\"Collection:58df2c4fcaa3\"},\"content({\"postMeteringOptions\":{}})\":{\"\_\_typename\":\"PostContent\",\"isLockedPreviewOnly\":false,\"bodyModel\":{\"\_\_typename\":\"RichText\",\"sections\":\[{\"\_\_typename\":\"Section\",\"name\":\"23fa\",\"startIndex\":0,\"textLayout\":null,\"imageLayout\":null,\"backgroundImage\":null,\"videoLayout\":null,\"backgroundVideo\":null}\],\"paragraphs\":\[{\"\_\_ref\":\"Paragraph:afbeda6709c_0\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_1\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_2\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_3\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_4\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_5\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_6\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_7\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_8\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_9\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_10\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_11\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_12\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_13\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_14\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_15\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_16\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_17\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_18\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_19\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_20\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_21\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_22\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_23\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_24\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_25\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_26\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_27\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_28\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_29\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_30\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_31\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_32\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_33\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_34\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_35\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_36\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_37\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_38\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_39\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_40\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_41\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_42\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_43\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_44\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_45\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_46\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_47\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_48\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_49\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_50\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_51\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_52\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_53\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_54\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_55\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_56\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_57\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_58\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_59\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_60\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_61\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_62\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_63\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_64\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_65\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_66\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_67\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_68\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_69\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_70\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_71\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_72\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_73\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_74\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_75\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_76\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_77\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_78\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_79\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_80\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_81\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_82\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_83\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_84\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_85\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_86\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_87\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_88\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_89\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_90\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_91\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_92\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_93\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_94\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_95\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_96\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_97\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_98\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_99\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_100\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_101\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_102\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_103\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_104\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_105\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_106\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_107\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_108\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_109\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_110\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_111\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_112\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_113\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_114\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_115\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_116\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_117\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_118\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_119\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_120\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_121\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_122\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_123\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_124\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_125\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_126\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_127\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_128\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_129\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_130\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_131\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_132\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_133\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_134\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_135\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_136\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_137\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_138\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_139\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_140\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_141\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_142\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_143\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_144\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_145\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_146\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_147\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_148\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_149\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_150\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_151\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_152\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_153\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_154\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_155\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_156\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_157\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_158\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_159\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_160\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_161\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_162\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_163\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_164\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_165\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_166\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_167\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_168\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_169\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_170\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_171\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_172\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_173\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_174\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_175\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_176\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_177\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_178\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_179\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_180\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_181\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_182\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_183\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_184\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_185\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_186\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_187\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_188\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_189\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_190\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_191\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_192\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_193\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_194\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_195\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_196\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_197\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_198\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_199\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_200\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_201\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_202\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_203\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_204\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_205\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_206\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_207\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_208\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_209\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_210\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_211\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_212\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_213\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_214\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_215\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_216\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_217\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_218\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_219\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_220\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_221\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_222\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_223\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_224\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_225\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_226\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_227\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_228\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_229\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_230\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_231\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_232\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_233\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_234\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_235\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_236\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_237\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_238\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_239\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_240\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_241\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_242\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_243\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_244\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_245\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_246\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_247\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_248\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_249\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_250\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_251\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_252\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_253\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_254\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_255\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_256\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_257\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_258\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_259\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_260\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_261\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_262\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_263\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_264\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_265\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_266\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_267\"},{\"\_\_ref\":\"Paragraph:afbeda6709c_268\"}\]},\"validatedShareKey\":\"\",\"shareKeyCreator\":null},\"creator\":{\"\_\_ref\":\"User:94b947609777\"},\"inResponseToEntityType\":null,\"isLocked\":false,\"isMarkedPaywallOnly\":false,\"lockedSource\":\"LOCKED_POST_SOURCE_NONE\",\"mediumUrl\":\"https:\\u002F\\u002Fmedium.com\\u002Fcortico\\u002F3d-data-visualization-with-react-and-three-js-7272fb6de432\",\"primaryTopic\":null,\"topics\":\[\],\"isPublished\":true,\"latestPublishedVersion\":\"afbeda6709c\",\"visibility\":\"PUBLIC\",\"postResponses\":{\"\_\_typename\":\"PostResponses\",\"count\":2},\"createdAt\":1580313687101,\"firstPublishedAt\":1580483375125,\"latestPublishedAt\":1580483375125,\"clapCount\":649,\"allowResponses\":true,\"isLimitedState\":false,\"title\":\"3D
Data Visualization with React and
Three.js\",\"isSeries\":false,\"sequence\":null,\"uniqueSlug\":\"3d-data-visualization-with-react-and-three-js-7272fb6de432\",\"socialTitle\":\"\",\"socialDek\":\"\",\"noIndex\":null,\"canonicalUrl\":\"\",\"metaDescription\":\"\",\"readingTime\":23.60377358490566,\"previewContent\":{\"\_\_typename\":\"PreviewContent\",\"subtitle\":\"Go
step-by-step through the making of a 3D data visualization including
animation and interaction. Made with React and
Three.js.\"},\"previewImage\":{\"\_\_ref\":\"ImageMetadata:1\*vWLlwO3cFbWse25p1y6E9Q.png\"},\"isShortform\":false,\"seoTitle\":\"\",\"updatedAt\":1639385786399,\"shortformType\":\"SHORTFORM_TYPE_LINK\",\"seoDescription\":\"\",\"isSuspended\":false,\"license\":\"ALL_RIGHTS_RESERVED\",\"tags\":\[{\"\_\_ref\":\"Tag:data-visualization\"},{\"\_\_ref\":\"Tag:react\"},{\"\_\_ref\":\"Tag:threejs\"},{\"\_\_ref\":\"Tag:3d\"}\],\"isNewsletter\":false,\"statusForCollection\":\"APPROVED\",\"pendingCollection\":null,\"detectedLanguage\":\"en\",\"wordCount\":5354,\"layerCake\":0}}`</script>`{=html}`<script>`{=html}window.**MIDDLEWARE_STATE**={\"session\":{\"xsrf\":\"\"},\"cache\":{\"cacheStatus\":\"HIT\"}}`</script>`{=html}`<script src="https://cdn-client.medium.com/lite/static/js/manifest.fda809b1.js">`{=html}`</script>`{=html}`<script src="https://cdn-client.medium.com/lite/static/js/3057.5e22bbb0.js">`{=html}`</script>`{=html}`<script src="https://cdn-client.medium.com/lite/static/js/main.98af010b.js">`{=html}`</script>`{=html}`<script src="https://cdn-client.medium.com/lite/static/js/instrumentation.5e7f2981.chunk.js">`{=html}`</script>`{=html}

```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/reporting.2021fe63.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/6068.e9093f2e.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/4398.db4d4378.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/7883.0e445e04.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/9281.e9be8bce.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/7111.1421aaa2.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/6481.e3e8b67f.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/8695.17d1af21.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/6358.a78f5809.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/4341.e697d2a1.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/5971.fd9e1c6f.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/5203.e7a22052.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/5514.6018be2b.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/7098.7bbb418a.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/5700.1c9f05c6.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/8491.7fa46461.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/8597.31012efa.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/1711.b70f1a35.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/9174.24f568ee.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/8883.c8b03d13.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/705.da9267d6.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/5781.39279ff8.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/8580.feeb2549.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/6046.f9be485b.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/6605.caa5db7b.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/500.80a4127d.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/9408.9f41b422.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/6637.8a411a8c.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/8565.ce53d42b.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/4667.993ebc2b.chunk.js"></script>
```
```{=html}
<script src="https://cdn-client.medium.com/lite/static/js/PostPage.MainContent.12f09e15.chunk.js"></script><script>window.main();</script></body></html>
```
